<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="en">

<head>
  <link href='https://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css' /><title>Quick Start &mdash; Ruby Driver Manual upcoming</title><link rel="shortcut icon" href="https://media.mongodb.org/favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="robots" content="index" />

  <meta name="release" content="upcoming"/>
  <meta name="version" content="master"/>
  <meta name="DC.Source" content="https://github.com/mongodb/docs-ruby/blob/master/source/tutorials/quick-start.txt"/>
  <meta property="og:image" content="http://s3.amazonaws.com/info-mongodb-com/_com_assets/cms/mongodb-for-giant-ideas-bbab5c3cf8.png">
  <meta property="og:image:secure_url" content="https://webassets.mongodb.com/_com_assets/cms/mongodb-for-giant-ideas-bbab5c3cf8.png">
    <link rel="canonical" href="https://docs.mongodb.com/docs-ruby/current/tutorials/quick-start/" />
  
   <link rel="stylesheet" href="../_static/mongodb-docs.css" type="text/css" />
   <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
   <link rel="stylesheet" href="../_static/css/navbar.min.css?t=nocache" type="text/css" />
    
    <script type="text/javascript" src="../_static/lib/jquery.min.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/lib/bootstrap.js"></script>
    <script type="text/javascript" src="../_static/lib/jquery.cookie.js"></script>
    <script type="text/javascript" src="../_static/controller.js"></script>
      <link rel="search" type="application/opensearchdescription+xml" href="https://docs.mongodb.com/osd.xml" title="MongoDB Help"/>
<!-- <link rel="index" title="Index" href="../genindex.html" /> -->
<link rel="search" title="Search" href="../search.html" />
<link rel="top" title="Ruby Driver Manual" href="../index.html" />
<link rel="up" title="Tutorials" href="../tutorials.html" />
<link rel="next" title="Creating a Client" href="../reference/create-client.html" />
<link rel="prev" title="Tutorials" href="../tutorials.html" /></head>
<body data-project="docs-ruby" data-project-title="Ruby Driver Manual" data-branch="master" data-enable-marian=1 data-eol="">
  <!-- Google Tag Manager -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-GDFN"
                    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <script>
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push(
  {'gtm.start':new Date().getTime(),event:'gtm.js'}
  );var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-GDFN');
  </script>
  <!-- End Google Tag Manager -->
   <script>
     window.googleSearchCx = "014132741538533607290:xl0kbqanc9y"
     window.googleSearchPlaceholder = "Search Ruby Driver"
     window.googleSearchResultsUrl = "http://docs.mongodb.com/ruby-driver/master/search/"
   </script><div class="content" >

   <div id="left-column">
         <aside id="sidebar" class="sidebar">
             
  <div class="sphinxsidebar" id="sphinxsidebar">
    <div id="sphinxsidebarwrapper" class="sphinxsidebarwrapper"><a href="javascript:void(0)" class="closeNav" id="closeNav">Close &times;</a>


<h3>
  <a href="../index.html">Ruby Driver Manual</a>
</h3>


    <div class="btn-group version-sidebar">
      
        <button type="button" class="version-button dropdown-toggle" data-toggle="dropdown">
          
          
          master (upcoming)<span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
          
            
            <li class="active">
            
              <a href="#" data-path="ruby-driver/current">
                
                master (upcoming)
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.14">
                
                Version 2.14 (current)
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.13">
                
                Version 2.13
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.12">
                
                Version 2.12
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.11">
                
                Version 2.11
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.10">
                
                Version 2.10
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.9">
                
                Version 2.9
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.8">
                
                Version 2.8
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.7">
                
                Version 2.7
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.6">
                
                Version 2.6
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.5">
                
                Version 2.5
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.4">
                
                Version 2.4
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.3">
                
                Version 2.3
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.2">
                
                Version 2.2
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.0">
                
                Version 2.0
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v1.x">
                
                1.x
              </a>
            </li>
          
        </ul>
      
    </div>


<ul class="current"><li class="toctree-l1"><a class="reference internal" href="../getting-started.html">Getting Started</a></li><li class="toctree-l1 current"><a class="reference internal" href="../tutorials.html">Tutorials</a><ul class="current"><li class="toctree-l2 current"><a class="reference internal current" href="">Quick Start</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../reference/create-client.html">Creating a Client</a></li><li class="toctree-l1"><a class="reference internal" href="../reference/authentication.html">Authentication</a></li><li class="toctree-l1"><a class="reference internal" href="../reference/working-with-data.html">Working With Data</a></li><li class="toctree-l1"><a class="reference internal" href="../reference/user-management.html">User Management</a></li><li class="toctree-l1"><a class="reference internal" href="../reference/collection-tasks.html">Collections</a></li><li class="toctree-l1"><a class="reference internal" href="../reference/sessions.html">Sessions</a></li><li class="toctree-l1"><a class="reference internal" href="../reference/transactions.html">Transactions</a></li><li class="toctree-l1"><a class="reference internal" href="../reference/change-streams.html">Change Streams</a></li><li class="toctree-l1"><a class="reference internal" href="../reference/database-tasks.html">Databases</a></li><li class="toctree-l1"><a class="reference internal" href="../reference/monitoring.html">Monitoring</a></li><li class="toctree-l1"><a class="reference internal" href="../reference/indexing.html">Indexing</a></li><li class="toctree-l1"><a class="reference internal" href="../reference/collations.html">Collations</a></li><li class="toctree-l1"><a class="reference internal" href="../reference/client-side-encryption.html">Client-Side Encryption</a></li><li class="toctree-l1"><a class="reference internal" href="../bson-tutorials.html">BSON</a><ul><li class="toctree-l2"><a class="reference internal" href="bson-v4.html">BSON 4.x Tutorial</a></li><li class="toctree-l2"><a class="reference internal" href="bson-v3.html">BSON 3.x Tutorial</a></li></ul></li><li class="toctree-l1"><a class="reference external" href="https://docs.mongodb.com/ruby-driver/master/api/">API</a></li><li class="toctree-l1"><a class="reference internal" href="../reference/additional-resources.html">Additional Resources</a></li><li class="toctree-l1"><a class="reference internal" href="../contribute.html">Contribute to the Driver</a></li></ul>
    </div>
  </div>
           
         </aside>

   </div>

    <div id="main-column" class="main-column">

    <span id="showNav" class="showNav">Navigation</span>

      
      
        <div class="document">
            <div class="documentwrapper"><div class="bodywrapper">
              <div class="body" data-pagename="tutorials/quick-start">

                
  <div class="bc">
    
      <ul>
          <li><a href="../tutorials.html">Tutorials</a><span class="bcpoint"> > </span></li>
            <li>Quick Start</li> 
      </ul>
    
    
  </div>
                
                  <div class="section" id="quick-start">
<h1>Quick Start<a class="headerlink" href="#quick-start" title="Permalink to this headline">¶</a></h1>
<div class="contents singlecol local topic" id="on-this-page">
<p class="topic-title">On this page</p>
<ul class="simple">
<li><a class="reference internal" href="#prerequisites" id="id1">Prerequisites</a></li>
<li><a class="reference internal" href="#make-a-connection" id="id2">Make a Connection</a></li>
<li><a class="reference internal" href="#access-a-database-and-a-collection" id="id3">Access a Database and a Collection</a></li>
<li><a class="reference internal" href="#insert-a-document" id="id4">Insert a Document</a></li>
<li><a class="reference internal" href="#query-the-collection" id="id5">Query the Collection</a></li>
<li><a class="reference internal" href="#update-documents" id="id6">Update Documents</a></li>
<li><a class="reference internal" href="#delete-documents" id="id7">Delete Documents</a></li>
<li><a class="reference internal" href="#create-indexes" id="id8">Create Indexes</a></li>
<li><a class="reference internal" href="#complete-sample-app" id="id9">Complete Sample App</a></li>
</ul>
</div>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>A running MongoDB instance on localhost using the default port, 27017.</li>
<li>The Ruby MongoDB driver. See <a class="reference internal" href="../installation.html#id1"><span class="std std-ref">installation</span></a>
for instructions on how to install the MongoDB driver.</li>
<li>The following statement at the top of your code:</li>
</ul>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="nb">require</span> <span class="s1">&#39;mongo&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="make-a-connection">
<h2>Make a Connection<a class="headerlink" href="#make-a-connection" title="Permalink to this headline">¶</a></h2>
<p>Use <code class="docutils literal notranslate"><span class="pre">Mongo::Client</span></code> to establish a connection to a running MongoDB
instance.</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="o">=</span> <span class="no">Mongo</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="o">[</span> <span class="s1">&#39;127.0.0.1:27017&#39;</span> <span class="o">]</span><span class="p">,</span> <span class="ss">:database</span> <span class="o">=&gt;</span> <span class="s1">&#39;test&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>You can also use a URI connection string:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="o">=</span> <span class="no">Mongo</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;mongodb://127.0.0.1:27017/test&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="../reference/create-client.html#connect-replica-set"><span class="std std-ref">Connect to a replica set</span></a>,
<a class="reference internal" href="../reference/create-client.html#connect-sharded-cluster"><span class="std std-ref">Connect to a sharded cluster</span></a>,
<a class="reference internal" href="../reference/create-client.html#client-options"><span class="std std-ref">Client options</span></a></p>
</div>
</div>
<div class="section" id="access-a-database-and-a-collection">
<h2>Access a Database and a Collection<a class="headerlink" href="#access-a-database-and-a-collection" title="Permalink to this headline">¶</a></h2>
<p>The following examples demonstrate how to access a particular database
and show its collections:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="o">=</span> <span class="no">Mongo</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="o">[</span> <span class="s1">&#39;127.0.0.1:27017&#39;</span> <span class="o">]</span><span class="p">,</span> <span class="ss">:database</span> <span class="o">=&gt;</span> <span class="s1">&#39;test&#39;</span><span class="p">)</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">database</span>

<span class="n">db</span><span class="o">.</span><span class="n">collections</span> <span class="c1"># returns a list of collection objects</span>
<span class="n">db</span><span class="o">.</span><span class="n">collection_names</span> <span class="c1"># returns a list of collection names</span>
</pre></div>
</div>
</div>
<p>To access a collection, refer to it by name.</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">collection</span> <span class="o">=</span> <span class="n">client</span><span class="o">[</span><span class="ss">:restaurants</span><span class="o">]</span>
</pre></div>
</div>
</div>
<p>If the collection does not exist, the server will create it the first
time you put data into it.</p>
</div>
<div class="section" id="insert-a-document">
<h2>Insert a Document<a class="headerlink" href="#insert-a-document" title="Permalink to this headline">¶</a></h2>
<p>To insert a single document into a collection, use the
<code class="docutils literal notranslate"><span class="pre">insert_one</span></code> method.</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="o">=</span> <span class="no">Mongo</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;mongodb://127.0.0.1:27017/test&#39;</span><span class="p">)</span>

<span class="n">collection</span> <span class="o">=</span> <span class="n">client</span><span class="o">[</span><span class="ss">:people</span><span class="o">]</span>

<span class="n">doc</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nb">name</span><span class="p">:</span> <span class="s1">&#39;Steve&#39;</span><span class="p">,</span>
  <span class="ss">hobbies</span><span class="p">:</span> <span class="o">[</span> <span class="s1">&#39;hiking&#39;</span><span class="p">,</span> <span class="s1">&#39;tennis&#39;</span><span class="p">,</span> <span class="s1">&#39;fly fishing&#39;</span> <span class="o">]</span><span class="p">,</span>
  <span class="ss">siblings</span><span class="p">:</span> <span class="p">{</span>
    <span class="ss">brothers</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="ss">sisters</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">insert_one</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
<span class="n">result</span><span class="o">.</span><span class="n">n</span> <span class="c1"># returns 1, because one document was inserted</span>
</pre></div>
</div>
</div>
<p>To insert multiple documents into a collection, use the
<code class="docutils literal notranslate"><span class="pre">insert_many</span></code> method.</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">docs</span> <span class="o">=</span> <span class="o">[</span> <span class="p">{</span> <span class="ss">_id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">name</span><span class="p">:</span> <span class="s1">&#39;Steve&#39;</span><span class="p">,</span>
           <span class="ss">hobbies</span><span class="p">:</span> <span class="o">[</span> <span class="s1">&#39;hiking&#39;</span><span class="p">,</span> <span class="s1">&#39;tennis&#39;</span><span class="p">,</span> <span class="s1">&#39;fly fishing&#39;</span> <span class="o">]</span><span class="p">,</span>
           <span class="ss">siblings</span><span class="p">:</span> <span class="p">{</span> <span class="ss">brothers</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="ss">sisters</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}</span> <span class="p">},</span>
         <span class="p">{</span> <span class="ss">_id</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nb">name</span><span class="p">:</span> <span class="s1">&#39;Sally&#39;</span><span class="p">,</span>
                 <span class="ss">hobbies</span><span class="p">:</span> <span class="o">[</span><span class="s1">&#39;skiing&#39;</span><span class="p">,</span> <span class="s1">&#39;stamp collecting&#39;</span> <span class="o">]</span><span class="p">,</span>
                 <span class="ss">siblings</span><span class="p">:</span> <span class="p">{</span> <span class="ss">brothers</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="ss">sisters</span><span class="p">:</span> <span class="mi">0</span> <span class="p">}</span> <span class="p">}</span> <span class="o">]</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">insert_many</span><span class="p">(</span><span class="n">docs</span><span class="p">)</span>
<span class="n">result</span><span class="o">.</span><span class="n">inserted_count</span> <span class="c1"># returns 2 because two documents were inserted</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="query-the-collection">
<h2>Query the Collection<a class="headerlink" href="#query-the-collection" title="Permalink to this headline">¶</a></h2>
<p>Use the <code class="docutils literal notranslate"><span class="pre">find</span></code> method to create collection queries.</p>
<p>An empty query filter returns all documents in the collection.</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="o">=</span> <span class="no">Mongo</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;mongodb://127.0.0.1:27017/test&#39;</span><span class="p">)</span>
<span class="n">collection</span> <span class="o">=</span> <span class="n">client</span><span class="o">[</span><span class="ss">:people</span><span class="o">]</span>

<span class="n">collection</span><span class="o">.</span><span class="n">find</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">document</span><span class="o">|</span>
  <span class="c1">#=&gt; Yields a BSON::Document.</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
<p>Use a query filter to find only matching documents.</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="o">=</span> <span class="no">Mongo</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;mongodb://127.0.0.1:27017/test&#39;</span><span class="p">)</span>
<span class="n">collection</span> <span class="o">=</span> <span class="n">client</span><span class="o">[</span><span class="ss">:people</span><span class="o">]</span>

<span class="nb">puts</span> <span class="n">collection</span><span class="o">.</span><span class="n">find</span><span class="p">(</span> <span class="p">{</span> <span class="nb">name</span><span class="p">:</span> <span class="s1">&#39;Sally&#39;</span> <span class="p">}</span> <span class="p">)</span><span class="o">.</span><span class="n">first</span>
</pre></div>
</div>
</div>
<p>The example should print the following:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;_id&quot;</span> <span class="p">=&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span> <span class="p">=&gt;</span> <span class="s2">&quot;Sally&quot;</span><span class="p">,</span> <span class="s2">&quot;hobbies&quot;</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="s2">&quot;skiing&quot;</span><span class="p">,</span> <span class="s2">&quot;stamp collecting&quot;</span><span class="p">],</span> <span class="s2">&quot;siblings&quot;</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="s2">&quot;brothers&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;sisters&quot;</span><span class="o">:</span> <span class="mi">0</span> <span class="p">}</span> <span class="p">}</span>
</pre></div>
</div>
</div>
<p>Query nested documents by specifying the keys and values you want
to match.</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="o">=</span> <span class="no">Mongo</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;mongodb://127.0.0.1:27017/test&#39;</span><span class="p">)</span>
<span class="n">collection</span> <span class="o">=</span> <span class="n">client</span><span class="o">[</span><span class="ss">:people</span><span class="o">]</span>

<span class="nb">puts</span> <span class="n">collection</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;siblings.sisters&quot;</span><span class="p">:</span> <span class="mi">1</span> <span class="p">)</span><span class="o">.</span><span class="n">first</span>
</pre></div>
</div>
</div>
<p>The example should print the following:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="p">=&gt;</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">=&gt;</span><span class="s2">&quot;Steve&quot;</span><span class="p">,</span> <span class="s2">&quot;hobbies&quot;</span><span class="p">=&gt;[</span><span class="s2">&quot;hiking&quot;</span><span class="p">,</span> <span class="s2">&quot;tennis&quot;</span><span class="p">,</span> <span class="s2">&quot;fly fishing&quot;</span><span class="p">],</span> <span class="s2">&quot;siblings&quot;</span><span class="p">=&gt;{</span><span class="s2">&quot;brothers&quot;</span><span class="p">=&gt;</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;sisters&quot;</span><span class="p">=&gt;</span><span class="mi">1</span><span class="p">}}</span>
</pre></div>
</div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="../reference/crud-operations.html#query-options"><span class="std std-ref">Query Options</span></a>, <a class="reference internal" href="../reference/crud-operations.html#read-preference"><span class="std std-ref">Read Preference</span></a></p>
</div>
</div>
<div class="section" id="update-documents">
<h2>Update Documents<a class="headerlink" href="#update-documents" title="Permalink to this headline">¶</a></h2>
<p>There are several update methods, including <code class="docutils literal notranslate"><span class="pre">update_one</span></code> and
<code class="docutils literal notranslate"><span class="pre">update_many</span></code>. <code class="docutils literal notranslate"><span class="pre">update_one</span></code> updates a single document, while
<code class="docutils literal notranslate"><span class="pre">update_many</span></code> updates multiple documents at once.</p>
<p>Both methods take as arguments a query filter document and a second
document with the update data. Use <code class="docutils literal notranslate"><span class="pre">$set</span></code> to add or update a
particular field or fields. Without <code class="docutils literal notranslate"><span class="pre">$set</span></code>, the entire existing
document is replaced with the update data.</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="o">=</span> <span class="no">Mongo</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;mongodb://127.0.0.1:27017/test&#39;</span><span class="p">)</span>
<span class="n">collection</span> <span class="o">=</span> <span class="n">client</span><span class="o">[</span><span class="ss">:people</span><span class="o">]</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">update_one</span><span class="p">(</span> <span class="p">{</span> <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Sally&#39;</span> <span class="p">},</span> <span class="p">{</span> <span class="s1">&#39;$set&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="s1">&#39;phone_number&#39;</span> <span class="o">=&gt;</span> <span class="s2">&quot;555-555-5555&quot;</span> <span class="p">}</span> <span class="p">}</span> <span class="p">)</span>

<span class="nb">puts</span> <span class="n">collection</span><span class="o">.</span><span class="n">find</span><span class="p">(</span> <span class="p">{</span> <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Sally&#39;</span> <span class="p">}</span> <span class="p">)</span><span class="o">.</span><span class="n">first</span>
</pre></div>
</div>
</div>
<p>The example should print the following:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;_id&quot;</span> <span class="p">=&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span> <span class="p">=&gt;</span> <span class="s2">&quot;Sally&quot;</span><span class="p">,</span> <span class="s2">&quot;hobbies&quot;</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="s2">&quot;skiing&quot;</span><span class="p">,</span> <span class="s2">&quot;stamp collecting&quot;</span><span class="p">],</span> <span class="s2">&quot;phone_number&quot;</span> <span class="p">=&gt;</span> <span class="s2">&quot;555-555-5555&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<p>The following example uses <code class="docutils literal notranslate"><span class="pre">update_many</span></code> with a blank query filter
to update all the documents in the collection.</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="o">=</span> <span class="no">Mongo</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;mongodb://127.0.0.1:27017/test&#39;</span><span class="p">)</span>
<span class="n">collection</span> <span class="o">=</span> <span class="n">client</span><span class="o">[</span><span class="ss">:people</span><span class="o">]</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">update_many</span><span class="p">(</span> <span class="p">{},</span> <span class="p">{</span> <span class="s1">&#39;$set&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="s1">&#39;age&#39;</span> <span class="o">=&gt;</span> <span class="mi">36</span> <span class="p">}</span> <span class="p">}</span> <span class="p">)</span>

<span class="nb">puts</span> <span class="n">result</span><span class="o">.</span><span class="n">modified_count</span> <span class="c1"># returns 2 because 2 documents were updated</span>
</pre></div>
</div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="../reference/crud-operations.html#updating"><span class="std std-ref">Other update options</span></a></p>
</div>
</div>
<div class="section" id="delete-documents">
<h2>Delete Documents<a class="headerlink" href="#delete-documents" title="Permalink to this headline">¶</a></h2>
<p>Use the <code class="docutils literal notranslate"><span class="pre">delete_one</span></code> or <code class="docutils literal notranslate"><span class="pre">delete_many</span></code> methods to delete documents
from a collection (either singly or several at once).</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="o">=</span> <span class="no">Mongo</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;mongodb://127.0.0.1:27017/test&#39;</span><span class="p">)</span>
<span class="n">collection</span> <span class="o">=</span> <span class="n">client</span><span class="o">[</span><span class="ss">:people</span><span class="o">]</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">delete_one</span><span class="p">(</span> <span class="p">{</span> <span class="nb">name</span><span class="p">:</span> <span class="s1">&#39;Steve&#39;</span> <span class="p">}</span> <span class="p">)</span>

<span class="nb">puts</span> <span class="n">result</span><span class="o">.</span><span class="n">deleted_count</span> <span class="c1"># returns 1 because one document was deleted</span>
</pre></div>
</div>
</div>
<p>The following example inserts two more records into the collection,
then deletes all the documents with a <code class="docutils literal notranslate"><span class="pre">name</span></code> field which
matches a regular expression to find a string which begins with “S”.</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="o">=</span> <span class="no">Mongo</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;mongodb://127.0.0.1:27017/test&#39;</span><span class="p">)</span>
<span class="n">collection</span> <span class="o">=</span> <span class="n">client</span><span class="o">[</span><span class="ss">:people</span><span class="o">]</span>

<span class="n">collection</span><span class="o">.</span><span class="n">insert_many</span><span class="p">(</span><span class="o">[</span> <span class="p">{</span> <span class="ss">_id</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="nb">name</span><span class="p">:</span> <span class="s2">&quot;Arnold&quot;</span> <span class="p">},</span> <span class="p">{</span> <span class="ss">_id</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="nb">name</span><span class="p">:</span> <span class="s2">&quot;Susan&quot;</span> <span class="p">}</span> <span class="o">]</span><span class="p">)</span>

<span class="nb">puts</span> <span class="n">collection</span><span class="o">.</span><span class="n">count</span> <span class="c1"># counts all documents in collection</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">delete_many</span><span class="p">({</span> <span class="nb">name</span><span class="p">:</span> <span class="sr">/$S*/</span> <span class="p">})</span>

<span class="nb">puts</span> <span class="n">result</span><span class="o">.</span><span class="n">deleted_count</span> <span class="c1"># returns the number of documents deleted</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="create-indexes">
<h2>Create Indexes<a class="headerlink" href="#create-indexes" title="Permalink to this headline">¶</a></h2>
<p>Use the <code class="docutils literal notranslate"><span class="pre">create_one</span></code> or <code class="docutils literal notranslate"><span class="pre">create_many</span></code> methods to create indexes
singly or several at once.</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="o">=</span> <span class="no">Mongo</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;mongodb://127.0.0.1:27017/test&#39;</span><span class="p">)</span>
<span class="n">collection</span> <span class="o">=</span> <span class="n">client</span><span class="o">[</span><span class="ss">:people</span><span class="o">]</span>

<span class="n">collection</span><span class="o">.</span><span class="n">indexes</span><span class="o">.</span><span class="n">create_one</span><span class="p">({</span> <span class="nb">name</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="ss">unique</span><span class="p">:</span> <span class="kp">true</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Use the <code class="docutils literal notranslate"><span class="pre">create_many</span></code> method to create several indexes with one
statement. Note that when using <code class="docutils literal notranslate"><span class="pre">create_many</span></code>, the syntax is
different from <code class="docutils literal notranslate"><span class="pre">create_one</span></code>.</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="o">=</span> <span class="no">Mongo</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;mongodb://127.0.0.1:27017/test&#39;</span><span class="p">)</span>
<span class="n">collection</span> <span class="o">=</span> <span class="n">client</span><span class="o">[</span><span class="ss">:people</span><span class="o">]</span>

<span class="n">collection</span><span class="o">.</span><span class="n">indexes</span><span class="o">.</span><span class="n">create_many</span><span class="p">(</span><span class="o">[</span>
    <span class="p">{</span> <span class="ss">key</span><span class="p">:</span> <span class="p">{</span> <span class="nb">name</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}</span> <span class="p">,</span> <span class="ss">unique</span><span class="p">:</span> <span class="kp">true</span> <span class="p">},</span>
    <span class="p">{</span> <span class="ss">key</span><span class="p">:</span>  <span class="p">{</span> <span class="ss">hobbies</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}</span> <span class="p">},</span>
  <span class="o">]</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="../reference/indexing.html#index-options"><span class="std std-ref">Index options</span></a></p>
</div>
</div>
<div class="section" id="complete-sample-app">
<h2>Complete Sample App<a class="headerlink" href="#complete-sample-app" title="Permalink to this headline">¶</a></h2>
<p>A sample app using the Ruby driver for several common use cases
is available for download from
<a class="reference external" href="https://github.com/steveren/ruby-driver-sample-app">GitHub</a>.</p>
</div>
</div>

                
    <div id="btnv">
      <span class="btn-arrow-left">&larr; &nbsp;</span>
      <a class="btn-prev-text" href="../tutorials.html" title="Previous Section: Tutorials"><span>Tutorials</span></a>
      <a class="btn-next-text" href="../reference/create-client.html" title="Next Section: Creating a Client"><span>Creating a Client</span></a>
      <span class="btn-arrow-right">&nbsp;&rarr;</span>
    </div>
                  <div class="footer">
                    <div class="copyright">
                      <p>&copy; MongoDB, Inc 2008-present. MongoDB, Mongo, and the leaf logo are registered trademarks of MongoDB, Inc.</p>
                    </div>
                  </div>
              </div></div>
            </div>
        </div>
    </div>
    <div class="right-column">
      <div class="wrapper"> 
            <div class="social">
               <a class="slack-icon" href="https://slackpass.io/mongo-db?jmp=docs" title="https://slackpass.io/mongo-db?jmp=docs"><i class="fab fa-slack" aria-hidden="true"></i></a>
               <a class="twitter-icon" href="https://twitter.com/MongoDB" title="https://twitter.com/MongoDB"><i class="fab fa-twitter-square"></i></a>
               <a class="youtube-icon" href="https://www.youtube.com/user/MongoDB" title="https://www.youtube.com/user/MongoDB"><i class="fab fa-youtube-square"></i></a>
               <a class="facebook-icon" href="https://www.facebook.com/mongodb" title="https://www.facebook.com/mongodb"><i class="fab fa-facebook-square"></i></a>
               <a class="stack-overflow-icon" href="https://stackoverflow.com/tags/mongodb/info" title="https://stackoverflow.com/tags/mongodb/info"><i class="fab fa-stack-overflow" aria-hidden="true"></i></a>
            </div>
        

      </div>
    </div>
    
    <div class="clearfix"></div>
  </div>
<div id="navbar" data-navprops='{"links": [{"url": "https://docs.mongodb.com/manual/","text": "Server"},{"url": "https://docs.mongodb.com/ecosystem/drivers/","text": "Drivers","active": true},{"url": "https://docs.mongodb.com/cloud/","text": "Cloud"},{"url": "https://docs.mongodb.com/tools/","text": "Tools"},{"url": "https://docs.mongodb.com/guides/","text": "Guides"}]}'></div>

  <script src="../_static/navbar.min.js"></script>

  

  <script type="text/javascript">
  // Bootstrap array of links that should trigger a full page reload
  window.docsExcludedNav = ['/bson-tutorials', '/mongoid-tutorials'];
  </script></body>
</html>