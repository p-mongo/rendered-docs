
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Collections &#8212; Ruby MongoDB Driver  documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=62ba249389abaaa9ffc34bf36a076bdc1d65ee18" type="text/css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=f31d14ad54b65d19161ba51d4ffff3a77ae00456"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Indexing" href="indexing.html" />
    <link rel="prev" title="Databases" href="database-tasks.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Ruby MongoDB Driver  documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../getting-started.html">
   Getting Started
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../installation.html">
     Installation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="driver-compatibility.html">
     Driver Compatibility
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../support.html">
     Support
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../tutorials.html">
   Tutorials
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../tutorials/quick-start.html">
     Quick Start
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../tutorials/common-errors.html">
     Common Errors
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="connection-and-configuration.html">
   Connection &amp; Configuration
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="create-client.html">
     Creating a Client
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="authentication.html">
     Authentication
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="monitoring.html">
     Monitoring
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="user-management.html">
     User Management
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="working-with-data.html">
   Working With Data
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="crud-operations.html">
     CRUD Operations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="bulk-operations.html">
     Bulk Writes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="projection.html">
     Projection
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="aggregation.html">
     Aggregation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="map-reduce.html">
     Map-Reduce
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="text-search.html">
     Text Search
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="geospatial-search.html">
     Geospatial Search
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="query-cache.html">
     Query Cache
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="gridfs.html">
     GridFS
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="change-streams.html">
     Change Streams
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="sessions.html">
     Sessions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="transactions.html">
     Transactions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="client-side-encryption.html">
     Client-Side Encryption
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="schema-operations.html">
   Schema Operations
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="database-tasks.html">
     Databases
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Collections
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="indexing.html">
     Indexing
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="collations.html">
     Collations
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://mongodb.com/docs/ruby-driver/master/api/">
   API
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../release-notes.html">
   Release Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="additional-resources.html">
   Additional Resources
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../contribute.html">
   Contribute to the Driver
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/reference/collection-tasks.txt"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.txt</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#time-series-collections">
   Time Series Collections
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#creating-a-time-series-collection">
     Creating a Time Series Collection
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#inserting-into-a-time-series-collection">
     Inserting into a Time Series Collection
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#querying-a-time-series-collection">
     Querying a Time Series Collection
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-the-aggregation-pipeline-on-a-time-series-collection">
     Using the Aggregation Pipeline on a Time Series Collection
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#capped-collections">
   Capped Collections
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#convert-an-existing-collection-to-capped">
   Convert an Existing Collection to Capped
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#document-validation">
   Document Validation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#add-validation-to-an-existing-collection">
   Add Validation to an Existing Collection
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#listing-collections">
   Listing Collections
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dropping-collections">
   Dropping Collections
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Collections</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#time-series-collections">
   Time Series Collections
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#creating-a-time-series-collection">
     Creating a Time Series Collection
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#inserting-into-a-time-series-collection">
     Inserting into a Time Series Collection
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#querying-a-time-series-collection">
     Querying a Time Series Collection
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-the-aggregation-pipeline-on-a-time-series-collection">
     Using the Aggregation Pipeline on a Time Series Collection
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#capped-collections">
   Capped Collections
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#convert-an-existing-collection-to-capped">
   Convert an Existing Collection to Capped
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#document-validation">
   Document Validation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#add-validation-to-an-existing-collection">
   Add Validation to an Existing Collection
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#listing-collections">
   Listing Collections
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dropping-collections">
   Dropping Collections
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="collections">
<h1>Collections<a class="headerlink" href="#collections" title="Permalink to this headline">#</a></h1>
<div class="contents singlecol local topic" id="on-this-page">
<p class="topic-title">On this page</p>
<ul class="simple">
<li><p><a class="reference internal" href="#time-series-collections" id="id6">Time Series Collections</a></p></li>
<li><p><a class="reference internal" href="#capped-collections" id="id7">Capped Collections</a></p></li>
<li><p><a class="reference internal" href="#convert-an-existing-collection-to-capped" id="id8">Convert an Existing Collection to Capped</a></p></li>
<li><p><a class="reference internal" href="#document-validation" id="id9">Document Validation</a></p></li>
<li><p><a class="reference internal" href="#add-validation-to-an-existing-collection" id="id10">Add Validation to an Existing Collection</a></p></li>
<li><p><a class="reference internal" href="#listing-collections" id="id11">Listing Collections</a></p></li>
<li><p><a class="reference internal" href="#dropping-collections" id="id12">Dropping Collections</a></p></li>
</ul>
</div>
<p>MongoDB stores documents in collections. If a collection does not
exist, MongoDB creates the collection when you first insert a
document in that collection.</p>
<p>You can also explicitly create a collection with various options,
such as setting the maximum size or the documentation validation rules.</p>
<section id="time-series-collections">
<h2>Time Series Collections<a class="headerlink" href="#time-series-collections" title="Permalink to this headline">#</a></h2>
<p>Time series collections were added in MongoDB 5.0. You can read the documentation
<a class="reference external" href="https://www.mongodb.com/docs/manual/core/timeseries-collections/">here</a>.</p>
<p>Time series collections efficiently store sequences of measurements over a
period of time. Time series data is any data that is collected over time and is
uniquely identified by one or more unchanging parameters. The unchanging
parameters that identify your time series data is generally your data source’s
metadata.</p>
<section id="creating-a-time-series-collection">
<h3>Creating a Time Series Collection<a class="headerlink" href="#creating-a-time-series-collection" title="Permalink to this headline">#</a></h3>
<p>In order to create a time series collection, you must explicitly create a
collection using the time series options:</p>
<div class="highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">opts</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">time_series</span><span class="p">:</span> <span class="p">{</span>
    <span class="ss">timeField</span><span class="p">:</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">,</span>
    <span class="ss">metaField</span><span class="p">:</span> <span class="s2">&quot;metadata&quot;</span><span class="p">,</span>
    <span class="ss">granularity</span><span class="p">:</span> <span class="s2">&quot;hours&quot;</span>
  <span class="p">},</span>
  <span class="ss">expire_after</span><span class="p">:</span> <span class="mi">604800</span>
<span class="p">}</span>

<span class="n">db</span><span class="o">[</span><span class="s1">&#39;weather&#39;</span><span class="p">,</span> <span class="n">opts</span><span class="o">].</span><span class="n">create</span>
</pre></div>
</div>
<p>When creating a time series collection, specify the following options:</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">time_series[:timeField]</span></code></p></td>
<td><p>Required. The name of the field which contains the date in each time series document.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">time_series[:metaField]</span></code></p></td>
<td><p>Optional. The name of the field which contains metadata in each time series document. The metadata in the specified field should be data that is used to label a unique series of documents. The metadata should rarely, if ever, change.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">time_series[:granularity]</span></code></p></td>
<td><p>Optional. Possible values are “seconds”, “minutes”, and “hours”. By default, MongoDB sets the granularity to “seconds” for high-frequency ingestion.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">:expireAfterSeconds</span></code></p></td>
<td><p>Optional. Enable the automatic deletion of documents in a time series collection by specifying the number of seconds after which documents expire. MongoDB deletes expired documents automatically.</p></td>
</tr>
</tbody>
</table>
<p>See the MongoDB <a class="reference external" href="https://www.mongodb.com/docs/manual/core/timeseries-collections/#create-a-time-series-collection">docs</a>
for more information about time series collection options.</p>
</section>
<section id="inserting-into-a-time-series-collection">
<h3>Inserting into a Time Series Collection<a class="headerlink" href="#inserting-into-a-time-series-collection" title="Permalink to this headline">#</a></h3>
<p>Inserting into a time series collection is similar to inserting into a regular collection:</p>
<div class="highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">db</span><span class="o">[</span><span class="s1">&#39;weather&#39;</span><span class="o">].</span><span class="n">insert_many</span><span class="p">(</span><span class="o">[</span>
  <span class="p">{</span>
      <span class="ss">metadata</span><span class="p">:</span> <span class="p">{</span> <span class="ss">sensorId</span><span class="p">:</span> <span class="mi">5578</span><span class="p">,</span> <span class="ss">type</span><span class="p">:</span> <span class="s2">&quot;temperature&quot;</span> <span class="p">},</span>
      <span class="ss">timestamp</span><span class="p">:</span> <span class="no">Time</span><span class="o">.</span><span class="n">utc</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
      <span class="ss">temp</span><span class="p">:</span> <span class="mi">12</span>
  <span class="p">},</span>
  <span class="p">{</span>
      <span class="ss">metadata</span><span class="p">:</span> <span class="p">{</span> <span class="ss">sensorId</span><span class="p">:</span> <span class="mi">5578</span><span class="p">,</span> <span class="ss">type</span><span class="p">:</span> <span class="s2">&quot;temperature&quot;</span> <span class="p">},</span>
      <span class="ss">timestamp</span><span class="p">:</span> <span class="no">Time</span><span class="o">.</span><span class="n">utc</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
      <span class="ss">temp</span><span class="p">:</span> <span class="mi">11</span>
  <span class="p">},</span>
  <span class="p">{</span>
      <span class="ss">metadata</span><span class="p">:</span> <span class="p">{</span> <span class="ss">sensorId</span><span class="p">:</span> <span class="mi">5578</span><span class="p">,</span> <span class="ss">type</span><span class="p">:</span> <span class="s2">&quot;temperature&quot;</span> <span class="p">},</span>
      <span class="ss">timestamp</span><span class="p">:</span> <span class="no">Time</span><span class="o">.</span><span class="n">utc</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
      <span class="ss">temp</span><span class="p">:</span> <span class="mi">11</span>
  <span class="p">},</span>
  <span class="p">{</span>
      <span class="ss">metadata</span><span class="p">:</span> <span class="p">{</span> <span class="ss">sensorId</span><span class="p">:</span> <span class="mi">5578</span><span class="p">,</span> <span class="ss">type</span><span class="p">:</span> <span class="s2">&quot;temperature&quot;</span> <span class="p">},</span>
      <span class="ss">timestamp</span><span class="p">:</span> <span class="no">Time</span><span class="o">.</span><span class="n">utc</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
      <span class="ss">temp</span><span class="p">:</span> <span class="mi">12</span>
  <span class="p">},</span>
  <span class="p">{</span>
      <span class="ss">metadata</span><span class="p">:</span> <span class="p">{</span> <span class="ss">sensorId</span><span class="p">:</span> <span class="mi">5578</span><span class="p">,</span> <span class="ss">type</span><span class="p">:</span> <span class="s2">&quot;temperature&quot;</span> <span class="p">},</span>
      <span class="ss">timestamp</span><span class="p">:</span> <span class="no">Time</span><span class="o">.</span><span class="n">utc</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
      <span class="ss">temp</span><span class="p">:</span> <span class="mi">16</span>
  <span class="p">},</span>
  <span class="p">{</span>
      <span class="ss">metadata</span><span class="p">:</span> <span class="p">{</span> <span class="ss">sensorId</span><span class="p">:</span> <span class="mi">5578</span><span class="p">,</span> <span class="ss">type</span><span class="p">:</span> <span class="s2">&quot;temperature&quot;</span> <span class="p">},</span>
      <span class="ss">timestamp</span><span class="p">:</span> <span class="no">Time</span><span class="o">.</span><span class="n">utc</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
      <span class="ss">temp</span><span class="p">:</span> <span class="mi">15</span>
  <span class="p">},</span> <span class="p">{</span>
      <span class="ss">metadata</span><span class="p">:</span> <span class="p">{</span> <span class="ss">sensorId</span><span class="p">:</span> <span class="mi">5578</span><span class="p">,</span> <span class="ss">type</span><span class="p">:</span> <span class="s2">&quot;temperature&quot;</span> <span class="p">},</span>
      <span class="ss">timestamp</span><span class="p">:</span> <span class="no">Time</span><span class="o">.</span><span class="n">utc</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
      <span class="ss">temp</span><span class="p">:</span> <span class="mi">13</span>
  <span class="p">},</span>
  <span class="p">{</span>
      <span class="ss">metadata</span><span class="p">:</span> <span class="p">{</span> <span class="ss">sensorId</span><span class="p">:</span> <span class="mi">5578</span><span class="p">,</span> <span class="ss">type</span><span class="p">:</span> <span class="s2">&quot;temperature&quot;</span> <span class="p">},</span>
      <span class="ss">timestamp</span><span class="p">:</span> <span class="no">Time</span><span class="o">.</span><span class="n">utc</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
      <span class="ss">temp</span><span class="p">:</span> <span class="mi">12</span>
  <span class="p">},</span>
  <span class="p">{</span>
      <span class="ss">metadata</span><span class="p">:</span> <span class="p">{</span> <span class="ss">sensorId</span><span class="p">:</span> <span class="mi">5578</span><span class="p">,</span> <span class="ss">type</span><span class="p">:</span> <span class="s2">&quot;temperature&quot;</span> <span class="p">},</span>
      <span class="ss">timestamp</span><span class="p">:</span> <span class="no">Time</span><span class="o">.</span><span class="n">utc</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
      <span class="ss">temp</span><span class="p">:</span> <span class="mi">11</span>
  <span class="p">},</span>
  <span class="p">{</span>
      <span class="ss">metadata</span><span class="p">:</span> <span class="p">{</span> <span class="ss">sensorId</span><span class="p">:</span> <span class="mi">5578</span><span class="p">,</span> <span class="ss">type</span><span class="p">:</span> <span class="s2">&quot;temperature&quot;</span> <span class="p">},</span>
      <span class="ss">timestamp</span><span class="p">:</span> <span class="no">Time</span><span class="o">.</span><span class="n">utc</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
      <span class="ss">temp</span><span class="p">:</span> <span class="mi">12</span>
  <span class="p">},</span>
  <span class="p">{</span>
      <span class="ss">metadata</span><span class="p">:</span> <span class="p">{</span> <span class="ss">sensorId</span><span class="p">:</span> <span class="mi">5578</span><span class="p">,</span> <span class="ss">type</span><span class="p">:</span> <span class="s2">&quot;temperature&quot;</span> <span class="p">},</span>
      <span class="ss">timestamp</span><span class="p">:</span> <span class="no">Time</span><span class="o">.</span><span class="n">utc</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
      <span class="ss">temp</span><span class="p">:</span> <span class="mi">17</span>
  <span class="p">},</span>
  <span class="p">{</span>
      <span class="ss">metadata</span><span class="p">:</span> <span class="p">{</span> <span class="ss">sensorId</span><span class="p">:</span> <span class="mi">5578</span><span class="p">,</span> <span class="ss">type</span><span class="p">:</span> <span class="s2">&quot;temperature&quot;</span> <span class="p">},</span>
      <span class="ss">timestamp</span><span class="p">:</span> <span class="no">Time</span><span class="o">.</span><span class="n">utc</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
      <span class="ss">temp</span><span class="p">:</span> <span class="mi">12</span>
  <span class="p">}</span>
<span class="o">]</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="querying-a-time-series-collection">
<h3>Querying a Time Series Collection<a class="headerlink" href="#querying-a-time-series-collection" title="Permalink to this headline">#</a></h3>
<p>Querying a time series collection is also very similar to a regular collection:</p>
<div class="highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">weather</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="ss">timestamp</span><span class="p">:</span> <span class="no">Time</span><span class="o">.</span><span class="n">utc</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span><span class="o">.</span><span class="n">first</span>
</pre></div>
</div>
<p>The result of this query:</p>
<div class="highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;timestamp&quot;</span> <span class="o">=&gt;</span> <span class="mi">2021</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">18</span> <span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span> <span class="no">UTC</span><span class="p">,</span>
  <span class="s2">&quot;metadata&quot;</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="s2">&quot;sensorId&quot;</span> <span class="o">=&gt;</span> <span class="mi">5578</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;temperature&quot;</span>
  <span class="p">},</span>
  <span class="s2">&quot;temp&quot;</span> <span class="o">=&gt;</span> <span class="mi">12</span><span class="p">,</span>
  <span class="s2">&quot;_id&quot;</span> <span class="o">=&gt;</span> <span class="no">BSON</span><span class="o">::</span><span class="no">ObjectId</span><span class="p">(</span><span class="s1">&#39;624dfb87d1327a60aeb048d2&#39;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="using-the-aggregation-pipeline-on-a-time-series-collection">
<h3>Using the Aggregation Pipeline on a Time Series Collection<a class="headerlink" href="#using-the-aggregation-pipeline-on-a-time-series-collection" title="Permalink to this headline">#</a></h3>
<p>The aggregation pipeline can also be used for additional query functionality:</p>
<div class="highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">weather</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="o">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;$project&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="ss">date</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;$dateToParts&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="ss">date</span><span class="p">:</span> <span class="s2">&quot;$timestamp&quot;</span> <span class="p">}</span>
      <span class="p">},</span>
      <span class="ss">temp</span><span class="p">:</span> <span class="mi">1</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="s2">&quot;$group&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="ss">_id</span><span class="p">:</span> <span class="p">{</span>
        <span class="ss">date</span><span class="p">:</span> <span class="p">{</span>
          <span class="ss">year</span><span class="p">:</span> <span class="s2">&quot;$date.year&quot;</span><span class="p">,</span>
          <span class="ss">month</span><span class="p">:</span> <span class="s2">&quot;$date.month&quot;</span><span class="p">,</span>
          <span class="ss">day</span><span class="p">:</span> <span class="s2">&quot;$date.day&quot;</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="ss">avgTmp</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;$avg&quot;</span><span class="p">:</span> <span class="s2">&quot;$temp&quot;</span> <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="o">]</span><span class="p">)</span><span class="o">.</span><span class="n">to_a</span>
</pre></div>
</div>
<p>The example aggregation pipeline groups all documents by the date of the
measurement and then returns the average of all temperature measurements
that day:</p>
<div class="highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="o">[</span><span class="p">{</span>
  <span class="s2">&quot;_id&quot;</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="s2">&quot;date&quot;</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="s2">&quot;year&quot;</span> <span class="o">=&gt;</span> <span class="mi">2021</span><span class="p">,</span>
      <span class="s2">&quot;month&quot;</span> <span class="o">=&gt;</span> <span class="mi">5</span><span class="p">,</span>
      <span class="s2">&quot;day&quot;</span> <span class="o">=&gt;</span> <span class="mi">18</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;avgTmp&quot;</span> <span class="o">=&gt;</span> <span class="mi">12</span><span class="o">.</span><span class="mi">833333333333334</span>
<span class="p">},</span>
<span class="p">{</span>
  <span class="s2">&quot;_id&quot;</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="s2">&quot;date&quot;</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="s2">&quot;year&quot;</span> <span class="o">=&gt;</span> <span class="mi">2021</span><span class="p">,</span>
      <span class="s2">&quot;month&quot;</span> <span class="o">=&gt;</span> <span class="mi">5</span><span class="p">,</span>
      <span class="s2">&quot;day&quot;</span> <span class="o">=&gt;</span> <span class="mi">19</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;avgTmp&quot;</span> <span class="o">=&gt;</span> <span class="mi">12</span><span class="o">.</span><span class="mi">833333333333334</span>
<span class="p">}</span><span class="o">]</span>
</pre></div>
</div>
<p>See the MongoDB documentation on <a class="reference external" href="https://www.mongodb.com/docs/manual/core/timeseries-collections/#time-series-collections">time series collections</a>
for more information.</p>
</section>
</section>
<section id="capped-collections">
<h2>Capped Collections<a class="headerlink" href="#capped-collections" title="Permalink to this headline">#</a></h2>
<p>Capped collections have maximum size or document counts that prevent
them from growing beyond maximum thresholds. All capped collections must
specify a maximum size and may also specify a maximum document count.
MongoDB removes older documents if a collection reaches the maximum size
limit before it reaches the maximum document count.</p>
<p>To create a <a href="#id2"><span class="problematic" id="id3">:manual:`capped collection&lt;/core/capped-collections/&gt;`</span></a>, use
the <code class="docutils literal notranslate"><span class="pre">capped:</span> <span class="pre">true</span></code> option along with a <code class="docutils literal notranslate"><span class="pre">size</span></code> in bytes.</p>
<div class="highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="o">=</span> <span class="no">Mongo</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="o">[</span> <span class="s1">&#39;127.0.0.1:27017&#39;</span> <span class="o">]</span><span class="p">,</span> <span class="ss">:database</span> <span class="o">=&gt;</span> <span class="s1">&#39;music&#39;</span><span class="p">)</span>
<span class="n">collection</span> <span class="o">=</span> <span class="n">client</span><span class="o">[</span><span class="ss">:artists</span><span class="p">,</span> <span class="ss">capped</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span> <span class="ss">size</span><span class="p">:</span> <span class="mi">10000</span><span class="o">]</span>
<span class="n">collection</span><span class="o">.</span><span class="n">create</span>
<span class="n">collection</span><span class="o">.</span><span class="n">capped?</span> <span class="c1"># =&gt; true</span>
</pre></div>
</div>
</section>
<section id="convert-an-existing-collection-to-capped">
<h2>Convert an Existing Collection to Capped<a class="headerlink" href="#convert-an-existing-collection-to-capped" title="Permalink to this headline">#</a></h2>
<p>To convert an existing collection from non-capped to capped, use
the <code class="docutils literal notranslate"><span class="pre">convertToCapped</span></code> command.</p>
<div class="highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="o">=</span> <span class="no">Mongo</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="o">[</span> <span class="s1">&#39;127.0.0.1:27017&#39;</span> <span class="o">]</span><span class="p">,</span> <span class="ss">:database</span> <span class="o">=&gt;</span> <span class="s1">&#39;music&#39;</span><span class="p">)</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">database</span>
<span class="n">db</span><span class="o">.</span><span class="n">command</span><span class="p">({</span> <span class="s1">&#39;convertToCapped&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;artists&#39;</span><span class="p">,</span> <span class="s1">&#39;size&#39;</span> <span class="o">=&gt;</span> <span class="mi">10000</span> <span class="p">})</span>
</pre></div>
</div>
</section>
<section id="document-validation">
<h2>Document Validation<a class="headerlink" href="#document-validation" title="Permalink to this headline">#</a></h2>
<p>If you’re using MongoDB version 3.2 or later, you can use
<a href="#id4"><span class="problematic" id="id5">:manual:`document validation&lt;/core/document-validation/&gt;`</span></a>.
Collections with validations compare each inserted or updated
document against the criteria specified in the validator option.
Depending on the <code class="docutils literal notranslate"><span class="pre">validationLevel</span></code> and <code class="docutils literal notranslate"><span class="pre">validationAction</span></code>, MongoDB
either returns a warning, or refuses to insert or update the document
if it fails to meet the specified criteria.</p>
<p>The following example creates a <code class="docutils literal notranslate"><span class="pre">contacts</span></code> collection with a validator
that specifies that inserted or updated documents should match at
least one of three following conditions:</p>
<ul class="simple">
<li><p>the <code class="docutils literal notranslate"><span class="pre">phone</span></code> field is a string</p></li>
<li><p>the <code class="docutils literal notranslate"><span class="pre">email</span></code> field matches the regular expression</p></li>
<li><p>the <code class="docutils literal notranslate"><span class="pre">status</span></code> field is either <code class="docutils literal notranslate"><span class="pre">Unknown</span></code> or <code class="docutils literal notranslate"><span class="pre">Incomplete</span></code>.</p></li>
</ul>
<div class="highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="o">=</span> <span class="no">Mongo</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="o">[</span> <span class="s1">&#39;127.0.0.1:27017&#39;</span> <span class="o">]</span><span class="p">,</span> <span class="ss">:database</span> <span class="o">=&gt;</span> <span class="s1">&#39;test&#39;</span><span class="p">)</span>
<span class="n">client</span><span class="o">[</span><span class="ss">:contacts</span><span class="p">,</span>

    <span class="p">{</span>
       <span class="s1">&#39;validator&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="s1">&#39;$or&#39;</span> <span class="o">=&gt;</span>
          <span class="o">[</span>
             <span class="p">{</span> <span class="s1">&#39;phone&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="s1">&#39;$type&#39;</span> <span class="o">=&gt;</span> <span class="s2">&quot;string&quot;</span> <span class="p">}</span> <span class="p">},</span>
             <span class="p">{</span> <span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="s1">&#39;$regex&#39;</span> <span class="o">=&gt;</span> <span class="sr">/@mongodb\.com$/</span> <span class="p">}</span> <span class="p">},</span>
             <span class="p">{</span> <span class="s1">&#39;status&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="s1">&#39;$in&#39;</span> <span class="o">=&gt;</span> <span class="o">[</span> <span class="s2">&quot;Unknown&quot;</span><span class="p">,</span> <span class="s2">&quot;Incomplete&quot;</span> <span class="o">]</span> <span class="p">}</span> <span class="p">}</span>
          <span class="o">]</span>
       <span class="p">}</span>
    <span class="p">}</span>

  <span class="o">].</span><span class="n">create</span>
</pre></div>
</div>
</section>
<section id="add-validation-to-an-existing-collection">
<h2>Add Validation to an Existing Collection<a class="headerlink" href="#add-validation-to-an-existing-collection" title="Permalink to this headline">#</a></h2>
<p>To add document validation criteria to an existing collection, use the
<code class="docutils literal notranslate"><span class="pre">collMod</span></code> command. The example below demonstrates how to add a
validation to the <code class="docutils literal notranslate"><span class="pre">contacts</span></code> collection, ensuring that all new
documents must contain an <code class="docutils literal notranslate"><span class="pre">age</span></code> field which is a number.</p>
<div class="highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="o">=</span> <span class="no">Mongo</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="o">[</span> <span class="s1">&#39;127.0.0.1:27017&#39;</span> <span class="o">]</span><span class="p">,</span> <span class="ss">:database</span> <span class="o">=&gt;</span> <span class="s1">&#39;test&#39;</span><span class="p">)</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">database</span>
<span class="n">db</span><span class="o">.</span><span class="n">command</span><span class="p">({</span> <span class="s1">&#39;collMod&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;contacts&#39;</span><span class="p">,</span>
             <span class="s1">&#39;validator&#39;</span> <span class="o">=&gt;</span>
               <span class="p">{</span> <span class="s1">&#39;age&#39;</span> <span class="o">=&gt;</span>
                 <span class="p">{</span> <span class="s1">&#39;$type&#39;</span> <span class="o">=&gt;</span> <span class="s2">&quot;number&quot;</span> <span class="p">}</span>
               <span class="p">}</span>
           <span class="p">})</span>
</pre></div>
</div>
</section>
<section id="listing-collections">
<h2>Listing Collections<a class="headerlink" href="#listing-collections" title="Permalink to this headline">#</a></h2>
<p>Use <code class="docutils literal notranslate"><span class="pre">collections</span></code> or <code class="docutils literal notranslate"><span class="pre">collection_names</span></code> methods on a database
objects to list collections:</p>
<div class="highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="o">=</span> <span class="no">Mongo</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="o">[</span> <span class="s1">&#39;127.0.0.1:27017&#39;</span> <span class="o">]</span><span class="p">,</span> <span class="ss">:database</span> <span class="o">=&gt;</span> <span class="s1">&#39;music&#39;</span><span class="p">)</span>
<span class="n">database</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">database</span>

<span class="n">database</span><span class="o">.</span><span class="n">collections</span>      <span class="c1"># Returns an array of Collection objects.</span>
<span class="n">database</span><span class="o">.</span><span class="n">collection_names</span> <span class="c1"># Returns an array of collection names as strings.</span>
</pre></div>
</div>
</section>
<section id="dropping-collections">
<h2>Dropping Collections<a class="headerlink" href="#dropping-collections" title="Permalink to this headline">#</a></h2>
<p>To drop a collection, call <code class="docutils literal notranslate"><span class="pre">drop</span></code> on the collection object.</p>
<div class="highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="o">=</span> <span class="no">Mongo</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="o">[</span> <span class="s1">&#39;127.0.0.1:27017&#39;</span> <span class="o">]</span><span class="p">,</span> <span class="ss">:database</span> <span class="o">=&gt;</span> <span class="s1">&#39;music&#39;</span><span class="p">)</span>
<span class="n">artists</span> <span class="o">=</span> <span class="n">client</span><span class="o">[</span><span class="ss">:artists</span><span class="o">]</span>
<span class="n">artists</span><span class="o">.</span><span class="n">drop</span>
</pre></div>
</div>
</section>
</section>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="database-tasks.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Databases</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="indexing.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Indexing</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
      &copy; Copyright 2021, MongoDB.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>