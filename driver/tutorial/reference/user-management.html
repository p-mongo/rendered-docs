<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="en">

<head>
  <link href='https://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css' /><title>User Management &mdash; Ruby Driver Manual upcoming</title><link rel="shortcut icon" href="https://media.mongodb.org/favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="robots" content="index" />

  <meta name="release" content="upcoming"/>
  <meta name="version" content="master"/>
  <meta name="DC.Source" content="https://github.com/mongodb/docs-ruby/blob/master/source/reference/user-management.txt"/>
  <meta property="og:image" content="http://s3.amazonaws.com/info-mongodb-com/_com_assets/cms/mongodb-for-giant-ideas-bbab5c3cf8.png">
  <meta property="og:image:secure_url" content="https://webassets.mongodb.com/_com_assets/cms/mongodb-for-giant-ideas-bbab5c3cf8.png">
    <link rel="canonical" href="https://docs.mongodb.com/docs-ruby/current/reference/user-management/" />
  
   <link rel="stylesheet" href="../_static/mongodb-docs.css" type="text/css" />
   <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
   <link rel="stylesheet" href="../_static/css/navbar.min.css?t=nocache" type="text/css" />
    
    <script type="text/javascript" src="../_static/lib/jquery.min.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/lib/bootstrap.js"></script>
    <script type="text/javascript" src="../_static/lib/jquery.cookie.js"></script>
    <script type="text/javascript" src="../_static/controller.js"></script>
      <link rel="search" type="application/opensearchdescription+xml" href="https://docs.mongodb.com/osd.xml" title="MongoDB Help"/>
<!-- <link rel="index" title="Index" href="../genindex.html" /> -->
<link rel="search" title="Search" href="../search.html" />
<link rel="top" title="Ruby Driver Manual" href="../index.html" />
<link rel="next" title="Collections" href="collection-tasks.html" />
<link rel="prev" title="Working With Data" href="working-with-data.html" /></head>
<body data-project="docs-ruby" data-project-title="Ruby Driver Manual" data-branch="master" data-enable-marian=1 data-eol="">
  <!-- Google Tag Manager -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-GDFN"
                    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <script>
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push(
  {'gtm.start':new Date().getTime(),event:'gtm.js'}
  );var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-GDFN');
  </script>
  <!-- End Google Tag Manager -->
   <script>
     window.googleSearchCx = "014132741538533607290:xl0kbqanc9y"
     window.googleSearchPlaceholder = "Search Ruby Driver"
     window.googleSearchResultsUrl = "http://docs.mongodb.com/ruby-driver/master/search/"
   </script><div class="content" >

   <div id="left-column">
         <aside id="sidebar" class="sidebar">
             
  <div class="sphinxsidebar" id="sphinxsidebar">
    <div id="sphinxsidebarwrapper" class="sphinxsidebarwrapper"><a href="javascript:void(0)" class="closeNav" id="closeNav">Close &times;</a>


<h3>
  <a href="../index.html">Ruby Driver Manual</a>
</h3>


    <div class="btn-group version-sidebar">
      
        <button type="button" class="version-button dropdown-toggle" data-toggle="dropdown">
          
          
          master (upcoming)<span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
          
            
            <li class="active">
            
              <a href="#" data-path="ruby-driver/current">
                
                master (upcoming)
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.14">
                
                Version 2.14 (current)
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.13">
                
                Version 2.13
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.12">
                
                Version 2.12
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.11">
                
                Version 2.11
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.10">
                
                Version 2.10
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.9">
                
                Version 2.9
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.8">
                
                Version 2.8
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.7">
                
                Version 2.7
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.6">
                
                Version 2.6
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.5">
                
                Version 2.5
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.4">
                
                Version 2.4
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.3">
                
                Version 2.3
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.2">
                
                Version 2.2
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.0">
                
                Version 2.0
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v1.x">
                
                1.x
              </a>
            </li>
          
        </ul>
      
    </div>


<ul class="current"><li class="toctree-l1"><a class="reference internal" href="../getting-started.html">Getting Started</a></li><li class="toctree-l1"><a class="reference internal" href="../tutorials.html">Tutorials</a><ul><li class="toctree-l2"><a class="reference internal" href="../tutorials/quick-start.html">Quick Start</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="create-client.html">Creating a Client</a></li><li class="toctree-l1"><a class="reference internal" href="authentication.html">Authentication</a></li><li class="toctree-l1"><a class="reference internal" href="working-with-data.html">Working With Data</a></li><li class="toctree-l1 current"><a class="reference internal current" href="">User Management</a></li><li class="toctree-l1"><a class="reference internal" href="collection-tasks.html">Collections</a></li><li class="toctree-l1"><a class="reference internal" href="sessions.html">Sessions</a></li><li class="toctree-l1"><a class="reference internal" href="transactions.html">Transactions</a></li><li class="toctree-l1"><a class="reference internal" href="change-streams.html">Change Streams</a></li><li class="toctree-l1"><a class="reference internal" href="database-tasks.html">Databases</a></li><li class="toctree-l1"><a class="reference internal" href="monitoring.html">Monitoring</a></li><li class="toctree-l1"><a class="reference internal" href="indexing.html">Indexing</a></li><li class="toctree-l1"><a class="reference internal" href="collations.html">Collations</a></li><li class="toctree-l1"><a class="reference internal" href="client-side-encryption.html">Client-Side Encryption</a></li><li class="toctree-l1"><a class="reference internal" href="../bson-tutorials.html">BSON</a><ul><li class="toctree-l2"><a class="reference internal" href="../tutorials/bson-v4.html">BSON 4.x Tutorial</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorials/bson-v3.html">BSON 3.x Tutorial</a></li></ul></li><li class="toctree-l1"><a class="reference external" href="https://docs.mongodb.com/ruby-driver/master/api/">API</a></li><li class="toctree-l1"><a class="reference internal" href="additional-resources.html">Additional Resources</a></li><li class="toctree-l1"><a class="reference internal" href="../contribute.html">Contribute to the Driver</a></li></ul>
    </div>
  </div>
           
         </aside>

   </div>

    <div id="main-column" class="main-column">

    <span id="showNav" class="showNav">Navigation</span>

      
      
        <div class="document">
            <div class="documentwrapper"><div class="bodywrapper">
              <div class="body" data-pagename="reference/user-management">

                
  <div class="bc">
    
      
    
    
  </div>
                
                  <div class="section" id="user-management">
<span id="id1"></span><h1>User Management<a class="headerlink" href="#user-management" title="Permalink to this headline">¶</a></h1>
<div class="contents singlecol local topic" id="on-this-page">
<p class="topic-title">On this page</p>
<ul class="simple">
<li><a class="reference internal" href="#users-and-databases" id="id2">Users and Databases</a></li>
<li><a class="reference internal" href="#creating-users" id="id3">Creating Users</a></li>
<li><a class="reference internal" href="#user-information" id="id4">User Information</a></li>
<li><a class="reference internal" href="#updating-users" id="id5">Updating Users</a></li>
<li><a class="reference internal" href="#removing-users" id="id6">Removing Users</a></li>
</ul>
</div>
<p>The Mongo Ruby Driver provides a set of methods for managing users in a
MongoDB deployment. All of these methods are defined on the
<code class="docutils literal notranslate"><span class="pre">Mongo::Auth::User::View</span></code> class, which defines the behavior for
performing user-related operations on a database. You can access a database’s
user view by calling the <code class="docutils literal notranslate"><span class="pre">users</span></code> method on the correpsonding
<code class="docutils literal notranslate"><span class="pre">Mongo::Database</span></code> object:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">client</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">users</span>
</pre></div>
</div>
</div>
<p>Note that this will open a view on the database to which the client is already
connected. To interact with the users defined on a different database, call
the client’s <code class="docutils literal notranslate"><span class="pre">use</span></code> method and pass in the name of the database with which
you want to connect:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">client</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="ss">:users</span><span class="p">)</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">users</span>
</pre></div>
</div>
</div>
<p>In this example, all operations would be performed on the <code class="docutils literal notranslate"><span class="pre">users</span></code> database.</p>
<p>For more information about users and user management, see MongoDB’s
<a class="reference external" href="https://docs.mongodb.com/manual/core/security-users">online documentation</a>.</p>
<div class="section" id="users-and-databases">
<h2>Users and Databases<a class="headerlink" href="#users-and-databases" title="Permalink to this headline">¶</a></h2>
<p>When a client connects to the server, MongoDB distinguishes the database
that the client will perform operations on from the <a class="reference external" href="auth-source">auth source</a>
which is the database storing the user that the client is authenticating as.</p>
<p>In many cases, the auth source is the same as the database. When they differ,
user management operations must be done on the auth source database. For
example, to create a user authenticating with X.509 certifcate, which must be
defined on the <code class="docutils literal notranslate"><span class="pre">$external</span></code> database:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">client</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;$external&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">users</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
  <span class="s1">&#39;C=US,ST=New York,L=New York City,O=MongoDB,OU=x509,CN=localhost&#39;</span><span class="p">,</span>
  <span class="ss">roles</span><span class="p">:</span> <span class="o">[</span><span class="p">{</span><span class="ss">role</span><span class="p">:</span> <span class="s1">&#39;read&#39;</span><span class="p">,</span> <span class="ss">db</span><span class="p">:</span> <span class="s1">&#39;admin&#39;</span><span class="p">}</span><span class="o">]</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p>Note that the auth source is not specified for creating the user - auth source
is only used during the authentication process. If <code class="docutils literal notranslate"><span class="pre">#create</span></code> is invoked with
a <code class="docutils literal notranslate"><span class="pre">User</span></code> object with <code class="docutils literal notranslate"><span class="pre">auth_source</span></code> set, the auth source is ignored for
the purposes of user management.</p>
</div>
<div class="section" id="creating-users">
<h2>Creating Users<a class="headerlink" href="#creating-users" title="Permalink to this headline">¶</a></h2>
<p>There are two ways to create a new database user with the Ruby Driver.</p>
<p>The simplest way to create a new user is to use the <code class="docutils literal notranslate"><span class="pre">create</span></code> method,
passing in a username, password, and roles:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">client</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">users</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
  <span class="s1">&#39;alanturing&#39;</span><span class="p">,</span>
  <span class="ss">password</span><span class="p">:</span> <span class="s1">&#39;enigma&#39;</span><span class="p">,</span>
  <span class="ss">roles</span><span class="p">:</span> <span class="o">[</span> <span class="no">Mongo</span><span class="o">::</span><span class="no">Auth</span><span class="o">::</span><span class="no">Roles</span><span class="o">::</span><span class="no">READWRITE</span> <span class="o">]</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p>Another way to create a user is to first create a <code class="docutils literal notranslate"><span class="pre">Mongo::Auth::User</span></code> object
with all the user information and then pass that object into the <code class="docutils literal notranslate"><span class="pre">create</span></code>
method instead.</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">user</span> <span class="o">=</span> <span class="no">Mongo</span><span class="o">::</span><span class="no">User</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
  <span class="ss">user</span><span class="p">:</span> <span class="s1">&#39;alanturing&#39;</span><span class="p">,</span>
  <span class="ss">password</span><span class="p">:</span> <span class="s1">&#39;enigma&#39;</span><span class="p">,</span>
  <span class="ss">roles</span><span class="p">:</span> <span class="o">[</span> <span class="no">Mongo</span><span class="o">::</span><span class="no">Auth</span><span class="o">::</span><span class="no">Roles</span><span class="o">::</span><span class="no">READWRITE</span> <span class="o">]</span>
<span class="p">)</span>

<span class="n">client</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">users</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Note that your new user’s credentials will be stored in whatever database your
<code class="docutils literal notranslate"><span class="pre">client</span></code> object is currently connected to. This will be your user’s
<code class="docutils literal notranslate"><span class="pre">auth_source</span></code>, and you must be connected to that same database in order to
update, remove, or get information about the user you just created in the future.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">create</span></code> method takes a <code class="docutils literal notranslate"><span class="pre">Hash</span></code> of options as an optional second argument.
The <code class="docutils literal notranslate"><span class="pre">:roles</span></code> option allows you to grant permissions to the new user.
For example, the <code class="docutils literal notranslate"><span class="pre">Mongo::Auth::Roles::READ_WRITE</span></code> role grants the user the
ability to both read from and write to the database in which they were created.
Each role can be specified as a <code class="docutils literal notranslate"><span class="pre">String</span></code> or as a <code class="docutils literal notranslate"><span class="pre">Hash</span></code>. If you would like
to grant permissions to a user on a database other than the one on which they
were created, you can pass that database name in the role <code class="docutils literal notranslate"><span class="pre">Hash</span></code>. To create
a user <code class="docutils literal notranslate"><span class="pre">alanturing</span></code> with permission to read and write on the <code class="docutils literal notranslate"><span class="pre">machines</span></code>
database, you could execute the following code:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">client</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">users</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
  <span class="s1">&#39;alanturing&#39;</span><span class="p">,</span>
  <span class="ss">password</span><span class="p">:</span> <span class="s1">&#39;enigma&#39;</span><span class="p">,</span>
  <span class="ss">roles</span><span class="p">:</span> <span class="o">[</span><span class="p">{</span> <span class="ss">role</span><span class="p">:</span> <span class="no">Mongo</span><span class="o">::</span><span class="no">Auth</span><span class="o">::</span><span class="no">Roles</span><span class="o">::</span><span class="no">READWRITE</span><span class="p">,</span> <span class="ss">db</span><span class="p">:</span> <span class="s1">&#39;machines&#39;</span> <span class="p">}</span><span class="o">]</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p>For more information about roles in MongoDB, see the
<a class="reference external" href="https://docs.mongodb.com/manual/reference/built-in-roles/">Built-in roles</a> documentation.</p>
<p>In addition to the <code class="docutils literal notranslate"><span class="pre">:roles</span></code> option, the <code class="docutils literal notranslate"><span class="pre">create</span></code> method supports a
<code class="docutils literal notranslate"><span class="pre">:session</span></code> option, which allows you to specify a <code class="docutils literal notranslate"><span class="pre">Mongo::Session</span></code> object
to use for this operation, as well as a <code class="docutils literal notranslate"><span class="pre">:write_concern</span></code> option,
which specifies the write concern of this operation when performed on a
replica set.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference external" href="https://docs.mongodb.com/manual/reference/built-in-roles/">Built-in roles</a>
<a class="reference external" href="https://docs.mongodb.com/manual/core/replica-set-write-concern/">Write Concerns</a>,
<a class="reference internal" href="sessions.html#sessions"><span class="std std-ref">Sessions</span></a>,</p>
</div>
</div>
<div class="section" id="user-information">
<h2>User Information<a class="headerlink" href="#user-information" title="Permalink to this headline">¶</a></h2>
<p>To view information about a user that already exists in the database, use the
<code class="docutils literal notranslate"><span class="pre">info</span></code> method:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">client</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">users</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;alanturing&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>If the user exists, this method will return an <code class="docutils literal notranslate"><span class="pre">Array</span></code> object containing a
<code class="docutils literal notranslate"><span class="pre">Hash</span></code> with information about the user, such as their id, username, the
database they were created on, and their roles. If the user doesn’t exist,
this method will return an empty Array.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">info</span></code> method also takes an optional <code class="docutils literal notranslate"><span class="pre">Hash</span></code> of options as a second
argument. Currently, the only supported option is <code class="docutils literal notranslate"><span class="pre">:session</span></code>, which allows
you to specify a <code class="docutils literal notranslate"><span class="pre">Mongo::Session</span></code> object to use for this operation.</p>
<p>The Ruby Driver does not have a method that lists all of the users that
currently exist in a database.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="sessions.html#sessions"><span class="std std-ref">Sessions</span></a></p>
</div>
</div>
<div class="section" id="updating-users">
<h2>Updating Users<a class="headerlink" href="#updating-users" title="Permalink to this headline">¶</a></h2>
<p>To update a user that already exists in the database, you can use the
<code class="docutils literal notranslate"><span class="pre">update</span></code> method in one of two ways. The first way is to specify the name of
the user you wish to update, along with a new set of options.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">You must include all user options in the options <code class="docutils literal notranslate"><span class="pre">Hash</span></code>, even those options
whose values will remain the same. Omitting an option is the same as setting
it to an empty value.</p>
</div>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">client</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">users</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
  <span class="s1">&#39;alanturing&#39;</span><span class="p">,</span>
  <span class="ss">roles</span><span class="p">:</span> <span class="o">[</span> <span class="no">Mongo</span><span class="o">::</span><span class="no">Auth</span><span class="o">::</span><span class="no">Roles</span><span class="o">::</span><span class="no">READ_WRITE</span> <span class="o">]</span>
  <span class="ss">password</span><span class="p">:</span> <span class="s1">&#39;turing-test&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p>The second way to update a user is to pass an updated <code class="docutils literal notranslate"><span class="pre">Mongo::Auth::User</span></code>
object to the <code class="docutils literal notranslate"><span class="pre">update</span></code> method in lieu of a username.</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">user</span> <span class="o">=</span> <span class="no">Mongo</span><span class="o">::</span><span class="no">Auth</span><span class="o">::</span><span class="no">User</span><span class="o">.</span><span class="n">new</span><span class="p">({</span>
  <span class="ss">user</span><span class="p">:</span> <span class="s1">&#39;alanturing&#39;</span><span class="p">,</span>
  <span class="ss">roles</span><span class="p">:</span> <span class="o">[</span> <span class="no">Mongo</span><span class="o">::</span><span class="no">Auth</span><span class="o">::</span><span class="no">Roles</span><span class="o">::</span><span class="no">READ_WRITE</span> <span class="o">]</span><span class="p">,</span>
  <span class="ss">password</span><span class="p">:</span> <span class="s1">&#39;turing-test&#39;</span>
<span class="p">})</span>

<span class="n">client</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">users</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Optionally, the <code class="docutils literal notranslate"><span class="pre">update</span></code> method takes a <code class="docutils literal notranslate"><span class="pre">Hash</span></code> of options as a second
argument. The two possible options for this method are <code class="docutils literal notranslate"><span class="pre">:session</span></code>, which
allows you to specify a <code class="docutils literal notranslate"><span class="pre">Mongo::Session</span></code> object on which to perform this
operation, and <code class="docutils literal notranslate"><span class="pre">:write_concern</span></code>, which sets a write concern if this operation
is performed on a replica set.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="sessions.html#sessions"><span class="std std-ref">Sessions</span></a>
<a class="reference external" href="https://docs.mongodb.com/manual/core/replica-set-write-concern/">Write Concerns</a>,</p>
</div>
</div>
<div class="section" id="removing-users">
<h2>Removing Users<a class="headerlink" href="#removing-users" title="Permalink to this headline">¶</a></h2>
<p>To remove a user from the database, use the <code class="docutils literal notranslate"><span class="pre">remove</span></code> method:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">client</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">users</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;alanturing&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>You may pass a <code class="docutils literal notranslate"><span class="pre">Hash</span></code> of options as a second argument. The two supported
options for the <code class="docutils literal notranslate"><span class="pre">remove</span></code> method are <code class="docutils literal notranslate"><span class="pre">:session</span></code> and <code class="docutils literal notranslate"><span class="pre">:write_concern</span></code>.
<code class="docutils literal notranslate"><span class="pre">:session</span></code> allows you to specify a <code class="docutils literal notranslate"><span class="pre">Mongo::Session</span></code> object to use for
this operation. <code class="docutils literal notranslate"><span class="pre">:write_concern</span></code> specifies the write concern
of the operation if you are running this command against a replica set.</p>
<p>The Ruby Driver does not provide a method for removing all users
from a database.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="sessions.html#sessions"><span class="std std-ref">Sessions</span></a>
<a class="reference external" href="https://docs.mongodb.com/manual/core/replica-set-write-concern/">Write Concerns</a>,</p>
</div>
</div>
</div>

                
    <div id="btnv">
      <span class="btn-arrow-left">&larr; &nbsp;</span>
      <a class="btn-prev-text" href="working-with-data.html" title="Previous Section: Working With Data"><span>Working With Data</span></a>
      <a class="btn-next-text" href="collection-tasks.html" title="Next Section: Collections"><span>Collections</span></a>
      <span class="btn-arrow-right">&nbsp;&rarr;</span>
    </div>
                  <div class="footer">
                    <div class="copyright">
                      <p>&copy; MongoDB, Inc 2008-present. MongoDB, Mongo, and the leaf logo are registered trademarks of MongoDB, Inc.</p>
                    </div>
                  </div>
              </div></div>
            </div>
        </div>
    </div>
    <div class="right-column">
      <div class="wrapper"> 
            <div class="social">
               <a class="slack-icon" href="https://slackpass.io/mongo-db?jmp=docs" title="https://slackpass.io/mongo-db?jmp=docs"><i class="fab fa-slack" aria-hidden="true"></i></a>
               <a class="twitter-icon" href="https://twitter.com/MongoDB" title="https://twitter.com/MongoDB"><i class="fab fa-twitter-square"></i></a>
               <a class="youtube-icon" href="https://www.youtube.com/user/MongoDB" title="https://www.youtube.com/user/MongoDB"><i class="fab fa-youtube-square"></i></a>
               <a class="facebook-icon" href="https://www.facebook.com/mongodb" title="https://www.facebook.com/mongodb"><i class="fab fa-facebook-square"></i></a>
               <a class="stack-overflow-icon" href="https://stackoverflow.com/tags/mongodb/info" title="https://stackoverflow.com/tags/mongodb/info"><i class="fab fa-stack-overflow" aria-hidden="true"></i></a>
            </div>
        

      </div>
    </div>
    
    <div class="clearfix"></div>
  </div>
<div id="navbar" data-navprops='{"links": [{"url": "https://docs.mongodb.com/manual/","text": "Server"},{"url": "https://docs.mongodb.com/ecosystem/drivers/","text": "Drivers","active": true},{"url": "https://docs.mongodb.com/cloud/","text": "Cloud"},{"url": "https://docs.mongodb.com/tools/","text": "Tools"},{"url": "https://docs.mongodb.com/guides/","text": "Guides"}]}'></div>

  <script src="../_static/navbar.min.js"></script>

  

  <script type="text/javascript">
  // Bootstrap array of links that should trigger a full page reload
  window.docsExcludedNav = ['/bson-tutorials', '/mongoid-tutorials'];
  </script></body>
</html>