<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="en">

<head>
  <link href='https://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css' /><title>Indexing &mdash; Ruby Driver Manual upcoming</title><link rel="shortcut icon" href="https://media.mongodb.org/favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="robots" content="index" />

  <meta name="release" content="upcoming"/>
  <meta name="version" content="master"/>
  <meta name="DC.Source" content="https://github.com/mongodb/docs-ruby/blob/master/source/reference/indexing.txt"/>
  <meta property="og:image" content="http://s3.amazonaws.com/info-mongodb-com/_com_assets/cms/mongodb-for-giant-ideas-bbab5c3cf8.png">
  <meta property="og:image:secure_url" content="https://webassets.mongodb.com/_com_assets/cms/mongodb-for-giant-ideas-bbab5c3cf8.png">
    <link rel="canonical" href="https://docs.mongodb.com/docs-ruby/current/reference/indexing/" />
  
   <link rel="stylesheet" href="../_static/mongodb-docs.css" type="text/css" />
   <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
   <link rel="stylesheet" href="../_static/css/navbar.min.css?t=nocache" type="text/css" />
    
    <script type="text/javascript" src="../_static/lib/jquery.min.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/lib/bootstrap.js"></script>
    <script type="text/javascript" src="../_static/lib/jquery.cookie.js"></script>
    <script type="text/javascript" src="../_static/controller.js"></script>
      <link rel="search" type="application/opensearchdescription+xml" href="https://docs.mongodb.com/osd.xml" title="MongoDB Help"/>
<!-- <link rel="index" title="Index" href="../genindex.html" /> -->
<link rel="search" title="Search" href="../search.html" />
<link rel="top" title="Ruby Driver Manual" href="../index.html" /></head>
<body data-project="docs-ruby" data-project-title="Ruby Driver Manual" data-branch="master" data-enable-marian=1 data-eol="">
  <!-- Google Tag Manager -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-GDFN"
                    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <script>
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push(
  {'gtm.start':new Date().getTime(),event:'gtm.js'}
  );var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-GDFN');
  </script>
  <!-- End Google Tag Manager -->
   <script>
     window.googleSearchCx = "014132741538533607290:xl0kbqanc9y"
     window.googleSearchPlaceholder = "Search Ruby Driver"
     window.googleSearchResultsUrl = "http://docs.mongodb.com/ruby-driver/master/search/"
   </script><div class="content" >

   <div id="left-column">
         <aside id="sidebar" class="sidebar">
             
  <div class="sphinxsidebar" id="sphinxsidebar">
    <div id="sphinxsidebarwrapper" class="sphinxsidebarwrapper"><a href="javascript:void(0)" class="closeNav" id="closeNav">Close &times;</a>


<h3>
  <a href="../index.html">Ruby Driver Manual</a>
</h3>


    <div class="btn-group version-sidebar">
      
        <button type="button" class="version-button dropdown-toggle" data-toggle="dropdown">
          
          
          master (upcoming)<span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
          
            
            <li class="active">
            
              <a href="#" data-path="ruby-driver/current">
                
                master (upcoming)
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.14">
                
                Version 2.14 (current)
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.13">
                
                Version 2.13
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.12">
                
                Version 2.12
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.11">
                
                Version 2.11
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.10">
                
                Version 2.10
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.9">
                
                Version 2.9
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.8">
                
                Version 2.8
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.7">
                
                Version 2.7
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.6">
                
                Version 2.6
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.5">
                
                Version 2.5
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.4">
                
                Version 2.4
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.3">
                
                Version 2.3
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.2">
                
                Version 2.2
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v2.0">
                
                Version 2.0
              </a>
            </li>
          
            
            <li>
            
              <a class="version-selector" href="#" data-path="ruby-driver/v1.x">
                
                1.x
              </a>
            </li>
          
        </ul>
      
    </div>


<ul><li class="toctree-l1"><a class="reference internal" href="../getting-started.html">Getting Started</a><ul><li class="toctree-l2"><a class="reference internal" href="../installation.html">Installation</a></li><li class="toctree-l2"><a class="reference internal" href="driver-compatibility.html">Driver Compatibility</a></li><li class="toctree-l2"><a class="reference internal" href="../support.html">Support</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="../tutorials.html">Tutorials</a><ul><li class="toctree-l2"><a class="reference internal" href="../tutorials/quick-start.html">Quick Start</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="connection-and-configuration.html">Connection &amp; Configuration</a><ul><li class="toctree-l2"><a class="reference internal" href="create-client.html">Creating a Client</a></li><li class="toctree-l2"><a class="reference internal" href="authentication.html">Authentication</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="working-with-data.html">Working With Data</a><ul><li class="toctree-l2"><a class="reference internal" href="crud-operations.html">CRUD Operations</a></li><li class="toctree-l2"><a class="reference internal" href="bulk-operations.html">Bulk Writes</a></li><li class="toctree-l2"><a class="reference internal" href="projections.html">Projections</a></li><li class="toctree-l2"><a class="reference internal" href="aggregation.html">Aggregation</a></li><li class="toctree-l2"><a class="reference internal" href="text-search.html">Text Search</a></li><li class="toctree-l2"><a class="reference internal" href="geospatial-search.html">Geospatial Search</a></li><li class="toctree-l2"><a class="reference internal" href="gridfs.html">GridFS</a></li><li class="toctree-l2"><a class="reference internal" href="query-cache.html">Query Cache</a></li></ul></li><li class="toctree-l1"><a class="reference internal" href="user-management.html">User Management</a></li><li class="toctree-l1"><a class="reference internal" href="sessions.html">Sessions</a></li><li class="toctree-l1"><a class="reference internal" href="transactions.html">Transactions</a></li><li class="toctree-l1"><a class="reference internal" href="change-streams.html">Change Streams</a></li><li class="toctree-l1"><a class="reference internal" href="monitoring.html">Monitoring</a></li><li class="toctree-l1"><a class="reference internal" href="client-side-encryption.html">Client-Side Encryption</a></li><li class="toctree-l1"><a class="reference internal" href="../bson-tutorials.html">BSON</a><ul><li class="toctree-l2"><a class="reference internal" href="../tutorials/bson-v4.html">BSON 4.x Tutorial</a></li><li class="toctree-l2"><a class="reference internal" href="../tutorials/bson-v3.html">BSON 3.x Tutorial</a></li></ul></li><li class="toctree-l1"><a class="reference external" href="https://docs.mongodb.com/ruby-driver/master/api/">API</a></li><li class="toctree-l1"><a class="reference internal" href="additional-resources.html">Additional Resources</a></li><li class="toctree-l1"><a class="reference internal" href="../contribute.html">Contribute to the Driver</a></li></ul>
    </div>
  </div>
           
         </aside>

   </div>

    <div id="main-column" class="main-column">

    <span id="showNav" class="showNav">Navigation</span>

      
      
        <div class="document">
            <div class="documentwrapper"><div class="bodywrapper">
              <div class="body" data-pagename="reference/indexing">

                
  <div class="bc">
    
      
    
    
  </div>
                
                  <div class="section" id="indexing">
<h1>Indexing<a class="headerlink" href="#indexing" title="Permalink to this headline">¶</a></h1>
<div class="contents singlecol local topic" id="on-this-page">
<p class="topic-title">On this page</p>
<ul class="simple">
<li><a class="reference internal" href="#creating-indexes" id="id1">Creating Indexes</a></li>
<li><a class="reference internal" href="#dropping-indexes" id="id2">Dropping Indexes</a></li>
<li><a class="reference internal" href="#listing-indexes" id="id3">Listing Indexes</a></li>
</ul>
</div>
<p>The driver provides the ability to create, drop and view
<a class="reference external" href="https://docs.mongodb.com/manual/indexes/">indexes</a> on a collection through the <code class="docutils literal notranslate"><span class="pre">indexes</span></code> attribute:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="o">=</span> <span class="no">Mongo</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="o">[</span> <span class="s1">&#39;127.0.0.1:27017&#39;</span> <span class="o">]</span><span class="p">,</span> <span class="ss">database</span><span class="p">:</span> <span class="s1">&#39;music&#39;</span><span class="p">)</span>
<span class="n">client</span><span class="o">[</span><span class="ss">:bands</span><span class="o">].</span><span class="n">indexes</span>
<span class="c1"># =&gt; #&lt;Mongo::Index::View:0x000055e2822b9318 @collection=#&lt;Mongo::Collection:0x660 namespace=music.bands&gt;, @batch_size=nil, @options={}&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="creating-indexes">
<h2>Creating Indexes<a class="headerlink" href="#creating-indexes" title="Permalink to this headline">¶</a></h2>
<p>Indexes can be created one at a time, or several can be created in a single
operation. When creating multiple indexes on MongoDB 3.0 and later, the indexes
are created in parallel; on earlier versions they are created sequentially.</p>
<p>To create a single index, use <code class="docutils literal notranslate"><span class="pre">indexes#create_one</span></code>, passing the key
specification as the first argument and options as the second argument:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">client</span><span class="o">[</span><span class="ss">:bands</span><span class="o">].</span><span class="n">indexes</span><span class="o">.</span><span class="n">create_one</span><span class="p">(</span><span class="ss">genre</span><span class="p">:</span> <span class="mi">1</span><span class="p">)</span>

<span class="n">client</span><span class="o">[</span><span class="ss">:bands</span><span class="o">].</span><span class="n">indexes</span><span class="o">.</span><span class="n">create_one</span><span class="p">(</span>
  <span class="p">{</span> <span class="nb">name</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span>
  <span class="ss">unique</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span> <span class="ss">expire_after</span><span class="p">:</span> <span class="mi">120</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p>To create multiple indexes, use <code class="docutils literal notranslate"><span class="pre">indexes#create_many</span></code> which accepts an array
of index specifications. Unlike <code class="docutils literal notranslate"><span class="pre">create_one</span></code>, each index specification
is a hash with the <code class="docutils literal notranslate"><span class="pre">key</span></code> key mapped to the key specification and the
options being specified on the top level.</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">client</span><span class="o">[</span><span class="ss">:bands</span><span class="o">].</span><span class="n">indexes</span><span class="o">.</span><span class="n">create_many</span><span class="p">(</span><span class="o">[</span>
  <span class="p">{</span> <span class="ss">key</span><span class="p">:</span> <span class="p">{</span> <span class="ss">genre</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}</span> <span class="p">},</span>
  <span class="p">{</span> <span class="ss">key</span><span class="p">:</span> <span class="p">{</span> <span class="nb">name</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="ss">unique</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span> <span class="ss">expire_after</span><span class="p">:</span> <span class="mi">120</span> <span class="p">},</span>
<span class="o">]</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p id="index-options">The following is a full list of the available options that can be added
when creating indexes. These options mirror the options supported by the
<a class="reference external" href="https://docs.mongodb.com/manual/reference/method/db.collection.createIndex/">createIndex command</a>.</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="33%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">:background</span></code></td>
<td>Either <code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code>. Tells the index to be created in the background.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">:expire_after</span></code></td>
<td>Number of seconds to expire documents in the collection after.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">:name</span></code></td>
<td>The name of the index.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">:sparse</span></code></td>
<td>Whether the index should be sparse or not, either <code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code>.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">:storage_engine</span></code></td>
<td>The name of the storage engine for this particular index.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">:version</span></code></td>
<td>The index format version to use.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">:default_language</span></code></td>
<td>The default language of text indexes.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">:language_override</span></code></td>
<td>The field name to use when overriding the default language.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">:text_version</span></code></td>
<td>The version format for text index storage.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">:weights</span></code></td>
<td>A document specifying fields and weights in text search.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">:sphere_version</span></code></td>
<td>The 2d sphere index version.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">:bits</span></code></td>
<td>Sets the maximum boundary for latitude and longitude in the 2d index.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">:max</span></code></td>
<td>Maximum boundary for latitude and longitude in the 2d index.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">:min</span></code></td>
<td>Minimum boundary for latitude and longitude in the 2d index.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">:bucket_size</span></code></td>
<td>The number of units within which to group the location values in a geo haystack index.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">:partial_filter_expression</span></code></td>
<td>A filter for a partial index.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">:hidden</span></code></td>
<td>A Boolean specifying whether the index should be hidden; a hidden index
is one that exists on the collection but will not be used by the query planner.</td>
</tr>
</tbody>
</table>
<div class="section" id="the-commit-quorum-option">
<h3>The :commit_quorum option<a class="headerlink" href="#the-commit-quorum-option" title="Permalink to this headline">¶</a></h3>
<p>On MongoDB server versions 4.4 and newer, the <code class="docutils literal notranslate"><span class="pre">:commit_quorum</span></code> option may be
specified on index creation. This option differs from other index options in that
it determines server behavior during index creation, rather than determining
the behavior of an individual index.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">:commit_quorum</span></code> option specifies how many voting, data-bearing members
of a replica set must complete the index build before the index is ready.
Possible values are integers (0 to the number of voting, data-bearing members
of the replica set), “majority”, or “votingMembers”.</p>
<p>To specify <code class="docutils literal notranslate"><span class="pre">:commit_quorum</span></code> when creating one index, add another option
to the second argument of the <code class="docutils literal notranslate"><span class="pre">indexes#create_one</span></code> method:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">client</span><span class="o">[</span><span class="ss">:bands</span><span class="o">].</span><span class="n">indexes</span><span class="o">.</span><span class="n">create_one</span><span class="p">(</span>
  <span class="p">{</span> <span class="nb">name</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span>
  <span class="ss">unique</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span> <span class="ss">expire_after</span><span class="p">:</span> <span class="mi">120</span><span class="p">,</span> <span class="ss">commit_quorum</span><span class="p">:</span> <span class="s1">&#39;majority&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p>To specify create options when creating multiple indexes, add a Hash specifying
<code class="docutils literal notranslate"><span class="pre">:commit_quorum</span></code> as a final element to the Array of indexes passed to
<code class="docutils literal notranslate"><span class="pre">indexes#create_many</span></code>. Note that this Hash MUST be the final element in the
Array.</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">client</span><span class="o">[</span><span class="ss">:bands</span><span class="o">].</span><span class="n">indexes</span><span class="o">.</span><span class="n">create_many</span><span class="p">(</span><span class="o">[</span>
  <span class="p">{</span> <span class="ss">key</span><span class="p">:</span> <span class="p">{</span> <span class="ss">genre</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}</span> <span class="p">},</span>
  <span class="p">{</span> <span class="ss">key</span><span class="p">:</span> <span class="p">{</span> <span class="nb">name</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="ss">unique</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span> <span class="ss">expire_after</span><span class="p">:</span> <span class="mi">120</span> <span class="p">},</span>
  <span class="p">{</span> <span class="ss">commit_quorum</span><span class="p">:</span> <span class="s1">&#39;majority&#39;</span> <span class="p">},</span>
<span class="o">]</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="dropping-indexes">
<h2>Dropping Indexes<a class="headerlink" href="#dropping-indexes" title="Permalink to this headline">¶</a></h2>
<p>To drop an index, call <code class="docutils literal notranslate"><span class="pre">indexes#drop_one</span></code> or <code class="docutils literal notranslate"><span class="pre">indexes#drop_all</span></code>.</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="c1"># Drops the name_1 index.</span>
<span class="n">client</span><span class="o">[</span><span class="ss">:bands</span><span class="o">].</span><span class="n">indexes</span><span class="o">.</span><span class="n">drop_one</span><span class="p">(</span> <span class="s1">&#39;name_1&#39;</span> <span class="p">)</span>

<span class="c1"># Drops all indexes in the collection.</span>
<span class="n">client</span><span class="o">[</span><span class="ss">:bands</span><span class="o">].</span><span class="n">indexes</span><span class="o">.</span><span class="n">drop_all</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="listing-indexes">
<h2>Listing Indexes<a class="headerlink" href="#listing-indexes" title="Permalink to this headline">¶</a></h2>
<p>To list the indexes, iterate the <code class="docutils literal notranslate"><span class="pre">indexes</span></code> object:</p>
<div class="button-code-block">
<div class="button-row">
<a class="code-button--copy code-button" role="button">
copy</a>
</div>
<div class="copyable-code-block highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">client</span><span class="o">[</span><span class="ss">:bands</span><span class="o">].</span><span class="n">indexes</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">index_spec</span><span class="o">|</span>
  <span class="nb">p</span> <span class="n">index_spec</span>
  <span class="c1"># {&quot;v&quot;=&gt;2, &quot;key&quot;=&gt;{&quot;_id&quot;=&gt;1}, &quot;name&quot;=&gt;&quot;_id_&quot;}</span>
  <span class="c1"># {&quot;v&quot;=&gt;2, &quot;key&quot;=&gt;{&quot;genre&quot;=&gt;1}, &quot;name&quot;=&gt;&quot;genre_1&quot;}</span>
  <span class="c1"># {&quot;v&quot;=&gt;2, &quot;unique&quot;=&gt;true, &quot;key&quot;=&gt;{&quot;name&quot;=&gt;1}, &quot;name&quot;=&gt;&quot;name_1&quot;,</span>
  <span class="c1">#  &quot;expireAfterSeconds&quot;=&gt;120}</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
<p>Each iteration returns an index specification as returned by the
<a class="reference external" href="https://docs.mongodb.com/manual/reference/command/listIndexes/">listIndexes</a> command.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The shape and contents of the index specifications returned by this method
may change from one version of MongoDB to another.</p>
</div>
</div>
</div>

                
    <div id="btnv">
    </div>
                  <div class="footer">
                    <div class="copyright">
                      <p>&copy; MongoDB, Inc 2008-present. MongoDB, Mongo, and the leaf logo are registered trademarks of MongoDB, Inc.</p>
                    </div>
                  </div>
              </div></div>
            </div>
        </div>
    </div>
    <div class="right-column">
      <div class="wrapper"> 
            <div class="social">
               <a class="slack-icon" href="https://slackpass.io/mongo-db?jmp=docs" title="https://slackpass.io/mongo-db?jmp=docs"><i class="fab fa-slack" aria-hidden="true"></i></a>
               <a class="twitter-icon" href="https://twitter.com/MongoDB" title="https://twitter.com/MongoDB"><i class="fab fa-twitter-square"></i></a>
               <a class="youtube-icon" href="https://www.youtube.com/user/MongoDB" title="https://www.youtube.com/user/MongoDB"><i class="fab fa-youtube-square"></i></a>
               <a class="facebook-icon" href="https://www.facebook.com/mongodb" title="https://www.facebook.com/mongodb"><i class="fab fa-facebook-square"></i></a>
               <a class="stack-overflow-icon" href="https://stackoverflow.com/tags/mongodb/info" title="https://stackoverflow.com/tags/mongodb/info"><i class="fab fa-stack-overflow" aria-hidden="true"></i></a>
            </div>
        

      </div>
    </div>
    
    <div class="clearfix"></div>
  </div>
<div id="navbar" data-navprops='{"links": [{"url": "https://docs.mongodb.com/manual/","text": "Server"},{"url": "https://docs.mongodb.com/ecosystem/drivers/","text": "Drivers","active": true},{"url": "https://docs.mongodb.com/cloud/","text": "Cloud"},{"url": "https://docs.mongodb.com/tools/","text": "Tools"},{"url": "https://docs.mongodb.com/guides/","text": "Guides"}]}'></div>

  <script src="../_static/navbar.min.js"></script>

  

  <script type="text/javascript">
  // Bootstrap array of links that should trigger a full page reload
  window.docsExcludedNav = ['/bson-tutorials', '/mongoid-tutorials'];
  </script></body>
</html>