
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Bulk Writes &#8212; Ruby MongoDB Driver  documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=62ba249389abaaa9ffc34bf36a076bdc1d65ee18" type="text/css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=f31d14ad54b65d19161ba51d4ffff3a77ae00456"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Projection" href="projection.html" />
    <link rel="prev" title="CRUD Operations" href="crud-operations.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Ruby MongoDB Driver  documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../getting-started.html">
   Getting Started
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../installation.html">
     Installation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="driver-compatibility.html">
     Driver Compatibility
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../support.html">
     Support
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../tutorials.html">
   Tutorials
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../tutorials/quick-start.html">
     Quick Start
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../tutorials/common-errors.html">
     Common Errors
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="connection-and-configuration.html">
   Connection &amp; Configuration
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="create-client.html">
     Creating a Client
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="authentication.html">
     Authentication
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="monitoring.html">
     Monitoring
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="user-management.html">
     User Management
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="working-with-data.html">
   Working With Data
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="crud-operations.html">
     CRUD Operations
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Bulk Writes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="projection.html">
     Projection
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="aggregation.html">
     Aggregation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="map-reduce.html">
     Map-Reduce
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="text-search.html">
     Text Search
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="geospatial-search.html">
     Geospatial Search
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="query-cache.html">
     Query Cache
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="gridfs.html">
     GridFS
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="change-streams.html">
     Change Streams
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="sessions.html">
     Sessions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="transactions.html">
     Transactions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="client-side-encryption.html">
     Client-Side Encryption
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="schema-operations.html">
   Schema Operations
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="database-tasks.html">
     Databases
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="collection-tasks.html">
     Collections
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="indexing.html">
     Indexing
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="collations.html">
     Collations
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://mongodb.com/docs/ruby-driver/master/api/">
   API
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../release-notes.html">
   Release Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="additional-resources.html">
   Additional Resources
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../contribute.html">
   Contribute to the Driver
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/reference/bulk-operations.txt"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.txt</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#insert-one">
   insert_one
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#update-one">
   update_one
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#update-many">
   update_many
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#replace-one">
   replace_one
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#delete-one">
   delete_one
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#delete-many">
   delete_many
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#bulk-write-splitting">
   Bulk Write Splitting
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Bulk Writes</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#insert-one">
   insert_one
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#update-one">
   update_one
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#update-many">
   update_many
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#replace-one">
   replace_one
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#delete-one">
   delete_one
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#delete-many">
   delete_many
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#bulk-write-splitting">
   Bulk Write Splitting
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="bulk-writes">
<h1>Bulk Writes<a class="headerlink" href="#bulk-writes" title="Permalink to this headline">#</a></h1>
<div class="contents singlecol local topic" id="on-this-page">
<p class="topic-title">On this page</p>
<ul class="simple">
<li><p><a class="reference internal" href="#insert-one" id="id1">insert_one</a></p></li>
<li><p><a class="reference internal" href="#update-one" id="id2">update_one</a></p></li>
<li><p><a class="reference internal" href="#update-many" id="id3">update_many</a></p></li>
<li><p><a class="reference internal" href="#replace-one" id="id4">replace_one</a></p></li>
<li><p><a class="reference internal" href="#delete-one" id="id5">delete_one</a></p></li>
<li><p><a class="reference internal" href="#delete-many" id="id6">delete_many</a></p></li>
<li><p><a class="reference internal" href="#bulk-write-splitting" id="id7">Bulk Write Splitting</a></p></li>
</ul>
</div>
<p id="bulk-operations">The bulk write API sends several write operations to the server in a single
command. Use the bulk write API to reduce the number of network round-trips
when performing several writes at a time. For example, to efficiently perform
multiple updates, one might do:</p>
<div class="highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">collection</span> <span class="o">=</span> <span class="n">client</span><span class="o">[</span><span class="s1">&#39;colors&#39;</span><span class="o">]</span>
<span class="n">collection</span><span class="o">.</span><span class="n">bulk_write</span><span class="p">(</span><span class="o">[</span>
  <span class="p">{</span>
    <span class="ss">update_one</span><span class="p">:</span> <span class="p">{</span>
      <span class="ss">filter</span><span class="p">:</span> <span class="p">{</span><span class="nb">name</span><span class="p">:</span> <span class="s1">&#39;yellow&#39;</span><span class="p">},</span>
      <span class="ss">update</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;$set&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="ss">hex</span><span class="p">:</span> <span class="s1">&#39;ffff00&#39;</span><span class="p">}},</span>
    <span class="p">},</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="ss">update_one</span><span class="p">:</span> <span class="p">{</span>
      <span class="ss">filter</span><span class="p">:</span> <span class="p">{</span><span class="nb">name</span><span class="p">:</span> <span class="s1">&#39;purple&#39;</span><span class="p">},</span>
      <span class="ss">update</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;$set&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="ss">hex</span><span class="p">:</span> <span class="s1">&#39;800080&#39;</span><span class="p">}},</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="o">]</span><span class="p">,</span> <span class="ss">ordered</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span> <span class="ss">write_concern</span><span class="p">:</span> <span class="p">{</span><span class="ss">w</span><span class="p">:</span> <span class="ss">:majority</span><span class="p">})</span>
</pre></div>
</div>
<p>The following example shows how to execute different types of operations
in the same request:</p>
<div class="highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="n">collection</span><span class="o">.</span><span class="n">bulk_write</span><span class="p">(</span><span class="o">[</span>
  <span class="p">{</span> <span class="ss">insert_one</span><span class="p">:</span> <span class="p">{</span> <span class="ss">x</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}</span> <span class="p">},</span>
  <span class="p">{</span> <span class="ss">update_one</span><span class="p">:</span> <span class="p">{</span>
    <span class="ss">filter</span><span class="p">:</span> <span class="p">{</span> <span class="ss">x</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span>
    <span class="ss">update</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;$set&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="ss">x</span><span class="p">:</span> <span class="mi">2</span> <span class="p">}</span> <span class="p">},</span>
  <span class="p">}</span> <span class="p">},</span>
  <span class="p">{</span> <span class="ss">replace_one</span><span class="p">:</span> <span class="p">{</span>
    <span class="ss">filter</span><span class="p">:</span> <span class="p">{</span> <span class="ss">x</span><span class="p">:</span> <span class="mi">2</span> <span class="p">},</span>
    <span class="ss">replacement</span><span class="p">:</span> <span class="p">{</span> <span class="ss">x</span><span class="p">:</span> <span class="mi">3</span> <span class="p">},</span>
  <span class="p">}</span> <span class="p">},</span>
<span class="o">]</span><span class="p">,</span> <span class="ss">:ordered</span> <span class="o">=&gt;</span> <span class="kp">true</span><span class="p">)</span>
</pre></div>
</div>
<p>The first argument to <code class="docutils literal notranslate"><span class="pre">bulk_write</span></code> is the list of operations to perform.
Each operation must be specified as a hash with exactly one key which is
the operation name and the operation specification as the corresponding
value. The supported operations are detailed below. The <code class="docutils literal notranslate"><span class="pre">bulk_write</span></code> method
also accepts the following options:</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">bypass_document_validation</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code>. Whether to bypass document validation.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ordered</span></code></p></td>
<td><p>If the <code class="docutils literal notranslate"><span class="pre">ordered</span></code> option is set to <code class="docutils literal notranslate"><span class="pre">true</span></code> (which is the default),
the operations are applied in order and if any operation fails, subsequent
operations are not attempted. If the <code class="docutils literal notranslate"><span class="pre">ordered</span></code> option is set to <code class="docutils literal notranslate"><span class="pre">false</span></code>,
all specified operations are attempted.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">write_concern</span></code></p></td>
<td><p>The write concern for the operation, specified as a hash.</p></td>
</tr>
</tbody>
</table>
<p>Valid bulk write operations are the following:</p>
<section id="insert-one">
<h2>insert_one<a class="headerlink" href="#insert-one" title="Permalink to this headline">#</a></h2>
<div class="highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="ss">insert_one</span><span class="p">:</span> <span class="p">{</span> <span class="ss">x</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}</span> <span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There is no <code class="docutils literal notranslate"><span class="pre">insert_many</span></code> bulk operation. To insert multiple documents,
specify multiple <code class="docutils literal notranslate"><span class="pre">insert_one</span></code> operations.</p>
</div>
</section>
<section id="update-one">
<h2>update_one<a class="headerlink" href="#update-one" title="Permalink to this headline">#</a></h2>
<div class="highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="ss">update_one</span><span class="p">:</span> <span class="p">{</span>
  <span class="ss">filter</span><span class="p">:</span> <span class="p">{</span> <span class="ss">x</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span>
  <span class="ss">update</span><span class="p">:</span> <span class="p">{</span> <span class="s1">&#39;$set&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="ss">x</span><span class="p">:</span> <span class="mi">2</span> <span class="p">}</span> <span class="p">},</span>
  <span class="c1"># upsert is optional and defaults to false</span>
  <span class="ss">upsert</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
<span class="p">}</span> <span class="p">}</span>
</pre></div>
</div>
</section>
<section id="update-many">
<h2>update_many<a class="headerlink" href="#update-many" title="Permalink to this headline">#</a></h2>
<div class="highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="ss">update_many</span><span class="p">:</span> <span class="p">{</span>
  <span class="ss">filter</span><span class="p">:</span> <span class="p">{</span> <span class="ss">x</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span>
  <span class="ss">update</span><span class="p">:</span> <span class="p">{</span> <span class="s1">&#39;$set&#39;</span> <span class="o">=&gt;</span>  <span class="p">{</span> <span class="ss">x</span><span class="p">:</span> <span class="mi">2</span> <span class="p">}</span> <span class="p">},</span>
  <span class="c1"># upsert is optional and defaults to false</span>
  <span class="ss">:upsert</span> <span class="o">=&gt;</span> <span class="kp">true</span><span class="p">,</span>
<span class="p">}</span> <span class="p">}</span>
</pre></div>
</div>
</section>
<section id="replace-one">
<h2>replace_one<a class="headerlink" href="#replace-one" title="Permalink to this headline">#</a></h2>
<div class="highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="ss">replace_one</span><span class="p">:</span> <span class="p">{</span>
  <span class="ss">filter</span><span class="p">:</span> <span class="p">{</span> <span class="ss">x</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span>
  <span class="ss">replacement</span><span class="p">:</span> <span class="p">{</span> <span class="ss">x</span><span class="p">:</span> <span class="mi">2</span> <span class="p">},</span>
  <span class="c1"># upsert is optional and defaults to false</span>
  <span class="ss">upsert</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
<span class="p">}</span> <span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">:replace_one</span></code> operation requires that the replacement value is a
document. <code class="docutils literal notranslate"><span class="pre">:replace_one</span></code> does not recognize MongoDB update operators in
the replacement value. In a future release the driver is expected to
prohibit using keys beginning with <code class="docutils literal notranslate"><span class="pre">$</span></code> in the replacement document.</p>
</div>
</section>
<section id="delete-one">
<h2>delete_one<a class="headerlink" href="#delete-one" title="Permalink to this headline">#</a></h2>
<div class="highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="ss">delete_one</span><span class="p">:</span> <span class="p">{</span>
  <span class="ss">filter</span><span class="p">:</span> <span class="p">{</span> <span class="ss">x</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span>
<span class="p">}</span> <span class="p">}</span>
</pre></div>
</div>
</section>
<section id="delete-many">
<h2>delete_many<a class="headerlink" href="#delete-many" title="Permalink to this headline">#</a></h2>
<div class="highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="ss">delete_many</span><span class="p">:</span> <span class="p">{</span>
  <span class="ss">filter</span><span class="p">:</span> <span class="p">{</span> <span class="ss">x</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span>
<span class="p">}</span> <span class="p">}</span>
</pre></div>
</div>
</section>
<section id="bulk-write-splitting">
<h2>Bulk Write Splitting<a class="headerlink" href="#bulk-write-splitting" title="Permalink to this headline">#</a></h2>
<p>The driver allows the application to submit arbitrarily large bulk write
requests. However, since MongoDB server limits the size of command documents
(currently this limit is 48 MiB), bulk writes that exceed this limit will be
split into multiple requests.</p>
<p>When <a class="reference internal" href="client-side-encryption.html#client-side-encryption"><span class="std std-ref">client-side encryption</span></a> is used, the
threshold used for bulk write splitting is reduced to allow for overhead in
the ciphertext.</p>
</section>
</section>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="crud-operations.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">CRUD Operations</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="projection.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Projection</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
      &copy; Copyright 2021, MongoDB.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>