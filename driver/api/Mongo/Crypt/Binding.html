<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Mongo::Crypt::Binding
  
    &mdash; mongo-2.15.0.alpha
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Mongo::Crypt::Binding";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (B)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Mongo.html" title="Mongo (module)">Mongo</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Crypt.html" title="Mongo::Crypt (module)">Crypt</a></span></span>
     &raquo; 
    <span class="title">Binding</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Mongo::Crypt::Binding
  
  
  <span class="private note title">Private</span>
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Mongo::Crypt::Binding</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  <dl>
      <dt>Extended by:</dt>
      <dd>FFI::Library</dd>
  </dl>
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/mongo/crypt/binding.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This class is part of a private API.</strong>
  You should avoid using this class if possible, as it may be removed or be changed in the future.
</p>

<p>A Ruby binding for the libmongocrypt C library</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#check_ctx_status-class_method" title="check_ctx_status (class method)">.<strong>check_ctx_status</strong>(context)  &#x21d2; nil </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Raise a Mongo::Error::CryptError based on the status of the underlying mongocrypt_ctx_t object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#check_kms_ctx_status-class_method" title="check_kms_ctx_status (class method)">.<strong>check_kms_ctx_status</strong>(kms_context)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>If the provided block returns false, raise a CryptError with the status information from the provided KmsContext object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#check_status-class_method" title="check_status (class method)">.<strong>check_status</strong>(handle)  &#x21d2; nil </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Raise a Mongo::Error::CryptError based on the status of the underlying mongocrypt_t object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ctx_datakey_init-class_method" title="ctx_datakey_init (class method)">.<strong>ctx_datakey_init</strong>(context)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Initialize the Context to create a data key.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ctx_decrypt_init-class_method" title="ctx_decrypt_init (class method)">.<strong>ctx_decrypt_init</strong>(context, command)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Initialize the Context for auto-decryption.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ctx_encrypt_init-class_method" title="ctx_encrypt_init (class method)">.<strong>ctx_encrypt_init</strong>(context, db_name, command)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Initialize the Context for auto-encryption.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ctx_explicit_decrypt_init-class_method" title="ctx_explicit_decrypt_init (class method)">.<strong>ctx_explicit_decrypt_init</strong>(context, doc)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Initialize the Context for explicit decryption.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ctx_explicit_encrypt_init-class_method" title="ctx_explicit_encrypt_init (class method)">.<strong>ctx_explicit_encrypt_init</strong>(context, doc)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Initialize the Context for explicit encryption.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ctx_finalize-class_method" title="ctx_finalize (class method)">.<strong>ctx_finalize</strong>(context)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Finalize the state machine represented by the Context.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ctx_kms_done-class_method" title="ctx_kms_done (class method)">.<strong>ctx_kms_done</strong>(context)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Indicate to libmongocrypt that it will receive no more KMS replies.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ctx_mongo_feed-class_method" title="ctx_mongo_feed (class method)">.<strong>ctx_mongo_feed</strong>(context, doc)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Feed a response from the driver back to libmongocrypt.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ctx_mongo_op-class_method" title="ctx_mongo_op (class method)">.<strong>ctx_mongo_op</strong>(context)  &#x21d2; BSON::Document </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Returns a BSON::Document representing an operation that the driver must perform on behalf of libmongocrypt to get the information it needs in order to continue with encryption/decryption (for example, a filter for a key vault query).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ctx_next_kms_ctx-class_method" title="ctx_next_kms_ctx (class method)">.<strong>ctx_next_kms_ctx</strong>(context)  &#x21d2; Mongo::Crypt::KmsContext | nil </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Return a new KmsContext object needed by a Context object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ctx_setopt_algorithm-class_method" title="ctx_setopt_algorithm (class method)">.<strong>ctx_setopt_algorithm</strong>(context, name)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Set the algorithm on the context.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ctx_setopt_key_alt_names-class_method" title="ctx_setopt_key_alt_names (class method)">.<strong>ctx_setopt_key_alt_names</strong>(context, key_alt_names)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Set multiple alternate key names on data key creation.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ctx_setopt_key_id-class_method" title="ctx_setopt_key_id (class method)">.<strong>ctx_setopt_key_id</strong>(context, key_id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Sets the key id option on an explicit encryption context.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ctx_setopt_master_key_aws-class_method" title="ctx_setopt_master_key_aws (class method)">.<strong>ctx_setopt_master_key_aws</strong>(context, region, arn)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Configure the Context object to take a master key from AWS.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ctx_setopt_master_key_aws_endpoint-class_method" title="ctx_setopt_master_key_aws_endpoint (class method)">.<strong>ctx_setopt_master_key_aws_endpoint</strong>(context, endpoint)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Configure the Context object to take a masterk ey from AWS.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ctx_setopt_master_key_local-class_method" title="ctx_setopt_master_key_local (class method)">.<strong>ctx_setopt_master_key_local</strong>(context)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Tell the Context object to read the master key from local KMS options.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#init-class_method" title="init (class method)">.<strong>init</strong>(handle)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Initialize the Mongo::Crypt::Handle object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#kms_ctx_bytes_needed-class_method" title="kms_ctx_bytes_needed (class method)">.<strong>kms_ctx_bytes_needed</strong>(kms_context)  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Get the number of bytes needed by the KmsContext.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#kms_ctx_endpoint-class_method" title="kms_ctx_endpoint (class method)">.<strong>kms_ctx_endpoint</strong>(kms_context)  &#x21d2; String | nil </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Get the hostname with which to connect over TLS to get information about the AWS master key.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#kms_ctx_feed-class_method" title="kms_ctx_feed (class method)">.<strong>kms_ctx_feed</strong>(kms_context, bytes)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Feed replies from the KMS back to libmongocrypt.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#kms_ctx_message-class_method" title="kms_ctx_message (class method)">.<strong>kms_ctx_message</strong>(kms_context)  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Get the HTTP message needed to fetch the AWS KMS master key from a KmsContext object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_binary_data-class_method" title="mongocrypt_binary_data (class method)">.<strong>mongocrypt_binary_data</strong>(binary)  &#x21d2; FFI::Pointer </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Get the pointer to the underlying data for the mongocrypt_binary_t.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_binary_destroy-class_method" title="mongocrypt_binary_destroy (class method)">.<strong>mongocrypt_binary_destroy</strong>(binary)  &#x21d2; nil </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Destroy the mongocrypt_binary_t object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_binary_len-class_method" title="mongocrypt_binary_len (class method)">.<strong>mongocrypt_binary_len</strong>(binary)  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Get the length of the underlying data array.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_binary_new-class_method" title="mongocrypt_binary_new (class method)">.<strong>mongocrypt_binary_new</strong>  &#x21d2; FFI::Pointer </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Creates a new mongocrypt_binary_t object (a non-owning view of a byte   array).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_binary_new_from_data-class_method" title="mongocrypt_binary_new_from_data (class method)">.<strong>mongocrypt_binary_new_from_data</strong>(data, len)  &#x21d2; FFI::Pointer </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Create a new mongocrypt_binary_t object that maintains a pointer to   the specified byte array.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_ctx_datakey_init-class_method" title="mongocrypt_ctx_datakey_init (class method)">.<strong>mongocrypt_ctx_datakey_init</strong>(ctx)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Initializes the ctx to create a data key.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_ctx_decrypt_init-class_method" title="mongocrypt_ctx_decrypt_init (class method)">.<strong>mongocrypt_ctx_decrypt_init</strong>(ctx, doc)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Initializes the ctx for auto-decryption.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_ctx_destroy-class_method" title="mongocrypt_ctx_destroy (class method)">.<strong>mongocrypt_ctx_destroy</strong>(ctx)  &#x21d2; nil </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Destroy the reference to the mongocrypt_ctx_t object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_ctx_encrypt_init-class_method" title="mongocrypt_ctx_encrypt_init (class method)">.<strong>mongocrypt_ctx_encrypt_init</strong>(ctx, db, db_len, cmd)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Initializes the ctx for auto-encryption.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_ctx_explicit_decrypt_init-class_method" title="mongocrypt_ctx_explicit_decrypt_init (class method)">.<strong>mongocrypt_ctx_explicit_decrypt_init</strong>(ctx, msg)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Initializes the ctx for explicit decryption.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_ctx_explicit_encrypt_init-class_method" title="mongocrypt_ctx_explicit_encrypt_init (class method)">.<strong>mongocrypt_ctx_explicit_encrypt_init</strong>(ctx, msg)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Initializes the ctx for explicit encryption.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_ctx_finalize-class_method" title="mongocrypt_ctx_finalize (class method)">.<strong>mongocrypt_ctx_finalize</strong>(ctx, op_bson)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Perform the final encryption or decryption and return a BSON document.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_ctx_mongo_done-class_method" title="mongocrypt_ctx_mongo_done (class method)">.<strong>mongocrypt_ctx_mongo_done</strong>(ctx)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Indicate to libmongocrypt that the driver is done feeding replies.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_ctx_mongo_feed-class_method" title="mongocrypt_ctx_mongo_feed (class method)">.<strong>mongocrypt_ctx_mongo_feed</strong>(ctx, reply)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Feed a BSON reply to libmongocrypt.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_ctx_mongo_next_kms_ctx-class_method" title="mongocrypt_ctx_mongo_next_kms_ctx (class method)">.<strong>mongocrypt_ctx_mongo_next_kms_ctx</strong>(ctx)  &#x21d2; FFI::Pointer </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Return a pointer to a mongocrypt_kms_ctx_t object or NULL.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_ctx_mongo_op-class_method" title="mongocrypt_ctx_mongo_op (class method)">.<strong>mongocrypt_ctx_mongo_op</strong>(ctx, op_bson)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Get a BSON operation for the driver to run against the MongoDB   collection, the key vault database, or mongocryptd.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_ctx_new-class_method" title="mongocrypt_ctx_new (class method)">.<strong>mongocrypt_ctx_new</strong>(crypt)  &#x21d2; FFI::Pointer </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Create a new mongocrypt_ctx_t object (a wrapper for the libmongocrypt   state machine).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_ctx_setopt_algorithm-class_method" title="mongocrypt_ctx_setopt_algorithm (class method)">.<strong>mongocrypt_ctx_setopt_algorithm</strong>(ctx, algorithm, len)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Set the algorithm used for explicit encryption.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_ctx_setopt_key_alt_name-class_method" title="mongocrypt_ctx_setopt_key_alt_name (class method)">.<strong>mongocrypt_ctx_setopt_key_alt_name</strong>(ctx, binary)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>When creating a data key, set an alternate name on that key.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_ctx_setopt_key_id-class_method" title="mongocrypt_ctx_setopt_key_id (class method)">.<strong>mongocrypt_ctx_setopt_key_id</strong>(ctx, key_id)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Set the key id used for explicit encryption.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_ctx_setopt_masterkey_aws-class_method" title="mongocrypt_ctx_setopt_masterkey_aws (class method)">.<strong>mongocrypt_ctx_setopt_masterkey_aws</strong>(ctx, region, region_len, arn, arn_len)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Configure the ctx to take a master key from AWS.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_ctx_setopt_masterkey_aws_endpoint-class_method" title="mongocrypt_ctx_setopt_masterkey_aws_endpoint (class method)">.<strong>mongocrypt_ctx_setopt_masterkey_aws_endpoint</strong>(ctx, endpoint, endpoint_len)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Set a custom endpoint at which to fetch the AWS master key.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_ctx_setopt_masterkey_local-class_method" title="mongocrypt_ctx_setopt_masterkey_local (class method)">.<strong>mongocrypt_ctx_setopt_masterkey_local</strong>(ctx)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Set the ctx to take a local master key.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_ctx_state-class_method" title="mongocrypt_ctx_state (class method)">.<strong>mongocrypt_ctx_state</strong>(ctx)  &#x21d2; Symbol </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Get the current state of the ctx.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_ctx_status-class_method" title="mongocrypt_ctx_status (class method)">.<strong>mongocrypt_ctx_status</strong>(ctx, status)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Set the status information from the mongocrypt_ctx_t object on the   mongocrypt_status_t object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_destroy-class_method" title="mongocrypt_destroy (class method)">.<strong>mongocrypt_destroy</strong>(crypt)  &#x21d2; nil </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Destroy the reference the mongocrypt_t object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_init-class_method" title="mongocrypt_init (class method)">.<strong>mongocrypt_init</strong>(crypt)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Initialize the mongocrypt_t object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_kms_ctx_bytes_needed-class_method" title="mongocrypt_kms_ctx_bytes_needed (class method)">.<strong>mongocrypt_kms_ctx_bytes_needed</strong>(kms)  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Get the number of bytes needed by the KMS context.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_kms_ctx_done-class_method" title="mongocrypt_kms_ctx_done (class method)">.<strong>mongocrypt_kms_ctx_done</strong>(ctx)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Indicate to libmongocrypt that it will receive no more replies from   mongocrypt_kms_ctx_t objects.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_kms_ctx_endpoint-class_method" title="mongocrypt_kms_ctx_endpoint (class method)">.<strong>mongocrypt_kms_ctx_endpoint</strong>(kms, endpoint)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Get the hostname with which to connect over TLS to get information about   the AWS master key.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_kms_ctx_feed-class_method" title="mongocrypt_kms_ctx_feed (class method)">.<strong>mongocrypt_kms_ctx_feed</strong>(kms, bytes)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Feed replies from the KMS back to libmongocrypt.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_kms_ctx_message-class_method" title="mongocrypt_kms_ctx_message (class method)">.<strong>mongocrypt_kms_ctx_message</strong>(kms, msg)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Get the message needed to fetch the AWS KMS master key.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_kms_ctx_status-class_method" title="mongocrypt_kms_ctx_status (class method)">.<strong>mongocrypt_kms_ctx_status</strong>(kms, status)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Write status information about the mongocrypt_kms_ctx_t object   to the mongocrypt_status_t object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_setopt_crypto_hooks-class_method" title="mongocrypt_setopt_crypto_hooks (class method)">.<strong>mongocrypt_setopt_crypto_hooks</strong>(crypt, aes_enc_fn, aes_dec_fn, random_fn, sha_512_fn, sha_256_fn, hash_fn, ctx = nil)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Set crypto hooks on the provided mongocrypt object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_setopt_kms_provider_aws-class_method" title="mongocrypt_setopt_kms_provider_aws (class method)">.<strong>mongocrypt_setopt_kms_provider_aws</strong>(crypt, aws_access_key_id, aws_access_key_id_len, aws_secret_access_key, aws_secret_access_key_len)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Configure mongocrypt_t object with AWS KMS provider options.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_setopt_kms_provider_local-class_method" title="mongocrypt_setopt_kms_provider_local (class method)">.<strong>mongocrypt_setopt_kms_provider_local</strong>(crypt, key)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Configure mongocrypt_t object to take local KSM provider options.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_setopt_log_handler-class_method" title="mongocrypt_setopt_log_handler (class method)">.<strong>mongocrypt_setopt_log_handler</strong>(crypt, log_fn, log_ctx = nil)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Set the handler on the mongocrypt_t object to be called every time   libmongocrypt logs a message.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_setopt_schema_map-class_method" title="mongocrypt_setopt_schema_map (class method)">.<strong>mongocrypt_setopt_schema_map</strong>(crypt, schema_map)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Sets a local schema map for encryption.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_status-class_method" title="mongocrypt_status (class method)">.<strong>mongocrypt_status</strong>(crypt, status)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Set the status information from the mongocrypt_t object on the   mongocrypt_status_t object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_status_code-class_method" title="mongocrypt_status_code (class method)">.<strong>mongocrypt_status_code</strong>(status)  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Return the status error code.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_status_destroy-class_method" title="mongocrypt_status_destroy (class method)">.<strong>mongocrypt_status_destroy</strong>(status)  &#x21d2; nil </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Destroys the reference to the mongocrypt_status_t object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_status_message-class_method" title="mongocrypt_status_message (class method)">.<strong>mongocrypt_status_message</strong>(status, len = nil)  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the status message.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_status_new-class_method" title="mongocrypt_status_new (class method)">.<strong>mongocrypt_status_new</strong>  &#x21d2; FFI::Pointer </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Create a new mongocrypt_status_t object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_status_ok-class_method" title="mongocrypt_status_ok (class method)">.<strong>mongocrypt_status_ok</strong>(status)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Returns whether the status is ok or an error.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_status_set-class_method" title="mongocrypt_status_set (class method)">.<strong>mongocrypt_status_set</strong>(status, type, code, message, len)  &#x21d2; nil </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Set a message, type, and code on an existing status.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_status_type-class_method" title="mongocrypt_status_type (class method)">.<strong>mongocrypt_status_type</strong>(status)  &#x21d2; Symbol </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Indicates the status type.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_version-class_method" title="mongocrypt_version (class method)">.<strong>mongocrypt_version</strong>(len)  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the version string of the libmongocrypt library.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ongocrypt_new-class_method" title="ongocrypt_new (class method)">.<strong>ongocrypt_new</strong>  &#x21d2; FFI::Pointer </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Creates a new mongocrypt_t object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#setopt_crypto_hooks-class_method" title="setopt_crypto_hooks (class method)">.<strong>setopt_crypto_hooks</strong>(handle, aes_encrypt_cb, aes_decrypt_cb, random_cb, hmac_sha_512_cb, hmac_sha_256_cb, hmac_hash_cb)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Set crypto callbacks on the Handle.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#setopt_kms_provider_aws-class_method" title="setopt_kms_provider_aws (class method)">.<strong>setopt_kms_provider_aws</strong>(handle, aws_access_key, aws_secret_access_key)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Configure the Handle object with AWS KMS provider options.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#setopt_kms_provider_local-class_method" title="setopt_kms_provider_local (class method)">.<strong>setopt_kms_provider_local</strong>(handle, master_key)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Set local KMS provider options on the Mongo::Crypt::Handle object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#setopt_log_handler-class_method" title="setopt_log_handler (class method)">.<strong>setopt_log_handler</strong>(handle, log_callback)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Set the logger callback function on the Mongo::Crypt::Handle object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#setopt_schema_map-class_method" title="setopt_schema_map (class method)">.<strong>setopt_schema_map</strong>(handle, schema_map_doc)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Set schema map on the Mongo::Crypt::Handle object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#validate_document-class_method" title="validate_document (class method)">.<strong>validate_document</strong>(data)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Checks that the specified data is a Hash before serializing it to BSON to prevent errors from libmongocrypt.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_crypto_fn-instance_method" title="#mongocrypt_crypto_fn (instance method)">#<strong>mongocrypt_crypto_fn</strong>(ctx, key, iv, input, output, status)  &#x21d2; Bool </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>A callback to a function that performs AES encryption or decryption.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_hash_fn-instance_method" title="#mongocrypt_hash_fn (instance method)">#<strong>mongocrypt_hash_fn</strong>(ctx, input, output, status)  &#x21d2; Bool </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>A callback to a SHA-256 hash function.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_hmac_fn-instance_method" title="#mongocrypt_hmac_fn (instance method)">#<strong>mongocrypt_hmac_fn</strong>(ctx, key, input, output, status)  &#x21d2; Bool </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>A callback to a function that performs HMAC SHA-512 or SHA-256.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_log_fn_t-instance_method" title="#mongocrypt_log_fn_t (instance method)">#<strong>mongocrypt_log_fn_t</strong>(level, message, len, ctx)  &#x21d2; nil </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>A callback to the mongocrypt log function.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mongocrypt_random_fn-instance_method" title="#mongocrypt_random_fn (instance method)">#<strong>mongocrypt_random_fn</strong>(ctx, output, count, status)  &#x21d2; Bool </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>A callback to a crypto secure random function.</p>
</div></span>
  
</li>

      
    </ul>
  


  

  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="check_ctx_status-class_method">
  
    .<strong>check_ctx_status</strong>(context)  &#x21d2; <tt>nil</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Raise a Mongo::Error::CryptError based on the status of the underlying mongocrypt_ctx_t object.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Always nil.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1194
1195
1196
1197
1198
1199
1200
1201
1202
1203
1204
1205
1206
1207</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 1194</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_check_ctx_status'>check_ctx_status</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='id identifier rubyid_do_raise'>do_raise</span> <span class='op'>=</span> <span class='op'>!</span><span class='kw'>yield</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_do_raise'>do_raise</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_do_raise'>do_raise</span>
    <span class='id identifier rubyid_status'>status</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Status.html" title="Mongo::Crypt::Status (class)">Status</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Status.html#initialize-instance_method" title="Mongo::Crypt::Status#initialize (method)">new</a></span></span>

    <span class='id identifier rubyid_mongocrypt_ctx_status'>mongocrypt_ctx_status</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_status'>status</span><span class='period'>.</span><span class='id identifier rubyid_ref'>ref</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_status'>status</span><span class='period'>.</span><span class='id identifier rubyid_raise_crypt_error'>raise_crypt_error</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="check_kms_ctx_status-class_method">
  
    .<strong>check_kms_ctx_status</strong>(kms_context)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>If the provided block returns false, raise a CryptError with the status information from the provided KmsContext object.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>kms_context</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="KmsContext.html" title="Mongo::Crypt::KmsContext (class)">Mongo::Crypt::KmsContext</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If the provided block returns false</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


969
970
971
972
973
974
975
976</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 969</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_check_kms_ctx_status'>check_kms_ctx_status</span><span class='lparen'>(</span><span class='id identifier rubyid_kms_context'>kms_context</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='kw'>yield</span>
    <span class='id identifier rubyid_status'>status</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Status.html" title="Mongo::Crypt::Status (class)">Status</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Status.html#initialize-instance_method" title="Mongo::Crypt::Status#initialize (method)">new</a></span></span>

    <span class='id identifier rubyid_mongocrypt_kms_ctx_status'>mongocrypt_kms_ctx_status</span><span class='lparen'>(</span><span class='id identifier rubyid_kms_context'>kms_context</span><span class='period'>.</span><span class='id identifier rubyid_kms_ctx_p'>kms_ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_status'>status</span><span class='period'>.</span><span class='id identifier rubyid_ref'>ref</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_status'>status</span><span class='period'>.</span><span class='id identifier rubyid_raise_crypt_error'>raise_crypt_error</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="check_status-class_method">
  
    .<strong>check_status</strong>(handle)  &#x21d2; <tt>nil</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Raise a Mongo::Error::CryptError based on the status of the underlying mongocrypt_t object.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Always nil.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1181
1182
1183
1184
1185
1186
1187
1188</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 1181</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_check_status'>check_status</span><span class='lparen'>(</span><span class='id identifier rubyid_handle'>handle</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='kw'>yield</span>
    <span class='id identifier rubyid_status'>status</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Status.html" title="Mongo::Crypt::Status (class)">Status</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Status.html#initialize-instance_method" title="Mongo::Crypt::Status#initialize (method)">new</a></span></span>

    <span class='id identifier rubyid_mongocrypt_status'>mongocrypt_status</span><span class='lparen'>(</span><span class='id identifier rubyid_handle'>handle</span><span class='period'>.</span><span class='id identifier rubyid_ref'>ref</span><span class='comma'>,</span> <span class='id identifier rubyid_status'>status</span><span class='period'>.</span><span class='id identifier rubyid_ref'>ref</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_status'>status</span><span class='period'>.</span><span class='id identifier rubyid_raise_crypt_error'>raise_crypt_error</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ctx_datakey_init-class_method">
  
    .<strong>ctx_datakey_init</strong>(context)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Initialize the Context to create a data key</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>context</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If initialization fails</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


608
609
610
611
612</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 608</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_ctx_datakey_init'>ctx_datakey_init</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_check_ctx_status'>check_ctx_status</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_mongocrypt_ctx_datakey_init'>mongocrypt_ctx_datakey_init</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ctx_decrypt_init-class_method">
  
    .<strong>ctx_decrypt_init</strong>(context, command)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Initialize the Context for auto-decryption</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>context</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>command</span>
      
      
        <span class='type'>(<tt>BSON::Document</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A BSON document to decrypt</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If initialization fails</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


701
702
703
704
705
706
707
708
709</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 701</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_ctx_decrypt_init'>ctx_decrypt_init</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='comma'>,</span> <span class='id identifier rubyid_command'>command</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_validate_document'>validate_document</span><span class='lparen'>(</span><span class='id identifier rubyid_command'>command</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_command'>command</span><span class='period'>.</span><span class='id identifier rubyid_to_bson'>to_bson</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
  <span class='const'><span class='object_link'><a href="Binary.html" title="Mongo::Crypt::Binary (class)">Binary</a></span></span><span class='period'>.</span><span class='id identifier rubyid_wrap_string'><span class='object_link'><a href="Binary.html#wrap_string-class_method" title="Mongo::Crypt::Binary.wrap_string (method)">wrap_string</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_data_p'>data_p</span><span class='op'>|</span>
    <span class='id identifier rubyid_check_ctx_status'>check_ctx_status</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_mongocrypt_ctx_decrypt_init'>mongocrypt_ctx_decrypt_init</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_data_p'>data_p</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ctx_encrypt_init-class_method">
  
    .<strong>ctx_encrypt_init</strong>(context, db_name, command)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Initialize the Context for auto-encryption</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>context</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>db_name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The name of the database against which the encrypted command is being performed</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>command</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The command to be encrypted</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If initialization fails</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


641
642
643
644
645
646
647
648
649</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 641</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_ctx_encrypt_init'>ctx_encrypt_init</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='comma'>,</span> <span class='id identifier rubyid_db_name'>db_name</span><span class='comma'>,</span> <span class='id identifier rubyid_command'>command</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_validate_document'>validate_document</span><span class='lparen'>(</span><span class='id identifier rubyid_command'>command</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_command'>command</span><span class='period'>.</span><span class='id identifier rubyid_to_bson'>to_bson</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
  <span class='const'><span class='object_link'><a href="Binary.html" title="Mongo::Crypt::Binary (class)">Binary</a></span></span><span class='period'>.</span><span class='id identifier rubyid_wrap_string'><span class='object_link'><a href="Binary.html#wrap_string-class_method" title="Mongo::Crypt::Binary.wrap_string (method)">wrap_string</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_data_p'>data_p</span><span class='op'>|</span>
    <span class='id identifier rubyid_check_ctx_status'>check_ctx_status</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_mongocrypt_ctx_encrypt_init'>mongocrypt_ctx_encrypt_init</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_db_name'>db_name</span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span> <span class='id identifier rubyid_data_p'>data_p</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ctx_explicit_decrypt_init-class_method">
  
    .<strong>ctx_explicit_decrypt_init</strong>(context, doc)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Initialize the Context for explicit decryption</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>context</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>doc</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A BSON document to decrypt</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If initialization fails</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


731
732
733
734
735
736
737
738
739</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 731</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_ctx_explicit_decrypt_init'>ctx_explicit_decrypt_init</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='comma'>,</span> <span class='id identifier rubyid_doc'>doc</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_validate_document'>validate_document</span><span class='lparen'>(</span><span class='id identifier rubyid_doc'>doc</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_doc'>doc</span><span class='period'>.</span><span class='id identifier rubyid_to_bson'>to_bson</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
  <span class='const'><span class='object_link'><a href="Binary.html" title="Mongo::Crypt::Binary (class)">Binary</a></span></span><span class='period'>.</span><span class='id identifier rubyid_wrap_string'><span class='object_link'><a href="Binary.html#wrap_string-class_method" title="Mongo::Crypt::Binary.wrap_string (method)">wrap_string</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_data_p'>data_p</span><span class='op'>|</span>
    <span class='id identifier rubyid_check_ctx_status'>check_ctx_status</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_mongocrypt_ctx_explicit_decrypt_init'>mongocrypt_ctx_explicit_decrypt_init</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_data_p'>data_p</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ctx_explicit_encrypt_init-class_method">
  
    .<strong>ctx_explicit_encrypt_init</strong>(context, doc)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Initialize the Context for explicit encryption</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>context</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>doc</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A BSON document to encrypt</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If initialization fails</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


675
676
677
678
679
680
681
682
683</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 675</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_ctx_explicit_encrypt_init'>ctx_explicit_encrypt_init</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='comma'>,</span> <span class='id identifier rubyid_doc'>doc</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_validate_document'>validate_document</span><span class='lparen'>(</span><span class='id identifier rubyid_doc'>doc</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_doc'>doc</span><span class='period'>.</span><span class='id identifier rubyid_to_bson'>to_bson</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
  <span class='const'><span class='object_link'><a href="Binary.html" title="Mongo::Crypt::Binary (class)">Binary</a></span></span><span class='period'>.</span><span class='id identifier rubyid_wrap_string'><span class='object_link'><a href="Binary.html#wrap_string-class_method" title="Mongo::Crypt::Binary.wrap_string (method)">wrap_string</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_data_p'>data_p</span><span class='op'>|</span>
    <span class='id identifier rubyid_check_ctx_status'>check_ctx_status</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_mongocrypt_ctx_explicit_encrypt_init'>mongocrypt_ctx_explicit_encrypt_init</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_data_p'>data_p</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ctx_finalize-class_method">
  
    .<strong>ctx_finalize</strong>(context)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Finalize the state machine represented by the Context</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>context</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If the state machine is not successfully finalized</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1015
1016
1017
1018
1019
1020
1021
1022
1023
1024
1025
1026</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 1015</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_ctx_finalize'>ctx_finalize</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_binary'>binary</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Binary.html" title="Mongo::Crypt::Binary (class)">Binary</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Binary.html#initialize-instance_method" title="Mongo::Crypt::Binary#initialize (method)">new</a></span></span>

  <span class='id identifier rubyid_check_ctx_status'>check_ctx_status</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_mongocrypt_ctx_finalize'>mongocrypt_ctx_finalize</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_binary'>binary</span><span class='period'>.</span><span class='id identifier rubyid_ref'>ref</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># TODO since the binary references a C pointer, and ByteBuffer is
</span>  <span class='comment'># written in C in MRI, we could omit a copy of the data by making
</span>  <span class='comment'># ByteBuffer reference the string that is owned by libmongocrypt.
</span>  <span class='const'>BSON</span><span class='op'>::</span><span class='const'>Document</span><span class='period'>.</span><span class='id identifier rubyid_from_bson'>from_bson</span><span class='lparen'>(</span><span class='const'>BSON</span><span class='op'>::</span><span class='const'>ByteBuffer</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_binary'>binary</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='label'>mode:</span> <span class='symbol'>:bson</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ctx_kms_done-class_method">
  
    .<strong>ctx_kms_done</strong>(context)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Indicate to libmongocrypt that it will receive no more KMS replies.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>context</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If the operation is unsuccessful</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


992
993
994
995
996</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 992</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_ctx_kms_done'>ctx_kms_done</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_check_ctx_status'>check_ctx_status</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_mongocrypt_ctx_kms_done'>mongocrypt_ctx_kms_done</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ctx_mongo_feed-class_method">
  
    .<strong>ctx_mongo_feed</strong>(context, doc)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Feed a response from the driver back to libmongocrypt</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>context</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>doc</span>
      
      
        <span class='type'>(<tt>BSON::Document</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The document representing the response</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If the response is not fed successfully</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


811
812
813
814
815
816
817
818
819</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 811</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_ctx_mongo_feed'>ctx_mongo_feed</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='comma'>,</span> <span class='id identifier rubyid_doc'>doc</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_validate_document'>validate_document</span><span class='lparen'>(</span><span class='id identifier rubyid_doc'>doc</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_doc'>doc</span><span class='period'>.</span><span class='id identifier rubyid_to_bson'>to_bson</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
  <span class='const'><span class='object_link'><a href="Binary.html" title="Mongo::Crypt::Binary (class)">Binary</a></span></span><span class='period'>.</span><span class='id identifier rubyid_wrap_string'><span class='object_link'><a href="Binary.html#wrap_string-class_method" title="Mongo::Crypt::Binary.wrap_string (method)">wrap_string</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_data_p'>data_p</span><span class='op'>|</span>
    <span class='id identifier rubyid_check_ctx_status'>check_ctx_status</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_mongocrypt_ctx_mongo_feed'>mongocrypt_ctx_mongo_feed</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_data_p'>data_p</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ctx_mongo_op-class_method">
  
    .<strong>ctx_mongo_op</strong>(context)  &#x21d2; <tt>BSON::Document</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Returns a BSON::Document representing an operation that the driver must perform on behalf of libmongocrypt to get the information it needs in order to continue with encryption/decryption (for example, a filter for a key vault query).</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>context</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>BSON::Document</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The operation that the driver must perform</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Crypt.html" title="Mongo::Crypt (module)">Mongo::Crypt</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If there is an error getting the operation</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


782
783
784
785
786
787
788
789
790
791
792
793</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 782</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_ctx_mongo_op'>ctx_mongo_op</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_binary'>binary</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Binary.html" title="Mongo::Crypt::Binary (class)">Binary</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Binary.html#initialize-instance_method" title="Mongo::Crypt::Binary#initialize (method)">new</a></span></span>

  <span class='id identifier rubyid_check_ctx_status'>check_ctx_status</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_mongocrypt_ctx_mongo_op'>mongocrypt_ctx_mongo_op</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_binary'>binary</span><span class='period'>.</span><span class='id identifier rubyid_ref'>ref</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># TODO since the binary references a C pointer, and ByteBuffer is
</span>  <span class='comment'># written in C in MRI, we could omit a copy of the data by making
</span>  <span class='comment'># ByteBuffer reference the string that is owned by libmongocrypt.
</span>  <span class='const'>BSON</span><span class='op'>::</span><span class='const'>Document</span><span class='period'>.</span><span class='id identifier rubyid_from_bson'>from_bson</span><span class='lparen'>(</span><span class='const'>BSON</span><span class='op'>::</span><span class='const'>ByteBuffer</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_binary'>binary</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='label'>mode:</span> <span class='symbol'>:bson</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ctx_next_kms_ctx-class_method">
  
    .<strong>ctx_next_kms_ctx</strong>(context)  &#x21d2; <tt><span class='object_link'><a href="KmsContext.html" title="Mongo::Crypt::KmsContext (class)">Mongo::Crypt::KmsContext</a></span> | nil</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Return a new KmsContext object needed by a Context object.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>context</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="KmsContext.html" title="Mongo::Crypt::KmsContext (class)">Mongo::Crypt::KmsContext</a></span> | nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The KmsContext needed to fetch an AWS master key or nil, if no KmsContext is needed</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


843
844
845
846
847
848
849
850
851</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 843</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_ctx_next_kms_ctx'>ctx_next_kms_ctx</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_kms_ctx_p'>kms_ctx_p</span> <span class='op'>=</span> <span class='id identifier rubyid_mongocrypt_ctx_next_kms_ctx'>mongocrypt_ctx_next_kms_ctx</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_kms_ctx_p'>kms_ctx_p</span><span class='period'>.</span><span class='id identifier rubyid_null?'>null?</span>
    <span class='kw'>nil</span>
  <span class='kw'>else</span>
    <span class='const'><span class='object_link'><a href="KmsContext.html" title="Mongo::Crypt::KmsContext (class)">KmsContext</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="KmsContext.html#initialize-instance_method" title="Mongo::Crypt::KmsContext#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_kms_ctx_p'>kms_ctx_p</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ctx_setopt_algorithm-class_method">
  
    .<strong>ctx_setopt_algorithm</strong>(context, name)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Set the algorithm on the context</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>context</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The algorithm name. Valid values are:</p>
<ul><li>
<p>AEAD_AES_256_CBC_HMAC_SHA_512-Deterministic</p>
</li><li>
<p>AEAD_AES_256_CBC_HMAC_SHA_512-Random</p>
</li></ul>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If the operation failed</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


493
494
495
496
497</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 493</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_ctx_setopt_algorithm'>ctx_setopt_algorithm</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_check_ctx_status'>check_ctx_status</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_mongocrypt_ctx_setopt_algorithm'>mongocrypt_ctx_setopt_algorithm</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>1</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ctx_setopt_key_alt_names-class_method">
  
    .<strong>ctx_setopt_key_alt_names</strong>(context, key_alt_names)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Set multiple alternate key names on data key creation</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>context</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A DataKeyContext</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>key_alt_names</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>An array of alternate key names as strings</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If any of the alternate names are not valid UTF8 strings</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


456
457
458
459
460
461
462
463
464
465
466</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 456</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_ctx_setopt_key_alt_names'>ctx_setopt_key_alt_names</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='comma'>,</span> <span class='id identifier rubyid_key_alt_names'>key_alt_names</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_key_alt_names'>key_alt_names</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key_alt_name'>key_alt_name</span><span class='op'>|</span>
    <span class='id identifier rubyid_key_alt_name_bson'>key_alt_name_bson</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='symbol'>:keyAltName</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_key_alt_name'>key_alt_name</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_to_bson'>to_bson</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>

    <span class='const'><span class='object_link'><a href="Binary.html" title="Mongo::Crypt::Binary (class)">Binary</a></span></span><span class='period'>.</span><span class='id identifier rubyid_wrap_string'><span class='object_link'><a href="Binary.html#wrap_string-class_method" title="Mongo::Crypt::Binary.wrap_string (method)">wrap_string</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_key_alt_name_bson'>key_alt_name_bson</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key_alt_name_p'>key_alt_name_p</span><span class='op'>|</span>
      <span class='id identifier rubyid_check_ctx_status'>check_ctx_status</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='rparen'>)</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_mongocrypt_ctx_setopt_key_alt_name'>mongocrypt_ctx_setopt_key_alt_name</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_key_alt_name_p'>key_alt_name_p</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ctx_setopt_key_id-class_method">
  
    .<strong>ctx_setopt_key_id</strong>(context, key_id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Sets the key id option on an explicit encryption context.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>context</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Explicit encryption context</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>key_id</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The key id</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If the operation failed</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


423
424
425
426
427
428
429</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 423</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_ctx_setopt_key_id'>ctx_setopt_key_id</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='comma'>,</span> <span class='id identifier rubyid_key_id'>key_id</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="Binary.html" title="Mongo::Crypt::Binary (class)">Binary</a></span></span><span class='period'>.</span><span class='id identifier rubyid_wrap_string'><span class='object_link'><a href="Binary.html#wrap_string-class_method" title="Mongo::Crypt::Binary.wrap_string (method)">wrap_string</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_key_id'>key_id</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key_id_p'>key_id_p</span><span class='op'>|</span>
    <span class='id identifier rubyid_check_ctx_status'>check_ctx_status</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_mongocrypt_ctx_setopt_key_id'>mongocrypt_ctx_setopt_key_id</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_key_id_p'>key_id_p</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ctx_setopt_master_key_aws-class_method">
  
    .<strong>ctx_setopt_master_key_aws</strong>(context, region, arn)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Configure the Context object to take a master key from AWS</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>context</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>region</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The AWS region (e.g. us-east-2)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>arn</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The master key Amazon Resource Name</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If the operation failed</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


524
525
526
527
528
529
530
531
532
533
534</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 524</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_ctx_setopt_master_key_aws'>ctx_setopt_master_key_aws</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='comma'>,</span> <span class='id identifier rubyid_region'>region</span><span class='comma'>,</span> <span class='id identifier rubyid_arn'>arn</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_check_ctx_status'>check_ctx_status</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_mongocrypt_ctx_setopt_masterkey_aws'>mongocrypt_ctx_setopt_masterkey_aws</span><span class='lparen'>(</span>
      <span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='comma'>,</span>
      <span class='id identifier rubyid_region'>region</span><span class='comma'>,</span>
      <span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span>
      <span class='id identifier rubyid_arn'>arn</span><span class='comma'>,</span>
      <span class='op'>-</span><span class='int'>1</span>
    <span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ctx_setopt_master_key_aws_endpoint-class_method">
  
    .<strong>ctx_setopt_master_key_aws_endpoint</strong>(context, endpoint)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Configure the Context object to take a masterk ey from AWS</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>context</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>endpoint</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The custom AWS master key endpoint</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If the operation failed</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


557
558
559
560
561
562
563
564
565</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 557</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_ctx_setopt_master_key_aws_endpoint'>ctx_setopt_master_key_aws_endpoint</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='comma'>,</span> <span class='id identifier rubyid_endpoint'>endpoint</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_check_ctx_status'>check_ctx_status</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_mongocrypt_ctx_setopt_masterkey_aws_endpoint'>mongocrypt_ctx_setopt_masterkey_aws_endpoint</span><span class='lparen'>(</span>
      <span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='comma'>,</span>
      <span class='id identifier rubyid_endpoint'>endpoint</span><span class='comma'>,</span>
      <span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span>
    <span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ctx_setopt_master_key_local-class_method">
  
    .<strong>ctx_setopt_master_key_local</strong>(context)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Tell the Context object to read the master key from local KMS options</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>context</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Context.html" title="Mongo::Crypt::Context (class)">Mongo::Crypt::Context</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If the operation failed</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


585
586
587
588
589</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 585</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_ctx_setopt_master_key_local'>ctx_setopt_master_key_local</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_check_ctx_status'>check_ctx_status</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_mongocrypt_ctx_setopt_masterkey_local'>mongocrypt_ctx_setopt_masterkey_local</span><span class='lparen'>(</span><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_ctx_p'>ctx_p</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="init-class_method">
  
    .<strong>init</strong>(handle)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Initialize the Mongo::Crypt::Handle object</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>handle</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Handle.html" title="Mongo::Crypt::Handle (class)">Mongo::Crypt::Handle</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If initialization fails</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


363
364
365
366
367</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 363</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_init'>init</span><span class='lparen'>(</span><span class='id identifier rubyid_handle'>handle</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_check_status'>check_status</span><span class='lparen'>(</span><span class='id identifier rubyid_handle'>handle</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_mongocrypt_init'>mongocrypt_init</span><span class='lparen'>(</span><span class='id identifier rubyid_handle'>handle</span><span class='period'>.</span><span class='id identifier rubyid_ref'>ref</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="kms_ctx_bytes_needed-class_method">
  
    .<strong>kms_ctx_bytes_needed</strong>(kms_context)  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Get the number of bytes needed by the KmsContext.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>kms_context</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="KmsContext.html" title="Mongo::Crypt::KmsContext (class)">Mongo::Crypt::KmsContext</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The number of bytes needed</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


925
926
927</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 925</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_kms_ctx_bytes_needed'>kms_ctx_bytes_needed</span><span class='lparen'>(</span><span class='id identifier rubyid_kms_context'>kms_context</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_mongocrypt_kms_ctx_bytes_needed'>mongocrypt_kms_ctx_bytes_needed</span><span class='lparen'>(</span><span class='id identifier rubyid_kms_context'>kms_context</span><span class='period'>.</span><span class='id identifier rubyid_kms_ctx_p'>kms_ctx_p</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="kms_ctx_endpoint-class_method">
  
    .<strong>kms_ctx_endpoint</strong>(kms_context)  &#x21d2; <tt>String | nil</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Get the hostname with which to connect over TLS to get information about the AWS master key.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>kms_context</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="KmsContext.html" title="Mongo::Crypt::KmsContext (class)">Mongo::Crypt::KmsContext</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String | nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The hostname, or nil if none exists</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If the response is not fed successfully</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


901
902
903
904
905
906
907
908
909
910</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 901</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_kms_ctx_endpoint'>kms_ctx_endpoint</span><span class='lparen'>(</span><span class='id identifier rubyid_kms_context'>kms_context</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_ptr'>ptr</span> <span class='op'>=</span> <span class='const'>FFI</span><span class='op'>::</span><span class='const'>MemoryPointer</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='int'>1</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_check_kms_ctx_status'>check_kms_ctx_status</span><span class='lparen'>(</span><span class='id identifier rubyid_kms_context'>kms_context</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_mongocrypt_kms_ctx_endpoint'>mongocrypt_kms_ctx_endpoint</span><span class='lparen'>(</span><span class='id identifier rubyid_kms_context'>kms_context</span><span class='period'>.</span><span class='id identifier rubyid_kms_ctx_p'>kms_ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_ptr'>ptr</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_str_ptr'>str_ptr</span> <span class='op'>=</span> <span class='id identifier rubyid_ptr'>ptr</span><span class='period'>.</span><span class='id identifier rubyid_read_pointer'>read_pointer</span>
  <span class='id identifier rubyid_str_ptr'>str_ptr</span><span class='period'>.</span><span class='id identifier rubyid_null?'>null?</span> <span class='op'>?</span> <span class='kw'>nil</span> <span class='op'>:</span> <span class='id identifier rubyid_str_ptr'>str_ptr</span><span class='period'>.</span><span class='id identifier rubyid_read_string'>read_string</span><span class='period'>.</span><span class='id identifier rubyid_force_encoding'>force_encoding</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="kms_ctx_feed-class_method">
  
    .<strong>kms_ctx_feed</strong>(kms_context, bytes)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Feed replies from the KMS back to libmongocrypt.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>kms_context</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="KmsContext.html" title="Mongo::Crypt::KmsContext (class)">Mongo::Crypt::KmsContext</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>bytes</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The data to feed to libmongocrypt</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If the response is not fed successfully</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


945
946
947
948
949
950
951</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 945</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_kms_ctx_feed'>kms_ctx_feed</span><span class='lparen'>(</span><span class='id identifier rubyid_kms_context'>kms_context</span><span class='comma'>,</span> <span class='id identifier rubyid_bytes'>bytes</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_check_kms_ctx_status'>check_kms_ctx_status</span><span class='lparen'>(</span><span class='id identifier rubyid_kms_context'>kms_context</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='const'><span class='object_link'><a href="Binary.html" title="Mongo::Crypt::Binary (class)">Binary</a></span></span><span class='period'>.</span><span class='id identifier rubyid_wrap_string'><span class='object_link'><a href="Binary.html#wrap_string-class_method" title="Mongo::Crypt::Binary.wrap_string (method)">wrap_string</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_bytes'>bytes</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_bytes_p'>bytes_p</span><span class='op'>|</span>
      <span class='id identifier rubyid_mongocrypt_kms_ctx_feed'>mongocrypt_kms_ctx_feed</span><span class='lparen'>(</span><span class='id identifier rubyid_kms_context'>kms_context</span><span class='period'>.</span><span class='id identifier rubyid_kms_ctx_p'>kms_ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_bytes_p'>bytes_p</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="kms_ctx_message-class_method">
  
    .<strong>kms_ctx_message</strong>(kms_context)  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Get the HTTP message needed to fetch the AWS KMS master key from a KmsContext object.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>kms_context</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="KmsContext.html" title="Mongo::Crypt::KmsContext (class)">Mongo::Crypt::KmsContext</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The HTTP message</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If the response is not fed successfully</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


872
873
874
875
876
877
878
879
880</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 872</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_kms_ctx_message'>kms_ctx_message</span><span class='lparen'>(</span><span class='id identifier rubyid_kms_context'>kms_context</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_binary'>binary</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Binary.html" title="Mongo::Crypt::Binary (class)">Binary</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Binary.html#initialize-instance_method" title="Mongo::Crypt::Binary#initialize (method)">new</a></span></span>

  <span class='id identifier rubyid_check_kms_ctx_status'>check_kms_ctx_status</span><span class='lparen'>(</span><span class='id identifier rubyid_kms_context'>kms_context</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_mongocrypt_kms_ctx_message'>mongocrypt_kms_ctx_message</span><span class='lparen'>(</span><span class='id identifier rubyid_kms_context'>kms_context</span><span class='period'>.</span><span class='id identifier rubyid_kms_ctx_p'>kms_ctx_p</span><span class='comma'>,</span> <span class='id identifier rubyid_binary'>binary</span><span class='period'>.</span><span class='id identifier rubyid_ref'>ref</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_binary'>binary</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_binary_data-class_method">
  
    .<strong>mongocrypt_binary_data</strong>(binary)  &#x21d2; <tt>FFI::Pointer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Get the pointer to the underlying data for the mongocrypt_binary_t.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>binary</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to the data array.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


102</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 102</span>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbol'>:mongocrypt_binary_data</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:pointer</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_binary_destroy-class_method">
  
    .<strong>mongocrypt_binary_destroy</strong>(binary)  &#x21d2; <tt>nil</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Destroy the mongocrypt_binary_t object.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>binary</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Always nil.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


118</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 118</span>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbol'>:mongocrypt_binary_destroy</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:void</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_binary_len-class_method">
  
    .<strong>mongocrypt_binary_len</strong>(binary)  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Get the length of the underlying data array.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>binary</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The length of the data array.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


110</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 110</span>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbol'>:mongocrypt_binary_len</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:int</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_binary_new-class_method">
  
    .<strong>mongocrypt_binary_new</strong>  &#x21d2; <tt>FFI::Pointer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Creates a new mongocrypt_binary_t object (a non-owning view of a byte</p>

<pre class="code ruby"><code class="ruby">array).
</code></pre>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to the newly-created mongocrypt_binary_t object.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


78</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 78</span>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbol'>:mongocrypt_binary_new</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:pointer</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_binary_new_from_data-class_method">
  
    .<strong>mongocrypt_binary_new_from_data</strong>(data, len)  &#x21d2; <tt>FFI::Pointer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Create a new mongocrypt_binary_t object that maintains a pointer to</p>

<pre class="code ruby"><code class="ruby">the specified byte array.
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>data</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to an array of bytes; the data is not copied and must outlive the mongocrypt_binary_t object.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>len</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The length of the array argument.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to the newly-created mongocrypt_binary_t object.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


90
91
92
93
94</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 90</span>

<span class='id identifier rubyid_attach_function'>attach_function</span><span class='lparen'>(</span>
  <span class='symbol'>:mongocrypt_binary_new_from_data</span><span class='comma'>,</span>
  <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:int</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='symbol'>:pointer</span>
<span class='rparen'>)</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_ctx_datakey_init-class_method">
  
    .<strong>mongocrypt_ctx_datakey_init</strong>(ctx)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>Before calling this method, master key options must be set. Set AWS master key by calling mongocrypt_ctx_setopt_masterkey_aws and mongocrypt_ctx_setopt_masterkey_aws_endpoint. Set local master key by calling mongocrypt_ctx_setopt_masterkey_local.</p>
</div>
  </div>


<p>Initializes the ctx to create a data key.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ctx</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Whether the initialization was successful.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


601</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 601</span>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbol'>:mongocrypt_ctx_datakey_init</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:bool</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_ctx_decrypt_init-class_method">
  
    .<strong>mongocrypt_ctx_decrypt_init</strong>(ctx, doc)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Initializes the ctx for auto-decryption.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ctx</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>doc</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object that references the document to be decrypted as a BSON binary string.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Whether the initialization was successful.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


693</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 693</span>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbol'>:mongocrypt_ctx_decrypt_init</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:bool</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_ctx_destroy-class_method">
  
    .<strong>mongocrypt_ctx_destroy</strong>(ctx)  &#x21d2; <tt>nil</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Destroy the reference to the mongocrypt_ctx_t object.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ctx</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Always nil.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1034</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 1034</span>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbol'>:mongocrypt_ctx_destroy</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:void</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_ctx_encrypt_init-class_method">
  
    .<strong>mongocrypt_ctx_encrypt_init</strong>(ctx, db, db_len, cmd)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>This method expects the passed-in BSON to be in the format: { v: BSON value to decrypt }.</p>
</div>
  </div>


<p>Initializes the ctx for auto-encryption.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ctx</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>db</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The database name.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>db_len</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The length of the database name argument (or -1 for a null-terminated string).</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>cmd</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object that references the database command as a binary string.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Whether the initialization was successful.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


627
628
629
630
631</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 627</span>

<span class='id identifier rubyid_attach_function'>attach_function</span><span class='lparen'>(</span>
  <span class='symbol'>:mongocrypt_ctx_encrypt_init</span><span class='comma'>,</span>
  <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:string</span><span class='comma'>,</span> <span class='symbol'>:int</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='symbol'>:bool</span>
<span class='rparen'>)</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_ctx_explicit_decrypt_init-class_method">
  
    .<strong>mongocrypt_ctx_explicit_decrypt_init</strong>(ctx, msg)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Initializes the ctx for explicit decryption.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ctx</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>msg</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object that references the message to be decrypted as a BSON binary string.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Whether the initialization was successful.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


719
720
721
722
723</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 719</span>

<span class='id identifier rubyid_attach_function'>attach_function</span><span class='lparen'>(</span>
  <span class='symbol'>:mongocrypt_ctx_explicit_decrypt_init</span><span class='comma'>,</span>
  <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='symbol'>:bool</span>
<span class='rparen'>)</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_ctx_explicit_encrypt_init-class_method">
  
    .<strong>mongocrypt_ctx_explicit_encrypt_init</strong>(ctx, msg)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>Before calling this method, set a key_id, key_alt_name (optional), and encryption algorithm using the following methods: mongocrypt_ctx_setopt_key_id, mongocrypt_ctx_setopt_key_alt_name, and mongocrypt_ctx_setopt_algorithm.</p>
</div>
  </div>


<p>Initializes the ctx for explicit encryption.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ctx</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>msg</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object that references the message to be encrypted as a binary string.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Whether the initialization was successful.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


663
664
665
666
667</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 663</span>

<span class='id identifier rubyid_attach_function'>attach_function</span><span class='lparen'>(</span>
  <span class='symbol'>:mongocrypt_ctx_explicit_encrypt_init</span><span class='comma'>,</span>
  <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='symbol'>:bool</span>
<span class='rparen'>)</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_ctx_finalize-class_method">
  
    .<strong>mongocrypt_ctx_finalize</strong>(ctx, op_bson)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Perform the final encryption or decryption and return a BSON document.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ctx</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>op_bson</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>(out param) A pointer to a mongocrypt_binary_t object that will have a reference to the final encrypted BSON document.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A boolean indicating the success of the operation.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1007</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 1007</span>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbol'>:mongocrypt_ctx_finalize</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:void</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_ctx_mongo_done-class_method">
  
    .<strong>mongocrypt_ctx_mongo_done</strong>(ctx)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Indicate to libmongocrypt that the driver is done feeding replies.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ctx</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A boolean indicating the success of the operation.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


827</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 827</span>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbol'>:mongocrypt_ctx_mongo_done</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:bool</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_ctx_mongo_feed-class_method">
  
    .<strong>mongocrypt_ctx_mongo_feed</strong>(ctx, reply)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Feed a BSON reply to libmongocrypt.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ctx</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>reply</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A mongocrypt_binary_t object that references the BSON reply to feed to libmongocrypt.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A boolean indicating the success of the operation.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


803</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 803</span>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbol'>:mongocrypt_ctx_mongo_feed</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:bool</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_ctx_mongo_next_kms_ctx-class_method">
  
    .<strong>mongocrypt_ctx_mongo_next_kms_ctx</strong>(ctx)  &#x21d2; <tt>FFI::Pointer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Return a pointer to a mongocrypt_kms_ctx_t object or NULL.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ctx</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_kms_ctx_t object.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


835</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 835</span>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbol'>:mongocrypt_ctx_next_kms_ctx</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:pointer</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_ctx_mongo_op-class_method">
  
    .<strong>mongocrypt_ctx_mongo_op</strong>(ctx, op_bson)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Get a BSON operation for the driver to run against the MongoDB</p>

<pre class="code ruby"><code class="ruby">collection, the key vault database, or mongocryptd.
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ctx</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>op_bson</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>(out param) A pointer to a mongocrypt_binary_t object that will have a reference to the BSON operation written to it by libmongocrypt.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A boolean indicating the success of the operation.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


771</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 771</span>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbol'>:mongocrypt_ctx_mongo_op</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:bool</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_ctx_new-class_method">
  
    .<strong>mongocrypt_ctx_new</strong>(crypt)  &#x21d2; <tt>FFI::Pointer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Create a new mongocrypt_ctx_t object (a wrapper for the libmongocrypt</p>

<pre class="code ruby"><code class="ruby">state machine).
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>crypt</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_t object.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A new mongocrypt_ctx_t object.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


394</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 394</span>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbol'>:mongocrypt_ctx_new</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:pointer</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_ctx_setopt_algorithm-class_method">
  
    .<strong>mongocrypt_ctx_setopt_algorithm</strong>(ctx, algorithm, len)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>Do not initialize ctx before calling this method.</p>
</div>
  </div>


<p>Set the algorithm used for explicit encryption.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ctx</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>algorithm</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The algorithm name. Valid values are:</p>
<ul><li>
<p>AEAD_AES_256_CBC_HMAC_SHA_512-Deterministic</p>
</li><li>
<p>AEAD_AES_256_CBC_HMAC_SHA_512-Random</p>
</li></ul>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>len</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The length of the algorithm string.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Whether the option was successfully set.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


479
480
481
482
483</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 479</span>

<span class='id identifier rubyid_attach_function'>attach_function</span><span class='lparen'>(</span>
  <span class='symbol'>:mongocrypt_ctx_setopt_algorithm</span><span class='comma'>,</span>
  <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:string</span><span class='comma'>,</span> <span class='symbol'>:int</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='symbol'>:bool</span>
<span class='rparen'>)</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_ctx_setopt_key_alt_name-class_method">
  
    .<strong>mongocrypt_ctx_setopt_key_alt_name</strong>(ctx, binary)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>Do not initialize ctx before calling this method.</p>
</div>
  </div>


<p>When creating a data key, set an alternate name on that key. When</p>

<pre class="code ruby"><code class="ruby">performing explicit encryption, specifying which data key to use for
encryption based on its keyAltName field.
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ctx</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>binary</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object that references a BSON document in the format { keyAltName: &lt;BSON UTF8 value&gt; }.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Whether the alternative name was successfully set.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


443
444
445
446
447</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 443</span>

<span class='id identifier rubyid_attach_function'>attach_function</span><span class='lparen'>(</span>
  <span class='symbol'>:mongocrypt_ctx_setopt_key_alt_name</span><span class='comma'>,</span>
  <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='symbol'>:bool</span>
<span class='rparen'>)</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_ctx_setopt_key_id-class_method">
  
    .<strong>mongocrypt_ctx_setopt_key_id</strong>(ctx, key_id)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>Do not initialize ctx before calling this method.</p>
</div>
  </div>


<p>Set the key id used for explicit encryption.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ctx</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>key_id</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object that references the 16-byte key-id.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Whether the option was successfully set.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


415</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 415</span>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbol'>:mongocrypt_ctx_setopt_key_id</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:bool</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_ctx_setopt_masterkey_aws-class_method">
  
    .<strong>mongocrypt_ctx_setopt_masterkey_aws</strong>(ctx, region, region_len, arn, arn_len)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Configure the ctx to take a master key from AWS.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ctx</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_ctx_object.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>region</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The AWS region.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>region_len</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The length of the region string (or -1 for a null-terminated string).</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>arn</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The Amazon Resource Name (ARN) of the mater key.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>arn_len</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The length of the ARN (or -1 for a null-terminated string).</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Returns whether the option was set successfully.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


511
512
513
514
515</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 511</span>

<span class='id identifier rubyid_attach_function'>attach_function</span><span class='lparen'>(</span>
  <span class='symbol'>:mongocrypt_ctx_setopt_masterkey_aws</span><span class='comma'>,</span>
  <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:string</span><span class='comma'>,</span> <span class='symbol'>:int</span><span class='comma'>,</span> <span class='symbol'>:string</span><span class='comma'>,</span> <span class='symbol'>:int</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='symbol'>:bool</span>
<span class='rparen'>)</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_ctx_setopt_masterkey_aws_endpoint-class_method">
  
    .<strong>mongocrypt_ctx_setopt_masterkey_aws_endpoint</strong>(ctx, endpoint, endpoint_len)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Set a custom endpoint at which to fetch the AWS master key</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ctx</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>endpoint</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The custom endpoint.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>endpoint_len</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The length of the endpoint string (or -1 for a null-terminated string).</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Returns whether the option was set successfully.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


545
546
547
548
549</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 545</span>

<span class='id identifier rubyid_attach_function'>attach_function</span><span class='lparen'>(</span>
  <span class='symbol'>:mongocrypt_ctx_setopt_masterkey_aws_endpoint</span><span class='comma'>,</span>
  <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:string</span><span class='comma'>,</span> <span class='symbol'>:int</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='symbol'>:bool</span>
<span class='rparen'>)</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_ctx_setopt_masterkey_local-class_method">
  
    .<strong>mongocrypt_ctx_setopt_masterkey_local</strong>(ctx)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>Do not initialize ctx before calling this method.</p>
</div>
  </div>


<p>Set the ctx to take a local master key.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ctx</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Whether the option was successfully set.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


574
575
576
577
578</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 574</span>

<span class='id identifier rubyid_attach_function'>attach_function</span><span class='lparen'>(</span>
  <span class='symbol'>:mongocrypt_ctx_setopt_masterkey_local</span><span class='comma'>,</span>
  <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='symbol'>:bool</span>
<span class='rparen'>)</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_ctx_state-class_method">
  
    .<strong>mongocrypt_ctx_state</strong>(ctx)  &#x21d2; <tt><span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Get the current state of the ctx.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ctx</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The current state, will be one of the values defined by the mongocrypt_ctx_state enum.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


759</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 759</span>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbol'>:mongocrypt_ctx_state</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:mongocrypt_ctx_state</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_ctx_status-class_method">
  
    .<strong>mongocrypt_ctx_status</strong>(ctx, status)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Set the status information from the mongocrypt_ctx_t object on the</p>

<pre class="code ruby"><code class="ruby">mongocrypt_status_t object.
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ctx</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>status</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_status_t object.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Whether the status was successfully set.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


404</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 404</span>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbol'>:mongocrypt_ctx_status</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:bool</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_destroy-class_method">
  
    .<strong>mongocrypt_destroy</strong>(crypt)  &#x21d2; <tt>nil</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Destroy the reference the mongocrypt_t object.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>crypt</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_t object.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Always nil.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


385</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 385</span>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbol'>:mongocrypt_destroy</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:void</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_init-class_method">
  
    .<strong>mongocrypt_init</strong>(crypt)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Initialize the mongocrypt_t object.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>crypt</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_t object.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Returns whether the crypt was initialized successfully.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


356</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 356</span>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbol'>:mongocrypt_init</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:bool</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_kms_ctx_bytes_needed-class_method">
  
    .<strong>mongocrypt_kms_ctx_bytes_needed</strong>(kms)  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Get the number of bytes needed by the KMS context.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>kms</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The mongocrypt_kms_ctx_t object.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The number of bytes needed.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


918</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 918</span>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbol'>:mongocrypt_kms_ctx_bytes_needed</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:int</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_kms_ctx_done-class_method">
  
    .<strong>mongocrypt_kms_ctx_done</strong>(ctx)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Indicate to libmongocrypt that it will receive no more replies from</p>

<pre class="code ruby"><code class="ruby">mongocrypt_kms_ctx_t objects.
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ctx</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_ctx_t object.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Whether the operation was successful.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


985</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 985</span>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbol'>:mongocrypt_ctx_kms_done</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:bool</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_kms_ctx_endpoint-class_method">
  
    .<strong>mongocrypt_kms_ctx_endpoint</strong>(kms, endpoint)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Get the hostname with which to connect over TLS to get information about</p>

<pre class="code ruby"><code class="ruby">the AWS master key.
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>kms</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_kms_ctx_t object.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>endpoint</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>(out param) A pointer to which the endpoint string will be written by libmongocrypt.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Whether the operation was successful.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


891</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 891</span>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbol'>:mongocrypt_kms_ctx_endpoint</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:bool</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_kms_ctx_feed-class_method">
  
    .<strong>mongocrypt_kms_ctx_feed</strong>(kms, bytes)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Feed replies from the KMS back to libmongocrypt.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>kms</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to the mongocrypt_kms_ctx_t object.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>bytes</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object that references the response from the KMS.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Whether the operation was successful.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


937</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 937</span>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbol'>:mongocrypt_kms_ctx_feed</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:bool</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_kms_ctx_message-class_method">
  
    .<strong>mongocrypt_kms_ctx_message</strong>(kms, msg)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Get the message needed to fetch the AWS KMS master key.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>kms</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Pointer to the mongocrypt_kms_ctx_t object</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>msg</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>(outparam) Pointer to a mongocrypt_binary_t object that will have the location of the message written to it by libmongocrypt.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Whether the operation is successful.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


862</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 862</span>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbol'>:mongocrypt_kms_ctx_message</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:bool</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_kms_ctx_status-class_method">
  
    .<strong>mongocrypt_kms_ctx_status</strong>(kms, status)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Write status information about the mongocrypt_kms_ctx_t object</p>

<pre class="code ruby"><code class="ruby">to the mongocrypt_status_t object.
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>kms</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to the mongocrypt_kms_ctx_t object.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>status</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_status_t object.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Whether the operation was successful.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


961</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 961</span>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbol'>:mongocrypt_kms_ctx_status</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:bool</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_setopt_crypto_hooks-class_method">
  
    .<strong>mongocrypt_setopt_crypto_hooks</strong>(crypt, aes_enc_fn, aes_dec_fn, random_fn, sha_512_fn, sha_256_fn, hash_fn, ctx = nil)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Set crypto hooks on the provided mongocrypt object.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>crypt</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_t object.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>aes_enc_fn</span>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>An AES encryption method.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>aes_dec_fn</span>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>An AES decryption method.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>random_fn</span>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A random method.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>sha_512_fn</span>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A HMAC SHA-512 method.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>sha_256_fn</span>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A HMAC SHA-256 method.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>hash_fn</span>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A SHA-256 hash method.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>ctx</span>
      
      
        <span class='type'>(<tt>FFI::Pointer | nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>An optional pointer to a context object that may have been set when hooks were enabled.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Whether setting this option succeeded.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1139
1140
1141
1142
1143
1144
1145
1146
1147
1148
1149
1150
1151
1152</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 1139</span>

<span class='id identifier rubyid_attach_function'>attach_function</span><span class='lparen'>(</span>
  <span class='symbol'>:mongocrypt_setopt_crypto_hooks</span><span class='comma'>,</span>
  <span class='lbracket'>[</span>
    <span class='symbol'>:pointer</span><span class='comma'>,</span>
    <span class='symbol'>:mongocrypt_crypto_fn</span><span class='comma'>,</span>
    <span class='symbol'>:mongocrypt_crypto_fn</span><span class='comma'>,</span>
    <span class='symbol'>:mongocrypt_random_fn</span><span class='comma'>,</span>
    <span class='symbol'>:mongocrypt_hmac_fn</span><span class='comma'>,</span>
    <span class='symbol'>:mongocrypt_hmac_fn</span><span class='comma'>,</span>
    <span class='symbol'>:mongocrypt_hash_fn</span><span class='comma'>,</span>
    <span class='symbol'>:pointer</span>
  <span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='symbol'>:bool</span>
<span class='rparen'>)</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_setopt_kms_provider_aws-class_method">
  
    .<strong>mongocrypt_setopt_kms_provider_aws</strong>(crypt, aws_access_key_id, aws_access_key_id_len, aws_secret_access_key, aws_secret_access_key_len)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Configure mongocrypt_t object with AWS KMS provider options.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>crypt</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_t object.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>aws_access_key_id</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The AWS access key id.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>aws_access_key_id_len</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The length of the AWS access key string (or -1 for a null-terminated string).</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>aws_secret_access_key</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The AWS secret access key.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>aws_secret_access_key_len</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The length of the AWS secret access key (or -1 for a null-terminated string).</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Returns whether the option was set successfully.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


268
269
270
271
272</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 268</span>

<span class='id identifier rubyid_attach_function'>attach_function</span><span class='lparen'>(</span>
  <span class='symbol'>:mongocrypt_setopt_kms_provider_aws</span><span class='comma'>,</span>
  <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:string</span><span class='comma'>,</span> <span class='symbol'>:int</span><span class='comma'>,</span> <span class='symbol'>:string</span><span class='comma'>,</span> <span class='symbol'>:int</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='symbol'>:bool</span>
<span class='rparen'>)</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_setopt_kms_provider_local-class_method">
  
    .<strong>mongocrypt_setopt_kms_provider_local</strong>(crypt, key)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Configure mongocrypt_t object to take local KSM provider options.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>crypt</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_t object.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object that references the 96-byte local master key.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Returns whether the option was set successfully.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


303
304
305
306
307</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 303</span>

<span class='id identifier rubyid_attach_function'>attach_function</span><span class='lparen'>(</span>
  <span class='symbol'>:mongocrypt_setopt_kms_provider_local</span><span class='comma'>,</span>
  <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='symbol'>:bool</span>
<span class='rparen'>)</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_setopt_log_handler-class_method">
  
    .<strong>mongocrypt_setopt_log_handler</strong>(crypt, log_fn, log_ctx = nil)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Set the handler on the mongocrypt_t object to be called every time</p>

<pre class="code ruby"><code class="ruby">libmongocrypt logs a message.
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>crypt</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_t object.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>log_fn</span>
      
      
        <span class='type'>(<tt>Method</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A logging callback method.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>log_ctx</span>
      
      
        <span class='type'>(<tt>FFI::Pointer | nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>An optional pointer to a context to be passed into the log callback on every invocation.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Whether setting the callback was successful.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


238
239
240
241
242</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 238</span>

<span class='id identifier rubyid_attach_function'>attach_function</span><span class='lparen'>(</span>
  <span class='symbol'>:mongocrypt_setopt_log_handler</span><span class='comma'>,</span>
  <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:mongocrypt_log_fn_t</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='symbol'>:bool</span>
<span class='rparen'>)</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_setopt_schema_map-class_method">
  
    .<strong>mongocrypt_setopt_schema_map</strong>(crypt, schema_map)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Sets a local schema map for encryption.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>crypt</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_t object.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>schema_map</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_binary_t. object that references the schema map as a BSON binary string.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Returns whether the option was set successfully.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


331</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 331</span>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbol'>:mongocrypt_setopt_schema_map</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:bool</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_status-class_method">
  
    .<strong>mongocrypt_status</strong>(crypt, status)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Set the status information from the mongocrypt_t object on the</p>

<pre class="code ruby"><code class="ruby">mongocrypt_status_t object.
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>crypt</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_t object.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>status</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_status_t object.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Whether the status was successfully set.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


377</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 377</span>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbol'>:mongocrypt_status</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:bool</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_status_code-class_method">
  
    .<strong>mongocrypt_status_code</strong>(status)  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Return the status error code.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>status</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_status_t.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The status code.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


166</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 166</span>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbol'>:mongocrypt_status_code</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:int</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_status_destroy-class_method">
  
    .<strong>mongocrypt_status_destroy</strong>(status)  &#x21d2; <tt>nil</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Destroys the reference to the mongocrypt_status_t object.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>status</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_status_t.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Always nil.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


192</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 192</span>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbol'>:mongocrypt_status_destroy</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:void</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_status_message-class_method">
  
    .<strong>mongocrypt_status_message</strong>(status, len = nil)  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Returns the status message.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>status</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_status_t.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>len</span>
      
      
        <span class='type'>(<tt>FFI::Pointer | nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>(out param) An optional pointer to a uint32, where the length of the retun string will be written.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The status message.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


176</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 176</span>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbol'>:mongocrypt_status_message</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:string</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_status_new-class_method">
  
    .<strong>mongocrypt_status_new</strong>  &#x21d2; <tt>FFI::Pointer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Create a new mongocrypt_status_t object.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to the new mongocrypt_status_ts.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


132</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 132</span>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbol'>:mongocrypt_status_new</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:pointer</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_status_ok-class_method">
  
    .<strong>mongocrypt_status_ok</strong>(status)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Returns whether the status is ok or an error.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>status</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_status_t.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Whether the status is ok.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


184</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 184</span>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbol'>:mongocrypt_status_ok</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:bool</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_status_set-class_method">
  
    .<strong>mongocrypt_status_set</strong>(status, type, code, message, len)  &#x21d2; <tt>nil</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Set a message, type, and code on an existing status.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>status</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_status_t.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>type</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The status type; possible values are defined by the status_type enum.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>code</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The status code.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>message</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The status message.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>len</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The length of the message argument (or -1 for a null-terminated string).</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Always nil.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


146
147
148
149
150</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 146</span>

<span class='id identifier rubyid_attach_function'>attach_function</span><span class='lparen'>(</span>
  <span class='symbol'>:mongocrypt_status_set</span><span class='comma'>,</span>
  <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:status_type</span><span class='comma'>,</span> <span class='symbol'>:int</span><span class='comma'>,</span> <span class='symbol'>:string</span><span class='comma'>,</span> <span class='symbol'>:int</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='symbol'>:void</span>
<span class='rparen'>)</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_status_type-class_method">
  
    .<strong>mongocrypt_status_type</strong>(status)  &#x21d2; <tt><span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Indicates the status type.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>status</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_status_t.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The status type (as defined by the status_type enum).</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


158</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 158</span>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbol'>:mongocrypt_status_type</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:status_type</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_version-class_method">
  
    .<strong>mongocrypt_version</strong>(len)  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Returns the version string of the libmongocrypt library.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>len</span>
      
      
        <span class='type'>(<tt>FFI::Pointer | nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>(out param) An optional pointer to a uint8 that will reference the length of the returned string.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A version string for libmongocrypt.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


69</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 69</span>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbol'>:mongocrypt_version</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:string</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ongocrypt_new-class_method">
  
    .<strong>ongocrypt_new</strong>  &#x21d2; <tt>FFI::Pointer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Creates a new mongocrypt_t object.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a new mongocrypt_t object.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


226</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 226</span>

<span class='id identifier rubyid_attach_function'>attach_function</span> <span class='symbol'>:mongocrypt_new</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:pointer</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="setopt_crypto_hooks-class_method">
  
    .<strong>setopt_crypto_hooks</strong>(handle, aes_encrypt_cb, aes_decrypt_cb, random_cb, hmac_sha_512_cb, hmac_sha_256_cb, hmac_hash_cb)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Set crypto callbacks on the Handle</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>handle</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Handle.html" title="Mongo::Crypt::Handle (class)">Mongo::Crypt::Handle</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>aes_encrypt_cb</span>
      
      
        <span class='type'>(<tt>Method</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>An AES encryption method</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>aes_decrypt_cb</span>
      
      
        <span class='type'>(<tt>Method</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A AES decryption method</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>random_cb</span>
      
      
        <span class='type'>(<tt>Method</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A method that returns a string of random bytes</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>hmac_sha_512_cb</span>
      
      
        <span class='type'>(<tt>Method</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A HMAC SHA-512 method</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>hmac_sha_256_cb</span>
      
      
        <span class='type'>(<tt>Method</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A HMAC SHA-256 method</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>hmac_hash_cb</span>
      
      
        <span class='type'>(<tt>Method</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A SHA-256 hash method</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If the callbacks aren&#39;t set successfully</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1165
1166
1167
1168
1169
1170
1171
1172
1173
1174
1175</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 1165</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_setopt_crypto_hooks'>setopt_crypto_hooks</span><span class='lparen'>(</span><span class='id identifier rubyid_handle'>handle</span><span class='comma'>,</span>
  <span class='id identifier rubyid_aes_encrypt_cb'>aes_encrypt_cb</span><span class='comma'>,</span> <span class='id identifier rubyid_aes_decrypt_cb'>aes_decrypt_cb</span><span class='comma'>,</span> <span class='id identifier rubyid_random_cb'>random_cb</span><span class='comma'>,</span>
  <span class='id identifier rubyid_hmac_sha_512_cb'>hmac_sha_512_cb</span><span class='comma'>,</span> <span class='id identifier rubyid_hmac_sha_256_cb'>hmac_sha_256_cb</span><span class='comma'>,</span> <span class='id identifier rubyid_hmac_hash_cb'>hmac_hash_cb</span>
<span class='rparen'>)</span>
  <span class='id identifier rubyid_check_status'>check_status</span><span class='lparen'>(</span><span class='id identifier rubyid_handle'>handle</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_mongocrypt_setopt_crypto_hooks'>mongocrypt_setopt_crypto_hooks</span><span class='lparen'>(</span><span class='id identifier rubyid_handle'>handle</span><span class='period'>.</span><span class='id identifier rubyid_ref'>ref</span><span class='comma'>,</span>
      <span class='id identifier rubyid_aes_encrypt_cb'>aes_encrypt_cb</span><span class='comma'>,</span> <span class='id identifier rubyid_aes_decrypt_cb'>aes_decrypt_cb</span><span class='comma'>,</span> <span class='id identifier rubyid_random_cb'>random_cb</span><span class='comma'>,</span>
      <span class='id identifier rubyid_hmac_sha_512_cb'>hmac_sha_512_cb</span><span class='comma'>,</span> <span class='id identifier rubyid_hmac_sha_256_cb'>hmac_sha_256_cb</span><span class='comma'>,</span> <span class='id identifier rubyid_hmac_hash_cb'>hmac_hash_cb</span><span class='comma'>,</span> <span class='kw'>nil</span>
    <span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="setopt_kms_provider_aws-class_method">
  
    .<strong>setopt_kms_provider_aws</strong>(handle, aws_access_key, aws_secret_access_key)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Configure the Handle object with AWS KMS provider options</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>handle</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Handle.html" title="Mongo::Crypt::Handle (class)">Mongo::Crypt::Handle</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>aws_access_key</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The AWS access key</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>aws_secret_access_key</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The AWS secret access key</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If the option is not set successfully</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


281
282
283
284
285
286
287
288
289
290
291
292
293</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 281</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_setopt_kms_provider_aws'>setopt_kms_provider_aws</span><span class='lparen'>(</span><span class='id identifier rubyid_handle'>handle</span><span class='comma'>,</span>
  <span class='id identifier rubyid_aws_access_key'>aws_access_key</span><span class='comma'>,</span> <span class='id identifier rubyid_aws_secret_access_key'>aws_secret_access_key</span>
<span class='rparen'>)</span>
  <span class='id identifier rubyid_check_status'>check_status</span><span class='lparen'>(</span><span class='id identifier rubyid_handle'>handle</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_mongocrypt_setopt_kms_provider_aws'>mongocrypt_setopt_kms_provider_aws</span><span class='lparen'>(</span>
      <span class='id identifier rubyid_handle'>handle</span><span class='period'>.</span><span class='id identifier rubyid_ref'>ref</span><span class='comma'>,</span>
      <span class='id identifier rubyid_aws_access_key'>aws_access_key</span><span class='comma'>,</span>
      <span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span>
      <span class='id identifier rubyid_aws_secret_access_key'>aws_secret_access_key</span><span class='comma'>,</span>
      <span class='op'>-</span><span class='int'>1</span>
    <span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="setopt_kms_provider_local-class_method">
  
    .<strong>setopt_kms_provider_local</strong>(handle, master_key)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Set local KMS provider options on the Mongo::Crypt::Handle object</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>handle</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Handle.html" title="Mongo::Crypt::Handle (class)">Mongo::Crypt::Handle</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>master_key</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The 96-byte local KMS master key</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If the option is not set successfully</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


315
316
317
318
319
320
321</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 315</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_setopt_kms_provider_local'>setopt_kms_provider_local</span><span class='lparen'>(</span><span class='id identifier rubyid_handle'>handle</span><span class='comma'>,</span> <span class='id identifier rubyid_master_key'>master_key</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="Binary.html" title="Mongo::Crypt::Binary (class)">Binary</a></span></span><span class='period'>.</span><span class='id identifier rubyid_wrap_string'><span class='object_link'><a href="Binary.html#wrap_string-class_method" title="Mongo::Crypt::Binary.wrap_string (method)">wrap_string</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_master_key'>master_key</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_master_key_p'>master_key_p</span><span class='op'>|</span>
    <span class='id identifier rubyid_check_status'>check_status</span><span class='lparen'>(</span><span class='id identifier rubyid_handle'>handle</span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_mongocrypt_setopt_kms_provider_local'>mongocrypt_setopt_kms_provider_local</span><span class='lparen'>(</span><span class='id identifier rubyid_handle'>handle</span><span class='period'>.</span><span class='id identifier rubyid_ref'>ref</span><span class='comma'>,</span> <span class='id identifier rubyid_master_key_p'>master_key_p</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="setopt_log_handler-class_method">
  
    .<strong>setopt_log_handler</strong>(handle, log_callback)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Set the logger callback function on the Mongo::Crypt::Handle object</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>handle</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Handle.html" title="Mongo::Crypt::Handle (class)">Mongo::Crypt::Handle</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>log_callback</span>
      
      
        <span class='type'>(<tt>Method</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If the callback is not set successfully</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


250
251
252
253
254</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 250</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_setopt_log_handler'>setopt_log_handler</span><span class='lparen'>(</span><span class='id identifier rubyid_handle'>handle</span><span class='comma'>,</span> <span class='id identifier rubyid_log_callback'>log_callback</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_check_status'>check_status</span><span class='lparen'>(</span><span class='id identifier rubyid_handle'>handle</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_mongocrypt_setopt_log_handler'>mongocrypt_setopt_log_handler</span><span class='lparen'>(</span><span class='id identifier rubyid_handle'>handle</span><span class='comma'>,</span> <span class='id identifier rubyid_log_callback'>log_callback</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="setopt_schema_map-class_method">
  
    .<strong>setopt_schema_map</strong>(handle, schema_map_doc)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Set schema map on the Mongo::Crypt::Handle object</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>handle</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Handle.html" title="Mongo::Crypt::Handle (class)">Mongo::Crypt::Handle</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>schema_map_doc</span>
      
      
        <span class='type'>(<tt>BSON::Document</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The schema map as a BSON::Document object</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If the schema map is not set successfully</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


340
341
342
343
344
345
346
347
348</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 340</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_setopt_schema_map'>setopt_schema_map</span><span class='lparen'>(</span><span class='id identifier rubyid_handle'>handle</span><span class='comma'>,</span> <span class='id identifier rubyid_schema_map_doc'>schema_map_doc</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_validate_document'>validate_document</span><span class='lparen'>(</span><span class='id identifier rubyid_schema_map_doc'>schema_map_doc</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_schema_map_doc'>schema_map_doc</span><span class='period'>.</span><span class='id identifier rubyid_to_bson'>to_bson</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
  <span class='const'><span class='object_link'><a href="Binary.html" title="Mongo::Crypt::Binary (class)">Binary</a></span></span><span class='period'>.</span><span class='id identifier rubyid_wrap_string'><span class='object_link'><a href="Binary.html#wrap_string-class_method" title="Mongo::Crypt::Binary.wrap_string (method)">wrap_string</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_data_p'>data_p</span><span class='op'>|</span>
    <span class='id identifier rubyid_check_status'>check_status</span><span class='lparen'>(</span><span class='id identifier rubyid_handle'>handle</span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_mongocrypt_setopt_schema_map'>mongocrypt_setopt_schema_map</span><span class='lparen'>(</span><span class='id identifier rubyid_handle'>handle</span><span class='period'>.</span><span class='id identifier rubyid_ref'>ref</span><span class='comma'>,</span> <span class='id identifier rubyid_data_p'>data_p</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="validate_document-class_method">
  
    .<strong>validate_document</strong>(data)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>All BSON::Document instances are also Hash instances</p>
</div>
  </div>


<p>Checks that the specified data is a Hash before serializing it to BSON to prevent errors from libmongocrypt</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>data</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The data to be passed to libmongocrypt</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">Mongo::Error::CryptError</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If the data is not a Hash</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1217
1218
1219
1220
1221
1222
1223
1224
1225
1226
1227
1228
1229</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 1217</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_validate_document'>validate_document</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Attempted to pass nil data to libmongocrypt. </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Data must be a Hash</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Attempted to pass invalid data to libmongocrypt: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_data'>data</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Data must be a Hash</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../Error.html" title="Mongo::Error (class)">Error</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Error/CryptError.html" title="Mongo::Error::CryptError (class)">CryptError</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Error/CryptError.html#initialize-instance_method" title="Mongo::Error::CryptError#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_message'>message</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="mongocrypt_crypto_fn-instance_method">
  
    #<strong>mongocrypt_crypto_fn</strong>(ctx, key, iv, input, output, status)  &#x21d2; <tt>Bool</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>This defines a method signature for an FFI callback; it is not an instance method on the Binding class.</p>
</div>
  </div>


<p>A callback to a function that performs AES encryption or decryption.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ctx</span>
      
      
        <span class='type'>(<tt>FFI::Pointer | nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>An optional pointer to a context object that may have been set when hooks were enabled.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object that references the 32-byte AES encryption key.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>iv</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object that references the 16-byte AES IV.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>input</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object that references the value to be encrypted/decrypted.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>output</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>(out param) A pointer to a mongocrypt_binary_t object will have a reference to the encrypted/ decrypted value written to it by libmongocrypt.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>status</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_status_t object to which an error message will be written if encryption fails.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Bool</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Whether encryption/decryption was successful.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1057
1058
1059
1060
1061</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 1057</span>

<span class='id identifier rubyid_callback'>callback</span><span class='lparen'>(</span>
  <span class='symbol'>:mongocrypt_crypto_fn</span><span class='comma'>,</span>
  <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='symbol'>:bool</span>
<span class='rparen'>)</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_hash_fn-instance_method">
  
    #<strong>mongocrypt_hash_fn</strong>(ctx, input, output, status)  &#x21d2; <tt>Bool</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>This defines a method signature for an FFI callback; it is not an instance method on the Binding class.</p>
</div>
  </div>


<p>A callback to a SHA-256 hash function.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ctx</span>
      
      
        <span class='type'>(<tt>FFI::Pointer | nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>An optional pointer to a context object that may have been set when hooks were enabled.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>input</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object that references the value to be hashed.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>output</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>(out param) A pointer to a mongocrypt_binary_t object will have a reference to the output value written to it by libmongocrypt.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>status</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_status_t object to which an error message will be written if encryption fails.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Bool</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Whether hashing was successful.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1105</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 1105</span>

<span class='id identifier rubyid_callback'>callback</span> <span class='symbol'>:mongocrypt_hash_fn</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:bool</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_hmac_fn-instance_method">
  
    #<strong>mongocrypt_hmac_fn</strong>(ctx, key, input, output, status)  &#x21d2; <tt>Bool</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>This defines a method signature for an FFI callback; it is not an instance method on the Binding class.</p>
</div>
  </div>


<p>A callback to a function that performs HMAC SHA-512 or SHA-256.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ctx</span>
      
      
        <span class='type'>(<tt>FFI::Pointer | nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>An optional pointer to a context object that may have been set when hooks were enabled.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object that references the 32-byte HMAC SHA encryption key.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>input</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_binary_t object that references the input value.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>output</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>(out param) A pointer to a mongocrypt_binary_t object will have a reference to the output value written to it by libmongocrypt.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>status</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_status_t object to which an error message will be written if encryption fails.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Bool</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Whether HMAC-SHA was successful.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1082
1083
1084
1085
1086</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 1082</span>

<span class='id identifier rubyid_callback'>callback</span><span class='lparen'>(</span>
  <span class='symbol'>:mongocrypt_hmac_fn</span><span class='comma'>,</span>
  <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='symbol'>:bool</span>
<span class='rparen'>)</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_log_fn_t-instance_method">
  
    #<strong>mongocrypt_log_fn_t</strong>(level, message, len, ctx)  &#x21d2; <tt>nil</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>This defines a method signature for an FFI callback; it is not an instance method on the Binding class.</p>
</div>
  </div>


<p>A callback to the mongocrypt log function. Set a custom log callback</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_with'>with</span> <span class='id identifier rubyid_the'>the</span> <span class='id identifier rubyid_mongocrypt_setopt_log_handler'>mongocrypt_setopt_log_handler</span> <span class='id identifier rubyid_method'>method</span>
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>level</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The log level; possible values defined by the log_level enum</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>message</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The log message</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>len</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The length of the message param, or -1 if the string is null terminated</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>ctx</span>
      
      
        <span class='type'>(<tt>FFI::Pointer | nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>An optional pointer to a context object when this callback was set</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Always nil.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


219</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 219</span>

<span class='id identifier rubyid_callback'>callback</span> <span class='symbol'>:mongocrypt_log_fn_t</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:log_level</span><span class='comma'>,</span> <span class='symbol'>:string</span><span class='comma'>,</span> <span class='symbol'>:int</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:void</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mongocrypt_random_fn-instance_method">
  
    #<strong>mongocrypt_random_fn</strong>(ctx, output, count, status)  &#x21d2; <tt>Bool</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>This defines a method signature for an FFI callback; it is not an instance method on the Binding class.</p>
</div>
  </div>


<p>A callback to a crypto secure random function.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ctx</span>
      
      
        <span class='type'>(<tt>FFI::Pointer | nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>An optional pointer to a context object that may have been set when hooks were enabled.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>output</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>(out param) A pointer to a mongocrypt_binary_t object will have a reference to the output value written to it by libmongocrypt.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>count</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The number of random bytes to return.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>status</span>
      
      
        <span class='type'>(<tt>FFI::Pointer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A pointer to a mongocrypt_status_t object to which an error message will be written if encryption fails.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Bool</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Whether hashing was successful.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1123</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/crypt/binding.rb', line 1123</span>

<span class='id identifier rubyid_callback'>callback</span> <span class='symbol'>:mongocrypt_random_fn</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='comma'>,</span> <span class='symbol'>:int</span><span class='comma'>,</span> <span class='symbol'>:pointer</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:bool</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Wed May 12 17:22:12 2021 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.26 (ruby-2.7.2).
</div>

    </div>
  </body>
</html>