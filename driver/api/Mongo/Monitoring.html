<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Mongo::Monitoring
  
    &mdash; mongo-2.12.0.rc0
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Mongo::Monitoring";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (M)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Mongo.html" title="Mongo (module)">Mongo</a></span></span>
     &raquo; 
    <span class="title">Monitoring</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Mongo::Monitoring
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Mongo::Monitoring</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="Id.html" title="Mongo::Id (module)">Id</a></span>, <span class='object_link'><a href="Monitoring/Subscribable.html" title="Mongo::Monitoring::Subscribable (module)">Subscribable</a></span></dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/mongo/monitoring.rb<span class="defines">,<br />
  lib/mongo/monitoring/publishable.rb,<br /> lib/mongo/monitoring/event/secure.rb,<br /> lib/mongo/monitoring/event/cmap/base.rb,<br /> lib/mongo/monitoring/cmap_log_subscriber.rb,<br /> lib/mongo/monitoring/event/server_closed.rb,<br /> lib/mongo/monitoring/sdam_log_subscriber.rb,<br /> lib/mongo/monitoring/event/command_failed.rb,<br /> lib/mongo/monitoring/event/server_opening.rb,<br /> lib/mongo/monitoring/event/command_started.rb,<br /> lib/mongo/monitoring/event/topology_closed.rb,<br /> lib/mongo/monitoring/command_log_subscriber.rb,<br /> lib/mongo/monitoring/event/cmap/pool_closed.rb,<br /> lib/mongo/monitoring/event/topology_changed.rb,<br /> lib/mongo/monitoring/event/topology_opening.rb,<br /> lib/mongo/monitoring/event/cmap/pool_cleared.rb,<br /> lib/mongo/monitoring/event/cmap/pool_created.rb,<br /> lib/mongo/monitoring/event/command_succeeded.rb,<br /> lib/mongo/monitoring/event/cmap/connection_ready.rb,<br /> lib/mongo/monitoring/unified_sdam_log_subscriber.rb,<br /> lib/mongo/monitoring/event/cmap/connection_closed.rb,<br /> lib/mongo/monitoring/server_closed_log_subscriber.rb,<br /> lib/mongo/monitoring/event/cmap/connection_created.rb,<br /> lib/mongo/monitoring/event/server_heartbeat_failed.rb,<br /> lib/mongo/monitoring/server_opening_log_subscriber.rb,<br /> lib/mongo/monitoring/event/server_heartbeat_started.rb,<br /> lib/mongo/monitoring/topology_closed_log_subscriber.rb,<br /> lib/mongo/monitoring/topology_changed_log_subscriber.rb,<br /> lib/mongo/monitoring/topology_opening_log_subscriber.rb,<br /> lib/mongo/monitoring/event/cmap/connection_checked_in.rb,<br /> lib/mongo/monitoring/event/server_description_changed.rb,<br /> lib/mongo/monitoring/event/server_heartbeat_succeeded.rb,<br /> lib/mongo/monitoring/event/cmap/connection_checked_out.rb,<br /> lib/mongo/monitoring/event/cmap/connection_check_out_failed.rb,<br /> lib/mongo/monitoring/event/cmap/connection_check_out_started.rb,<br /> lib/mongo/monitoring/server_description_changed_log_subscriber.rb</span>
</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>The class defines behavior for the performance monitoring API.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>2.1.0</p>
</div>
      
    </li>
  
</ul>

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="Monitoring/Event.html" title="Mongo::Monitoring::Event (module)">Event</a></span>, <span class='object_link'><a href="Monitoring/Global.html" title="Mongo::Monitoring::Global (module)">Global</a></span>, <span class='object_link'><a href="Monitoring/Publishable.html" title="Mongo::Monitoring::Publishable (module)">Publishable</a></span>, <span class='object_link'><a href="Monitoring/Subscribable.html" title="Mongo::Monitoring::Subscribable (module)">Subscribable</a></span>
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Monitoring/CmapLogSubscriber.html" title="Mongo::Monitoring::CmapLogSubscriber (class)">CmapLogSubscriber</a></span>, <span class='object_link'><a href="Monitoring/CommandLogSubscriber.html" title="Mongo::Monitoring::CommandLogSubscriber (class)">CommandLogSubscriber</a></span>, <span class='object_link'><a href="Monitoring/SDAMLogSubscriber.html" title="Mongo::Monitoring::SDAMLogSubscriber (class)">SDAMLogSubscriber</a></span>, <span class='object_link'><a href="Monitoring/ServerClosedLogSubscriber.html" title="Mongo::Monitoring::ServerClosedLogSubscriber (class)">ServerClosedLogSubscriber</a></span>, <span class='object_link'><a href="Monitoring/ServerDescriptionChangedLogSubscriber.html" title="Mongo::Monitoring::ServerDescriptionChangedLogSubscriber (class)">ServerDescriptionChangedLogSubscriber</a></span>, <span class='object_link'><a href="Monitoring/ServerOpeningLogSubscriber.html" title="Mongo::Monitoring::ServerOpeningLogSubscriber (class)">ServerOpeningLogSubscriber</a></span>, <span class='object_link'><a href="Monitoring/TopologyChangedLogSubscriber.html" title="Mongo::Monitoring::TopologyChangedLogSubscriber (class)">TopologyChangedLogSubscriber</a></span>, <span class='object_link'><a href="Monitoring/TopologyClosedLogSubscriber.html" title="Mongo::Monitoring::TopologyClosedLogSubscriber (class)">TopologyClosedLogSubscriber</a></span>, <span class='object_link'><a href="Monitoring/TopologyOpeningLogSubscriber.html" title="Mongo::Monitoring::TopologyOpeningLogSubscriber (class)">TopologyOpeningLogSubscriber</a></span>, <span class='object_link'><a href="Monitoring/UnifiedSdamLogSubscriber.html" title="Mongo::Monitoring::UnifiedSdamLogSubscriber (class)">UnifiedSdamLogSubscriber</a></span>
    
  
</p>

  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="COMMAND-constant" class="">COMMAND =
          <div class="docstring">
  <div class="discussion">
    
<p>The command topic.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>2.1.0</p>
</div>
      
    </li>
  
</ul>

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Command</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="CONNECTION_POOL-constant" class="">CONNECTION_POOL =
          <div class="docstring">
  <div class="discussion">
    
<p>The connection pool topic.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>2.9.0</p>
</div>
      
    </li>
  
</ul>

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ConnectionPool</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="SERVER_CLOSED-constant" class="">SERVER_CLOSED =
          <div class="docstring">
  <div class="discussion">
    
<p>Server closed topic.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>2.4.0</p>
</div>
      
    </li>
  
</ul>

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ServerClosed</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="SERVER_DESCRIPTION_CHANGED-constant" class="">SERVER_DESCRIPTION_CHANGED =
          <div class="docstring">
  <div class="discussion">
    
<p>Server description changed topic.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>2.4.0</p>
</div>
      
    </li>
  
</ul>

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ServerDescriptionChanged</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="SERVER_OPENING-constant" class="">SERVER_OPENING =
          <div class="docstring">
  <div class="discussion">
    
<p>Server opening topic.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>2.4.0</p>
</div>
      
    </li>
  
</ul>

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ServerOpening</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="TOPOLOGY_CHANGED-constant" class="">TOPOLOGY_CHANGED =
          <div class="docstring">
  <div class="discussion">
    
<p>Topology changed topic.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>2.4.0</p>
</div>
      
    </li>
  
</ul>

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>TopologyChanged</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="TOPOLOGY_CLOSED-constant" class="">TOPOLOGY_CLOSED =
          <div class="docstring">
  <div class="discussion">
    
<p>Topology closed topic.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>2.4.0</p>
</div>
      
    </li>
  
</ul>

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>TopologyClosed</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="TOPOLOGY_OPENING-constant" class="">TOPOLOGY_OPENING =
          <div class="docstring">
  <div class="discussion">
    
<p>Topology opening topic.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>2.4.0</p>
</div>
      
    </li>
  
</ul>

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>TopologyOpening</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="SERVER_HEARTBEAT-constant" class="">SERVER_HEARTBEAT =
          <div class="docstring">
  <div class="discussion">
    
<p>Server heartbeat started topic.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>2.7.0</p>
</div>
      
    </li>
  
</ul>

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ServerHeartbeat</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
    </dl>
  




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#options-instance_method" title="#options (instance method)">#<strong>options</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#next_operation_id-class_method" title="next_operation_id (class method)">.<strong>next_operation_id</strong>  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Used for generating unique operation ids to link events together.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#failed-instance_method" title="#failed (instance method)">#<strong>failed</strong>(topic, event)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Publish a failed event.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(options = {})  &#x21d2; Monitoring </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Initialize the monitoring.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#monitoring%3F-instance_method" title="#monitoring? (instance method)">#<strong>monitoring?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#published-instance_method" title="#published (instance method)">#<strong>published</strong>(topic, event)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Publish an event.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#started-instance_method" title="#started (instance method)">#<strong>started</strong>(topic, event)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Publish a started event.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#succeeded-instance_method" title="#succeeded (instance method)">#<strong>succeeded</strong>(topic, event)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Publish a succeeded event.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Monitoring/Subscribable.html" title="Mongo::Monitoring::Subscribable (module)">Subscribable</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Monitoring/Subscribable.html#subscribe-instance_method" title="Mongo::Monitoring::Subscribable#subscribe (method)">#subscribe</a></span>, <span class='object_link'><a href="Monitoring/Subscribable.html#subscribers-instance_method" title="Mongo::Monitoring::Subscribable#subscribers (method)">#subscribers</a></span>, <span class='object_link'><a href="Monitoring/Subscribable.html#subscribers%3F-instance_method" title="Mongo::Monitoring::Subscribable#subscribers? (method)">#subscribers?</a></span>, <span class='object_link'><a href="Monitoring/Subscribable.html#unsubscribe-instance_method" title="Mongo::Monitoring::Subscribable#unsubscribe (method)">#unsubscribe</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Id.html" title="Mongo::Id (module)">Id</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Id.html#included-class_method" title="Mongo::Id.included (method)">included</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(options = {})  &#x21d2; <tt><span class='object_link'><a href="" title="Mongo::Monitoring (class)">Monitoring</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Initialize the monitoring.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Create the new monitoring.</p>
</div></p>
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="" title="Mongo::Monitoring (class)">Monitoring</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='symbol'>:monitoring</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Options. Client constructor forwards its options to Monitoring constructor, although Monitoring recognizes only a subset of the options recognized by Client.</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:monitoring</span>
          <span class="type">(<tt>true</tt>, <tt>false</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>If false is given, the Monitoring instance is initialized without global monitoring event subscribers and will not publish SDAM events. Command monitoring events will still be published, and the driver will still perform SDAM and monitor its cluster in order to perform server selection. Built-in driver logging of SDAM events will be disabled because it is implemented through SDAM event subscription. Client#subscribe will succeed for all event types, but subscribers to SDAM events will not be invoked. Values other than false result in default behavior which is to perform normal SDAM event publication.</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>2.1.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/monitoring.rb', line 217</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:monitoring</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='kw'>false</span>
    <span class='const'><span class='object_link'><a href="Monitoring/Global.html" title="Mongo::Monitoring::Global (module)">Global</a></span></span><span class='period'>.</span><span class='id identifier rubyid_subscribers'><span class='object_link'><a href="Monitoring/Subscribable.html#subscribers-instance_method" title="Mongo::Monitoring::Subscribable#subscribers (method)">subscribers</a></span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_topic'>topic</span><span class='comma'>,</span> <span class='id identifier rubyid_subscribers'>subscribers</span><span class='op'>|</span>
      <span class='id identifier rubyid_subscribers'>subscribers</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_subscriber'>subscriber</span><span class='op'>|</span>
        <span class='id identifier rubyid_subscribe'>subscribe</span><span class='lparen'>(</span><span class='id identifier rubyid_topic'>topic</span><span class='comma'>,</span> <span class='id identifier rubyid_subscriber'>subscriber</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_subscribe'>subscribe</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#COMMAND-constant" title="Mongo::Monitoring::COMMAND (constant)">COMMAND</a></span></span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="Monitoring/CommandLogSubscriber.html" title="Mongo::Monitoring::CommandLogSubscriber (class)">CommandLogSubscriber</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Monitoring/CommandLogSubscriber.html#initialize-instance_method" title="Mongo::Monitoring::CommandLogSubscriber#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='rparen'>)</span>    <span class='comment'># CMAP events are not logged by default because this will create
</span>    <span class='comment'># log entries for every operation performed by the driver.
</span>    <span class='comment'>#subscribe(CONNECTION_POOL, CmapLogSubscriber.new(options))
</span>
    <span class='id identifier rubyid_subscribe'>subscribe</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#SERVER_OPENING-constant" title="Mongo::Monitoring::SERVER_OPENING (constant)">SERVER_OPENING</a></span></span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="Monitoring/ServerOpeningLogSubscriber.html" title="Mongo::Monitoring::ServerOpeningLogSubscriber (class)">ServerOpeningLogSubscriber</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Monitoring/SDAMLogSubscriber.html#initialize-instance_method" title="Mongo::Monitoring::SDAMLogSubscriber#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_subscribe'>subscribe</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#SERVER_CLOSED-constant" title="Mongo::Monitoring::SERVER_CLOSED (constant)">SERVER_CLOSED</a></span></span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="Monitoring/ServerClosedLogSubscriber.html" title="Mongo::Monitoring::ServerClosedLogSubscriber (class)">ServerClosedLogSubscriber</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Monitoring/SDAMLogSubscriber.html#initialize-instance_method" title="Mongo::Monitoring::SDAMLogSubscriber#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_subscribe'>subscribe</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#SERVER_DESCRIPTION_CHANGED-constant" title="Mongo::Monitoring::SERVER_DESCRIPTION_CHANGED (constant)">SERVER_DESCRIPTION_CHANGED</a></span></span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="Monitoring/ServerDescriptionChangedLogSubscriber.html" title="Mongo::Monitoring::ServerDescriptionChangedLogSubscriber (class)">ServerDescriptionChangedLogSubscriber</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Monitoring/SDAMLogSubscriber.html#initialize-instance_method" title="Mongo::Monitoring::SDAMLogSubscriber#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_subscribe'>subscribe</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#TOPOLOGY_OPENING-constant" title="Mongo::Monitoring::TOPOLOGY_OPENING (constant)">TOPOLOGY_OPENING</a></span></span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="Monitoring/TopologyOpeningLogSubscriber.html" title="Mongo::Monitoring::TopologyOpeningLogSubscriber (class)">TopologyOpeningLogSubscriber</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Monitoring/SDAMLogSubscriber.html#initialize-instance_method" title="Mongo::Monitoring::SDAMLogSubscriber#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_subscribe'>subscribe</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#TOPOLOGY_CHANGED-constant" title="Mongo::Monitoring::TOPOLOGY_CHANGED (constant)">TOPOLOGY_CHANGED</a></span></span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="Monitoring/TopologyChangedLogSubscriber.html" title="Mongo::Monitoring::TopologyChangedLogSubscriber (class)">TopologyChangedLogSubscriber</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Monitoring/SDAMLogSubscriber.html#initialize-instance_method" title="Mongo::Monitoring::SDAMLogSubscriber#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_subscribe'>subscribe</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#TOPOLOGY_CLOSED-constant" title="Mongo::Monitoring::TOPOLOGY_CLOSED (constant)">TOPOLOGY_CLOSED</a></span></span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="Monitoring/TopologyClosedLogSubscriber.html" title="Mongo::Monitoring::TopologyClosedLogSubscriber (class)">TopologyClosedLogSubscriber</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Monitoring/SDAMLogSubscriber.html#initialize-instance_method" title="Mongo::Monitoring::SDAMLogSubscriber#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="options-instance_method">
  
    #<strong>options</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>2.1.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


239
240
241</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/monitoring.rb', line 239</span>

<span class='kw'>def</span> <span class='id identifier rubyid_options'>options</span>
  <span class='ivar'>@options</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="next_operation_id-class_method">
  
    .<strong>next_operation_id</strong>  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Used for generating unique operation ids to link events together.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Get the next operation id.</p>
</div></p>
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="" title="Mongo::Monitoring (class)">Monitoring</a></span></span><span class='period'>.</span><span class='id identifier rubyid_next_operation_id'>next_operation_id</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The next operation id.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>2.1.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


76
77
78</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/monitoring.rb', line 76</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_next_operation_id'>next_operation_id</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_next_id'>next_id</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="failed-instance_method">
  
    #<strong>failed</strong>(topic, event)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Publish a failed event.</p>

<p>This method is used for event types which have the started/succeeded/failed events in them, such as command and heartbeat events.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Publish a failed event.</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_monitoring'>monitoring</span><span class='period'>.</span><span class='id identifier rubyid_failed'>failed</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#COMMAND-constant" title="Mongo::Monitoring::COMMAND (constant)">COMMAND</a></span></span><span class='comma'>,</span> <span class='id identifier rubyid_event'>event</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>topic</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The event topic.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>event</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Monitoring/Event.html" title="Mongo::Monitoring::Event (module)">Event</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The event to publish.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>2.1.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


303
304
305</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/monitoring.rb', line 303</span>

<span class='kw'>def</span> <span class='id identifier rubyid_failed'>failed</span><span class='lparen'>(</span><span class='id identifier rubyid_topic'>topic</span><span class='comma'>,</span> <span class='id identifier rubyid_event'>event</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_subscribers_for'>subscribers_for</span><span class='lparen'>(</span><span class='id identifier rubyid_topic'>topic</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_subscriber'>subscriber</span><span class='op'>|</span> <span class='id identifier rubyid_subscriber'>subscriber</span><span class='period'>.</span><span class='id identifier rubyid_failed'>failed</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="monitoring?-instance_method">
  
    #<strong>monitoring?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>2.1.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


242
243
244</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/monitoring.rb', line 242</span>

<span class='kw'>def</span> <span class='id identifier rubyid_monitoring?'>monitoring?</span>
  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:monitoring</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="published-instance_method">
  
    #<strong>published</strong>(topic, event)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Publish an event.</p>

<p>This method is used for event types which only have a single event in them.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>topic</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The event topic.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>event</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Monitoring/Event.html" title="Mongo::Monitoring::Event (module)">Event</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The event to publish.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>2.9.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


255
256
257</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/monitoring.rb', line 255</span>

<span class='kw'>def</span> <span class='id identifier rubyid_published'>published</span><span class='lparen'>(</span><span class='id identifier rubyid_topic'>topic</span><span class='comma'>,</span> <span class='id identifier rubyid_event'>event</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_subscribers_for'>subscribers_for</span><span class='lparen'>(</span><span class='id identifier rubyid_topic'>topic</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_subscriber'>subscriber</span><span class='op'>|</span> <span class='id identifier rubyid_subscriber'>subscriber</span><span class='period'>.</span><span class='id identifier rubyid_published'>published</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="started-instance_method">
  
    #<strong>started</strong>(topic, event)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Publish a started event.</p>

<p>This method is used for event types which have the started/succeeded/failed events in them, such as command and heartbeat events.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Publish a started event.</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_monitoring'>monitoring</span><span class='period'>.</span><span class='id identifier rubyid_started'>started</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#COMMAND-constant" title="Mongo::Monitoring::COMMAND (constant)">COMMAND</a></span></span><span class='comma'>,</span> <span class='id identifier rubyid_event'>event</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>topic</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The event topic.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>event</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Monitoring/Event.html" title="Mongo::Monitoring::Event (module)">Event</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The event to publish.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>2.1.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


271
272
273</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/monitoring.rb', line 271</span>

<span class='kw'>def</span> <span class='id identifier rubyid_started'>started</span><span class='lparen'>(</span><span class='id identifier rubyid_topic'>topic</span><span class='comma'>,</span> <span class='id identifier rubyid_event'>event</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_subscribers_for'>subscribers_for</span><span class='lparen'>(</span><span class='id identifier rubyid_topic'>topic</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_subscriber'>subscriber</span><span class='op'>|</span> <span class='id identifier rubyid_subscriber'>subscriber</span><span class='period'>.</span><span class='id identifier rubyid_started'>started</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="succeeded-instance_method">
  
    #<strong>succeeded</strong>(topic, event)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Publish a succeeded event.</p>

<p>This method is used for event types which have the started/succeeded/failed events in them, such as command and heartbeat events.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Publish a succeeded event.</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_monitoring'>monitoring</span><span class='period'>.</span><span class='id identifier rubyid_succeeded'>succeeded</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#COMMAND-constant" title="Mongo::Monitoring::COMMAND (constant)">COMMAND</a></span></span><span class='comma'>,</span> <span class='id identifier rubyid_event'>event</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>topic</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The event topic.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>event</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Monitoring/Event.html" title="Mongo::Monitoring::Event (module)">Event</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The event to publish.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>2.1.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


287
288
289</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongo/monitoring.rb', line 287</span>

<span class='kw'>def</span> <span class='id identifier rubyid_succeeded'>succeeded</span><span class='lparen'>(</span><span class='id identifier rubyid_topic'>topic</span><span class='comma'>,</span> <span class='id identifier rubyid_event'>event</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_subscribers_for'>subscribers_for</span><span class='lparen'>(</span><span class='id identifier rubyid_topic'>topic</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_subscriber'>subscriber</span><span class='op'>|</span> <span class='id identifier rubyid_subscriber'>subscriber</span><span class='period'>.</span><span class='id identifier rubyid_succeeded'>succeeded</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Thu Apr 16 01:26:43 2020 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.24 (ruby-2.7.0).
</div>

    </div>
  </body>
</html>